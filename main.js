!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=37)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var o=i(1);function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var r=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div"));if(i){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.innerHTML=t,r.element=a.firstChild}else r.element=(0,o.createEl)(o.TAGS.DIV).innerHTML(t).child;return n(r,r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.El),e}();e.Component=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();var n={DIV:"DIV",IMG:"IMG"},r={INPUT:"input",DRAG_OVER:"dragover",DRAG_LEAVE:"dragleave",MOUSE_UP:"mouseup",LOAD_END:"loadend"},a={MAX_IMAGES:10,THUMB_SIZE_SMALL:200,THUMB_SIZE_BIG:600,CANVAS_EDGE_SIZE:35,FAST_CLICK_WAIT:270,COMPOSER_MARGIN:50,CANVAS_DISTANCE:60,HTML_INFO_ICON:'<div class="pw-drop-icon pw-icon pw-icon-info"></div>'},s={MM_TO_INCH:.0393700787},l={MIRROR:"mirror",GALLERY:"gallery",COLOR:"color"};Object.freeze(n),Object.freeze(r),Object.freeze(a),Object.freeze(s),Object.freeze(l);var c=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element="string"==typeof e?document.createElement(e):e,this}return o(t,[{key:"innerHTML",value:function(t){return this.element.innerHTML=t,this}},{key:"setAttr",value:function(t,e){return this.element.setAttribute(t,e),this}},{key:"attr",value:function(t){return this.element.getAttribute(t)}},{key:"setStyle",value:function(t,e){return this.element.style[t]=e,this}},{key:"setVal",value:function(t){return this.element.value=t,this}},{key:"val",value:function(){return this.element.value}},{key:"hide",value:function(){return this.addClass("pw-hide"),this}},{key:"show",value:function(){return this.removeClass("pw-hide"),this}},{key:"addClass",value:function(t){return this.element.classList.add(t),this}},{key:"removeClass",value:function(t){return this.element.classList.remove(t),this}},{key:"hasClass",value:function(t){return this.element.classList.contains(t)}},{key:"contains",value:function(t){return this.element.contains(t)}},{key:"remove",value:function(){return this.element.remove(),this}},{key:"append",value:function(e){return this.element.appendChild(e instanceof t?e.element:e),this}},{key:"appendTo",value:function(e){return e instanceof t&&(e=e.element),e.appendChild(this.element),this}},{key:"on",value:function(t,e){return this.element.addEventListener(t,e),this}},{key:"addHandler",value:function(t,e){return this.element.addEventListener(t,e.bind(this)),this}},{key:"stdEventBubble",value:function(t){this.element.dispatchEvent(new Event(t))}},{key:"eventBubble",value:function(t,e){return this.element.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e})),this}},{key:"qs",value:function(t){return this.element.querySelector(t)}},{key:"qsAll",value:function(t){return this.element.querySelectorAll(t)}},{key:"blip",value:function(t){if(t=t||"",this.element.innerHTML===t)return this;t=t||"&nbsp;";var e=this.element.cloneNode();return"&nbsp;"!==t?(e.innerHTML=t,e.classList.remove("pw-help-hide"),e.classList.add("pw-help-show")):(e.classList.remove("pw-help-show"),e.classList.add("pw-help-hide")),this.element.parentNode.replaceChild(e,this.element),this.element=e,this}},{key:"child",get:function(){return this.element.firstChild}},{key:"el",get:function(){return this.element}}]),t}();function d(t){return new c(t)}e.El=c,e.createEl=d,e.toEl=function(t){return d(t)},e.uid=function(){return window.btoa(Math.floor(1e5*Math.random())+String(new Date).valueOf().slice(-5)).slice(0,-2)},e.noop=function(){},e.now=function(){return(new Date).valueOf()},e.between=function(t,e,i){return Math.max(Math.min(t,i),e)},e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.TAGS=n,e.EVENTS=r,e.UNITS=s,e.CFG=a,e.SWATCHES=["1F77B4","AEC7E8","FF7F0E","FFBB78","2CA02C","98DF8A","D62728","FF9896","9467BD","C5B0D5","8C564B","C49C94","E377C2","F7B6D2","7F7F7F","C7C7C7","BCBD22","DBDB8D","17BECF","9EDAE5"],e.WRAP_STYLE=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=[],n={minDimensions:{width:800,height:600},images:o,getImg:function(t){return o.find(function(e){return e.id===t})}};e.store=n},function(t,e,i){"use strict";function o(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}Object.defineProperty(e,"__esModule",{value:!0}),e.killE=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},e.cursorPoint=function(t,e){var i=t.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i.matrixTransform(t.getScreenCTM().inverse())},e.matrixToAttr=function(t){return"matrix("+t.a+" "+t.b+" "+t.c+" "+t.d+" "+t.e+" "+t.f+")"},e.wrapWithRect=function(t,e){var i=t.getBBox();e.setAttribute("x",i.x),e.setAttribute("y",i.y),e.setAttribute("width",i.width),e.setAttribute("height",i.height)},e.getTranslate=function(t){var e=(t.getAttribute("transform")||"translate(0,0)").slice(10,-1).split(/[, ]+/).map(function(t){return parseInt(t)});return{x:e[0]||0,y:e[1]||0}},e.px=function(){return{on:function(t){return parseInt(t)+"px"},off:function(t){return parseInt(t.replace("px",""))}}},e.pointAngle=o,e.rotation=function(t,e,i){var n=o(t,e),r=o(t,i)-n;return r<-180?r+=360:r>180&&(r-=360),r},e.pointDistSq=function(t,e){var i=e.y-t.y,o=e.x-t.x;return i*i+o*o},e.point=function(t,e){return{x:t,y:e}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorInput=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(0),a=i(18),s=(o=a)&&o.__esModule?o:{default:o},l=i(1),c=i(17),d=i(3);var u=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default));return t.isOpen=!1,t.btn=(0,l.toEl)(t.qs(".pw-color-button-body")),t.modal=(0,l.toEl)(t.qs(".pw-color-input-body")).hide(),t.color="000000",t.swatches=(0,l.toEl)(t.qs(".pw-color-swatches")),t.swatchButtons=[],l.SWATCHES.forEach(function(e){var i=(0,l.createEl)(l.TAGS.DIV).setAttr("data-color",e).addClass("pw-color-swatch").setStyle("background","#"+e).appendTo(t.swatches).addHandler("click",function(e){return t.setColor(e.target.getAttribute("data-color"))});t.swatchButtons.push(i)}),t.closeBtn=(0,l.toEl)(t.qs(".pw-set-color")).addHandler("click",function(){return t.modal.hide()&&(t.isOpen=!1)}),t.moreBtn=(0,l.toEl)(t.qs(".pw-more-color")).addHandler("click",function(e){t.setState("simple"===t.state?"advanced":"simple")}),t.colorWheel=(0,l.toEl)(t.qs(".pw-color-wheel")),t.color="000000",t.setState("simple"),t.btn.addHandler("click",function(e){t.isOpen?(t.isOpen=!1,t.modal.hide(),t.modal.remove()):(t.isOpen=!0,t.modal.show(),t.setPos())}),(0,l.toEl)(document).addHandler("click",function(e){t.modal.contains(e.target)||t.contains(e.target)||t.modal.hide()&&t.modal.remove()&&(t.isOpen=!1)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),n(e,[{key:"setPos",value:function(){var t=this;document.body.appendChild(this.modal.element),this.colorPicker&&this.colorPicker.remove(),this.colorPicker=(new c.ColorPicker).appendTo(this.colorWheel).addHandler("colorPicker:input",function(e){(0,d.killE)(e),t.setColor(e.detail)}),this.setColor();var e=this.btn.element.getBoundingClientRect(),i=e.y+window.pageYOffset+e.height,o=e.x+window.pageXOffset;o>window.innerHeight-300&&(o=o-300+e.width),this.modal.setStyle("left",o+"px").setStyle("top",i+"px")}},{key:"setColor",value:function(t){t&&this.eventBubble("colorInput:set",t),t=t||this.color,this.color=t,this.colorPicker&&this.colorPicker.setColor(t),this.btn.setStyle("background","#"+t),this.swatchButtons.forEach(function(e){e[e.attr("data-color")===t?"addClass":"removeClass"]("pw-color-swatch-selected")})}},{key:"setState",value:function(t){switch(this.state=t,t){case"simple":this.swatches.show(),this.colorWheel.hide(),this.moreBtn.innerHTML("More colors");break;case"advanced":this.swatches.hide(),this.colorWheel.show(),this.moreBtn.innerHTML("Less colors")}}}],[{key:"isColorInput",value:function(t){for(;t;){if(t.classList&&t.classList.contains("pw-color-input-body"))return!0;t=t.parentNode}return!1}}]),e}();e.ColorInput=u},function(t,e){t.exports='<div> <style>.pw-wrap-flex{margin:10px 0 0 10px;display:flex;flex-direction:row}.pw-wrap-btn{white-space:nowrap;flex:0 1 0;padding:15px}.pw-wrap-chooser-info,.pw-wrap-chooser-info:active,.pw-wrap-chooser-info:hover{border-left:none}.pw-wrap-chooser-info{flex:0 1 130px;border-radius:0 3px 3px 0;text-align:right}.pw-wrap-chooser-btn{border-radius:3px 0 0 3px}.pw-wrap-chooser-info::after{content:\'▼\'}.pw-wrap-drop{position:absolute;border:1px solid #d3d3d3;box-shadow:2px 2px 20px 0 rgba(0,0,0,.25);z-index:50;left:10px;background:#fff;width:50%;padding:5px;display:flex}.pw-wrap-option{flex:1 1 30%;border:1px solid #eee;margin:10px;padding:10px;border-radius:3px;cursor:pointer}.pw-wrap-option *{pointer-events:none}.pw-wrap-option:hover{background:#edf1f7;border-color:#d4d7f7}.pw-wrap-option:active{background:#f3f7fd;border-color:#d4d7f7}.pw-wrap-option h2{text-align:center;margin:0 0 15px 0;font-weight:300;font-size:18px}@media screen and (max-width:1200px){.pw-wrap-drop{width:calc(100% - 20px)}}.pw-wrap-img{left:25%;height:170px;width:75%;position:relative;perspective:500px}.pw-wrap-img-img{width:150px;height:150px;overflow:hidden}.pw-wrap-img img{width:200px;height:200px;position:relative}.pw-wrap-img-front img{left:-50px;top:-25px}.pw-wrap-img-front{position:absolute;transform:rotate3d(0,1,0,25deg)}.pw-wrap-img-left img{left:-25px;top:-25px}.pw-wrap-img-left{width:25px;position:absolute;transform:translate3d(-16px,0,20px) rotate3d(0,1,0,-50deg)}.pw-color-wrap{background:#dc143c}.pw-img-flipped img{left:-125px;transform:scaleX(-1)}.pw-wrap-help{text-align:center;margin:0 15px;font-weight:300}</style> <div class=pw-wrap-flex> <div class="pw-btn pw-wrap-btn pw-wrap-chooser-btn"> Choose canvas wrap style </div> <div class="pw-btn pw-wrap-btn pw-wrap-chooser-info"> Mirror wrap </div> </div> <div class=pw-wrap-drop> <div class=pw-wrap-option data-value=mirror> <h2>Mirror Wrap</h2> <div class=pw-wrap-img> <div class="pw-wrap-img-img pw-wrap-img-front"> <img src=https://buribalazs.github.io/fish.png> </div> <div class="pw-img-flipped pw-wrap-img-img pw-wrap-img-left"> <img src=https://buribalazs.github.io/fish.png> </div> </div> <div class=pw-wrap-help> The image is mirrored onto the edges of the canvas </div> </div> <div class=pw-wrap-option data-value=gallery> <h2>Gallery Wrap</h2> <div class=pw-wrap-img> <div class="pw-wrap-img-img pw-wrap-img-front"> <img src=https://buribalazs.github.io/fish.png> </div> <div class="pw-wrap-img-img pw-wrap-img-left"> <img src=https://buribalazs.github.io/fish.png> </div> </div> <div class=pw-wrap-help> The image is wrapping onto the edges of the canvas </div> </div> <div class=pw-wrap-option data-value=color> <h2>Color Wrap</h2> <div class=pw-wrap-img> <div class="pw-wrap-img-img pw-wrap-img-front"> <img src=https://buribalazs.github.io/fish.png> </div> <div class="pw-color-wrap pw-wrap-img-img pw-wrap-img-left"> </div> </div> <div class=pw-wrap-help> The edges are filled with a custom color </div> </div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WrapChooser=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(5),a=(o=r)&&o.__esModule?o:{default:o},s=i(0),l=i(1);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.modal=(0,l.toEl)(t.qs(".pw-wrap-drop")).hide(),t.isOpen=!1,t.chooseButton=(0,l.toEl)(t.qs(".pw-wrap-chooser-btn")),t.infoButton=(0,l.toEl)(t.qs(".pw-wrap-chooser-info")),[t.chooseButton,t.infoButton].forEach(function(e){e.addHandler("click",t.toggle.bind(t))}),t.qsAll(".pw-wrap-option").forEach(function(e){(0,l.toEl)(e).addHandler("click",function(e){var i=(0,l.toEl)(e.target).attr("data-value");t.infoButton.innerHTML((0,l.capitalize)(i)+" wrap"),t.eventBubble("wrap:change",i),t.toggle()})}),(0,l.toEl)(document).addHandler("click",function(e){t.isOpen&&!t.contains(e.target)&&t.toggle()}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),n(e,[{key:"toggle",value:function(){this.modal[this.isOpen?"hide":"show"](),this.isOpen=!this.isOpen}}]),e}();e.WrapChooser=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorDisplay=void 0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),n=i(2);var r=5,a=[],s=null,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return o(t,null,[{key:"display",value:function(t){a.push(t.detail),clearTimeout(s),s=setTimeout(c,700)}}]),t}();function c(){var t=Math.max(0,a.length-r);a=a.slice(0,r),t&&a.push({error:"more",name:t}),a="<ul>"+(a=a.map(function(t){return"<li>"+function(t){return{noFile:"File not found: "+t.name,imageTooSmall:"<strong>"+t.name+" is too small.</strong> Minimum image size for optimal quality is "+(t.min&&t.min.width)+"×"+(t.min&&t.min.height)+" pixels",invalidFile:"<strong>"+t.name+" is not supported.</strong> Please upload JPG or PNG files",more:"...<strong>"+t.name+"</strong> more errors"}[t.error]||"unknown error"}(t)+"</li>"}).join(""))+"</ul>",n.store.modal.open({html:a}),a=[]}e.ErrorDisplay=l},function(t,e){t.exports="<div> <style>.font-selector{box-sizing:border-box;position:relative;font-size:18px;line-height:38px;cursor:pointer}@media screen and (max-width:900px){.font-selector{font-size:12px}}@media screen and (max-width:1200px){.font-selector{font-size:14px}}.font-selector *{box-sizing:border-box}.font-selector .fs-current,.font-selector .fs-list{padding-left:5px;border:1px solid #d3d3d3;background:#fff}.font-selector .fs-list{border-top:none;display:none;z-index:10;position:absolute;max-height:200px;overflow-x:hidden;overflow-y:auto}.font-selector .fs-list.fs-list-open{display:block}.pw-font-disabled{opacity:.5;pointer-events:none}.font-option:hover{background:#eee}.font-option.fs-selected{background:#4169e1;color:#fff}.font-option.fs-selected:hover{background:#4169e1}</style> <div class=font-selector> <div class=fs-current></div> <div class=fs-list></div> </div> </div>"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontSelector=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(8),a=(o=r)&&o.__esModule?o:{default:o},s=i(0),l=i(2);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.fontFaces=l.store.fontFaces,t.fontSelector=t.qs(".font-selector"),t.fsCurrent=t.qs(".fs-current"),t.fsList=t.qs(".fs-list"),t.open=!1,t.fsList.innerHTML=t.fontFaces.map(function(t){return'<div class="font-option" data-font="'+t+'" style="font-family: '+t+'">'+t+"</div>"}).join(""),t.listItems=Array.from(t.fsList.childNodes),t.listItems.forEach(function(e){return e.addEventListener("click",t.selectFont.bind(t))}),t.FONT=t.fontFaces[0],t.setCurrent(t.FONT),t.fsCurrent.addEventListener("click",t.clickTop.bind(t)),window.addEventListener("resize",t.resize.bind(t)),t.resize(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),n(e,[{key:"selectFont",value:function(t){this.listItems.forEach(function(t){return t.classList.remove("fs-selected")}),this.setCurrent(t.currentTarget.getAttribute("data-font")),this.stdEventBubble("input"),this.clickTop()}},{key:"setCurrent",value:function(t){this.FONT=t,this.fsList.querySelector('[data-font="'+t+'"]').classList.add("fs-selected"),this.fsCurrent.innerText=t,this.fsCurrent.style.fontFamily=t}},{key:"clickTop",value:function(t){this.open=void 0!==t?t:!this.open,this.fsList.classList[this.open?"add":"remove"]("fs-list-open"),this.open&&this.resize()}},{key:"resize",value:function(){this.fsList.style.width=window.getComputedStyle(this.fsCurrent).width}},{key:"setEnabled",value:function(t){this[t?"removeClass":"addClass"]("pw-font-disabled"),t||this.clickTop(!1)}}]),e}();e.FontSelector=c},function(t,e){t.exports='<div class=pw-text-formatter> <style>.pw-tf-label{margin:15px 0 5px;display:inline-block;color:gray}.pw-tf-row{display:flex;flex-direction:row}.pw-tf-col{flex:1 1 auto}.pw-tf-col-color{flex:0 1 70px}.pw-tf-select{padding:9px;font-size:18px;border:none;outline:1px solid #d3d3d3}#pw-add-image{margin-bottom:10px}</style> <a id=text-formatter-exit class="pw-float-right pw-space" href=javascript:void(0);>Back to images</a> <button id=pw-add-image class="pw-btn pw-file-button">Add Image</button> <button id=pw-add-text class="pw-btn pw-file-button">Add Text</button> <div class=tf-settings> <label class=pw-tf-label>Font</label> <div class=font-selector-container></div> <div class=pw-tf-row> <div class="pw-tf-col pw-tf-col-color"> <label class=pw-tf-label>Color</label> <div class=pw-color-picker> </div> </div> <div class=pw-tf-col> <label for=pw-font-size class=pw-tf-label>Size</label> <div> <select id=pw-font-size class="pw-select pw-tf-select"> <option value=12>12</option> <option value=18>18</option> <option value=24>24</option> <option value=32>32</option> <option value=38>32</option> <option value=48>48</option> <option value=64>64</option> <option value=96>96</option> <option value=124>124</option> </select> </div> </div> </div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextFormatter=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(10),a=(o=r)&&o.__esModule?o:{default:o},s=i(0),l=i(1),c=i(9),d=i(4);var u=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.backButton=t.qs("#text-formatter-exit"),t.addButton=t.qs("#pw-add-text"),t.addImageButton=(0,l.toEl)(t.qs("#pw-add-image")),t.backButton.addEventListener("click",function(e){return t.eventBubble("textFormatter:exit")}),t.addImageButton.addHandler("click",function(e){return t.eventBubble("textFormatter:exit")}),t.addButton.addEventListener("click",function(e){return t.eventBubble("textFormatter:addText")}),t.settings=(0,l.toEl)(t.qs(".tf-settings")),t.fontSelector=(new c.FontSelector).appendTo(t.qs(".font-selector-container")).addHandler("input",function(e){t.canvasText.setFont(t.fontSelector.FONT,void 0,!0)}),t.sizeSelector=(0,l.toEl)(t.qs("#pw-font-size")).addHandler("input",function(e){t.canvasText.fontSize=e.target.value,t.canvasText.lineHeight=Math.round(1.15*e.target.value),t.canvasText.setFont(null,null,!0)}),t.canvasText=null,t.setEnabled(),t.colorInput=(new d.ColorInput).appendTo(t.qs(".pw-color-picker")).addHandler("colorInput:set",function(e){t.canvasText.color=e.detail,t.canvasText.setFont(null,null,!0)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),n(e,[{key:"setEnabled",value:function(t){return this.settings[t?"show":"hide"](),this}},{key:"setFormat",value:function(t){return this.fontSelector.setCurrent(t.font),this.canvasText=t,this.colorInput.setColor(this.canvasText.color),this.sizeSelector.setVal(this.canvasText.fontSize),this}},{key:"canvas",set:function(t){this.addImageButton[t.hasImage?"hide":"show"]()}}]),e}();e.TextFormatter=u},function(t,e){t.exports='<div class=pw-modal-wrap> <div class=pw-modal-window-wrap> <div class=aligner-item--top></div> <div class=pw-modal-window> <div class=pw-delete></div> <div class=pw-modal-content> Really delete asd.png? </div> <div class=pw-modal-btn-container> <button class="pw-btn pw-modal-close">Close</button> <button class="pw-btn pw-modal-confirm pw-float-right"></button> </div> </div> <div class=aligner-item--bottom></div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(12),a=(o=r)&&o.__esModule?o:{default:o},s=i(0),l=i(2);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return l.store.modal=t,t.bg=t.qs(".pw-modal-window-wrap"),t.bg.addEventListener("click",t.close.bind(t)),t.closeIcon=t.qs(".pw-delete"),t.closeButton=t.qs(".pw-modal-close"),t.confirmButton=t.qs(".pw-modal-confirm"),t.contentArea=t.qs(".pw-modal-content"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),n(e,[{key:"open",value:function(t){var e=this;return this.confirmButton.classList[t.danger?"add":"remove"]("pw-btn-danger"),this.contentArea.innerHTML="","string"==typeof t.html?this.contentArea.innerHTML=t.html:t.html instanceof s.Component?this.contentArea.appendChild(t.html.element):this.contentArea.appendChild(t.html),this.confirmButton.innerHTML=t.btnText||"Confirm",this.closeButton.style.visibility=t.btnText?"inherit":"hidden",this.addClass("pw-modal-wrap-open"),new Promise(function(t){e.confirmHandler=function(i){t(),e.close()},e.confirmButton.addEventListener("click",e.confirmHandler)})}},{key:"close",value:function(t){return t&&![this.bg,this.closeIcon,this.closeButton].includes(t.target)||this.removeClass("pw-modal-wrap-open"),this.confirmButton.removeEventListener("click",this.confirmHandler),this}},{key:"isOpen",get:function(){return this.hasClass("pw-modal-wrap-open")}}]),e}();e.Modal=c},function(t,e){t.exports="<div class=pw-rotate-buttons> <button class=pw-btn id=pw-rotate-left data-value=-5>◄ Rotate left</button> <button class=pw-btn id=pw-rotate-right data-value=5>Rotate right ►</button> </div>"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rotater=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(14),a=(o=r)&&o.__esModule?o:{default:o},s=i(0);var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.left=t.qs("#pw-rotate-left"),t.right=t.qs("#pw-rotate-right"),[t.left,t.right].forEach(function(e){return e.addEventListener("click",function(e){t.element.value=parseInt(e.target.getAttribute("data-value")),t.stdEventBubble("input")})}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),n(e,[{key:"setEnabled",value:function(t){[this.left,this.right].forEach(function(e){return e[t?"removeAttribute":"setAttribute"]("disabled",!0)})}}]),e}();e.Rotater=l},function(t,e){t.exports='<div class=pw-color-picker> <div class=color-picker> <svg width=100% height=230 viewBox="0 0 280 220" preserveAspectRatio=xMidYMid> <defs> <linearGradient id=rainbow x1=0% y1=0% x2=0% y2=100%> </linearGradient> <linearGradient id=white-black x1=0% y1=0% x2=0% y2=100%> <stop offset=0% style=stop-color:#fff;stop-opacity:1></stop> <stop offset=100% style=stop-color:#000;stop-opacity:1></stop> </linearGradient> <linearGradient id=color-black x1=0% y1=0% x2=0% y2=100%> </linearGradient> <linearGradient id=saturation-mask-gradient x1=0% y1=0% x2=100% y2=0%> <stop offset=0% style=stop-color:#000;stop-opacity:1></stop> <stop offset=100% style=stop-color:#fff;stop-opacity:1></stop> </linearGradient> <mask id=saturation-mask> <rect x=0 y=0 width=200 height=200 fill=url(#saturation-mask-gradient) /> </mask> </defs> <g transform=translate(10,10)> <rect class=bw height=200 width=200 fill=url(#white-black)></rect> <rect class=nomouse height=200 width=200 fill=url(#color-black) mask=url(#saturation-mask)></rect> <rect class=rainbow height=200 width=50 x=210 fill=url(#rainbow)></rect> <g class=color-dot> <rect x=-7 y=-7 width=16 height=16 stroke=white fill=none></rect> <rect x=-8 y=-8 width=16 height=16 stroke=black fill=none></rect> </g> <g class=hue-slider> <rect width=54 height=16 stroke=white fill=none></rect> <rect x=-1 y=-1 width=54 height=16 stroke=black fill=none></rect> </g> </g> </svg> </div> <div class=cp-toolbar> <div class="cp-col pw-float-right"> <div class=color-display></div> </div> <div class="cp-col pw-float-right"> <span>#</span><input class=hex-input value=54F100 spellcheck=false> </div> <div class=clearfix></div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPicker=void 0;var o,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),a=i(0),s=i(16),l=(o=s)&&o.__esModule?o:{default:o},c=i(3),d=i(1);function u(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l.default));return i.handleInput=void 0,i.init(t,i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),r(e,[{key:"dispatch",value:function(t){this.eventBubble("colorPicker:input",t)}},{key:"init",value:function(t,e){e.COLOR=t||"FFFF88";var i=200,o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],r=this.element.querySelector("svg"),a=this.element.querySelector(".rainbow"),s=this.element.querySelector(".bw"),l=this.element.querySelector("#rainbow"),p=this.element.querySelector("#color-black"),h=this.element.querySelector(".color-dot"),f=this.element.querySelector(".hue-slider"),g=this.element.querySelector(".color-display"),v=[{h:0},{h:64},{h:128},{h:196},{h:255},{h:300}];e.handleInput=y,e.setColor=function(t){w.value=t.replace("#",""),b=C(w.value),y()};var m=Math.floor(100/(v.length-1)),w=this.element.querySelector(".hex-input"),b=void 0;function y(t){if(t&&(b=t),w.value=Array.from(w.value.toUpperCase().slice(0,6)).filter(function(t){return o.includes(t)}).join(""),!(w.value.length<6)){e.COLOR=w.value,w.classList.remove("cp-invalid"),h.setAttribute("transform","translate("+function(t){if("object"===(void 0===t?"undefined":n(t)))return t[1]*i;var e=C(t);return Math.round(e[1]*i)}(t||e.COLOR)+","+function(t){if("object"===(void 0===t?"undefined":n(t)))return(1-t[2])*i;var e=C(t);return i-Math.round(e[2]*i)}(t||e.COLOR)+")");var r=C(e.COLOR);return r[0]=r[0]||1/255,p.innerHTML='<stop offset="0%" style="stop-color:hsl('+360*r[0]+',100%,50%);stop-opacity:1" /><stop offset="100%" style="stop-color:hsl('+360*r[0]+',0%,0%);stop-opacity:1" />',f.setAttribute("transform","translate(209, "+(240*(t?t[0]:r[0])-9)+")"),g.style.backgroundColor="#"+e.COLOR,e.COLOR}w.classList.add("cp-invalid")}function x(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]);var i=(0,c.cursorPoint)(r,t);i.y-=9;var o=b||C(e.COLOR);i.y=(0,d.between)(i.y,0,200),o[0]=i.y/240,e.COLOR=A.apply(void 0,u(o)),w.value=e.COLOR,e.handleInput(o),e.dispatch(e.COLOR)}function E(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]);var o=(0,c.cursorPoint)(r,t);o.x-=10,o.y-=10;var n=b||C(e.COLOR);o.x=(0,d.between)(o.x,0,i),o.y=(0,d.between)(o.y,0,i),n[1]=o.x/i||1/255,n[2]=(i-o.y)/i,e.COLOR=A.apply(void 0,u(n)),w.value=e.COLOR,e.handleInput(n),e.dispatch(e.COLOR)}function C(t){return function(t,e,i){t/=255,e/=255,i/=255;var o=Math.max(t,e,i),n=Math.min(t,e,i),r=void 0,a=void 0,s=o,l=o-n;if(a=0==o?0:l/o,o==n)r=0;else{switch(o){case t:r=(e-i)/l+(e<i?6:0);break;case e:r=(i-t)/l+2;break;case i:r=(t-e)/l+4}r/=6}return[r,a,s]}.apply(void 0,u(function(t){return[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)]}(t)))}function A(t,e,i){return function(t,e,i){var o=void 0,n=void 0,r=void 0,a=Math.floor(6*t),s=6*t-a,l=i*(1-e),c=i*(1-s*e),d=i*(1-(1-s)*e);switch(a%6){case 0:o=i,n=d,r=l;break;case 1:o=c,n=i,r=l;break;case 2:o=l,n=i,r=d;break;case 3:o=l,n=c,r=i;break;case 4:o=d,n=l,r=i;break;case 5:o=i,n=l,r=c}return[255*o,255*n,255*r]}(t,e,i).map(function(t){return 1===(t=Math.round(t).toString(16)).length&&(t="0"+t),t}).join("")}w.addEventListener("input",function(t){y()&&e.dispatch(e.COLOR)}),l.innerHTML=v.map(function(t,e){return'<stop offset="'+e*m+'%" style="stop-color:hsl('+t.h+',100%,50%);stop-opacity:1" />'}).join("\n"),this.handleInput(),a.addEventListener("mousedown",function(t){x(t),a.addEventListener("mousemove",x)}),a.addEventListener("touchstart",function(t){x(t),a.addEventListener("touchmove",x)}),s.addEventListener("mousedown",function(t){E(t),s.addEventListener("mousemove",E)}),s.addEventListener("touchstart",function(t){E(t),s.addEventListener("touchmove",E)}),this.element.addEventListener("mouseup",function(t){a.removeEventListener("mousemove",x),s.removeEventListener("mousemove",E)}),this.element.addEventListener("touchend",function(t){a.removeEventListener("touchmove",x),s.removeEventListener("touchmove",E)})}}]),e}();e.ColorPicker=p},function(t,e){t.exports='<div class=pw-color-input> <style>.pw-color-button-highlight{position:absolute;top:0;background:#fff;pointer-events:none}.pw-color-button-body{border:3px solid #e9e9e9;background:red;outline:1px solid #bfbfbf;position:relative}.pw-color-button,.pw-color-button-body,.pw-color-button-highlight{width:40px;height:40px;cursor:pointer}.pw-wide .pw-color-button,.pw-wide .pw-color-button-body,.pw-wide .pw-color-button-highlight{width:100%}.pw-color-button .pw-color-button-highlight{opacity:0}.pw-color-button:hover .pw-color-button-body{border-color:#fff}.pw-color-button:active .pw-color-button-highlight{opacity:.2}.pw-color-input-wrap{position:relative}.pw-color-input-body{position:fixed;width:300px;padding:5px 0;background:#fff;border:1px solid #d3d3d3;box-shadow:2px 2px 20px 0 rgba(0,0,0,.25);z-index:100}.pw-color-swatches{text-align:center}.pw-color-swatch{margin:8px;width:40px;height:40px;border:1px solid #d3d3d3;display:inline-block;cursor:pointer}.pw-color-swatch:active:not(.pw-color-swatch-selected),.pw-color-swatch:hover:not(.pw-color-swatch-selected){outline:1px solid #d3d3d3}.pw-color-swatch:active{opacity:.6}.pw-color-swatch-selected{outline:3px solid #d3d3d3}.pw-color-more{padding:5px 15px}.cp-toolbar{padding:0 15px 10px 0}</style> <div class=pw-color-input-wrap> <div class=pw-color-button> <div class=pw-color-button-body></div> <div class=pw-color-button-highlight></div> </div> <div class=pw-color-input-body> <div> <div class=pw-color-swatches> </div> <div class=pw-color-wheel></div> <div class=pw-color-more> <button class="pw-more-color pw-btn"> More Colors </button> <button class="pw-set-color pw-btn pw-float-right"> Close </button> </div> </div> </div> </div> </div>'},function(t,e){t.exports="<g class=canvas-text> <style>.canvas-text-text{paint-order:stroke;stroke-width:1px;stroke:none;stroke-linecap:butt;stroke-linejoin:miter}</style> <defs> <clippath id=text-crop> <rect width=300 height=300></rect> </clippath> </defs> <g clip-path=url(#text-crop) class=canvas-text> <g class=translate-group transform=translate(0,200)> <g class=rotate-group transform=rotate(0,150,0)> <g class=vertical-center-group> <text class=canvas-text-text text-anchor=middle fill=red></text> <g class=text-rect> <rect class=test-rect fill=rgba(0,0,0,0) width=10 height=10></rect> </g> <foreignobject class=pw-fo width=300 height=300> <div class=text-wrap> <div class=text-input spellcheck=false contenteditable=true>edit Text</div> </div> </foreignobject> <rect class=center-point width=1 height=1 fill=none x=150></rect> <g class=edit-icon> <circle r=10 cx=10 cy=10 fill=dodgerblue></circle> <text class=pw-svg-icon x=2 y=15 fill=white>✎</text> </g> <g class=rotate-icon> <line x1=10 y1=10 x2=10 y2=40 stroke=gray></line> <circle r=10 cx=10 cy=10 fill=dodgerblue></circle> <text class=pw-svg-icon x=3 y=15 fill=white>↻</text> </g> <g class=delete-icon> <circle r=10 cx=10 cy=10 fill=orange></circle> <text class=pw-svg-icon x=6 y=15 fill=black>×</text> </g> </g> </g> </g> </g> </g> "},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasText=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(0),a=i(19),s=(o=a)&&o.__esModule?o:{default:o},l=i(1),c=i(3),d=i(2),u=i(4);navigator.userAgent.toLowerCase().includes("firefox");var p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default,"svg"));i.canvas=t,i.width=t.width,i.height=t.height,i.svg=i.canvas.svg,i.input=i.qs(".text-input"),i.textWrap=i.qs(".text-wrap"),i.translateGroup=i.qs(".translate-group"),i.rotateGroup=i.qs(".rotate-group"),i.vcGroup=i.qs(".vertical-center-group"),i.centerPoint=i.qs(".center-point"),i.editIcon=i.qs(".edit-icon"),i.deleteIcon=i.qs(".delete-icon"),i.rotateIcon=i.qs(".rotate-icon"),i.text=i.qs(".canvas-text-text"),i.fo=i.qs(".pw-fo"),i.offset={x:0,y:0},i.textRect=i.qs(".text-rect"),i.testRect=i.qs(".test-rect"),i.cropRect=(0,l.toEl)(i.qs("#text-crop rect")),i.font=d.store.fontFaces[0],i.stroke="none",i.color="FF0000",i.fontSize=32,i.lineHeight=38,i.rotateIcon.addEventListener("mousedown",i.startRotate.bind(i)),i.rotateIcon.addEventListener("touchstart",i.startRotate.bind(i)),i.textRect.addEventListener("mousedown",i.start.bind(i)),i.textRect.addEventListener("touchstart",i.start.bind(i)),i.deleteIcon.addEventListener("mousedown",function(t){return i.blur().element.dispatchEvent(new Event("remove"))}),i.deleteIcon.addEventListener("touchstart",function(t){return i.element.dispatchEvent(new Event("remove"))}),i.editIcon.addEventListener("click",function(t){return i.focus()}),i.input.addEventListener("input",i.update.bind(i));var o=i.end.bind(i);return i.textWrap.addEventListener("click",function(t){console.log(t),o(t)}),document.addEventListener("mouseup",o),document.addEventListener("touchend",o),document.addEventListener("mouseleave",o),i.input.addEventListener("blur",o),i.fo.setAttribute("width",i.width),i.fo.setAttribute("height",i.height),i.setFont(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),n(e,[{key:"startRotate",value:function(t){(0,c.killE)(t),document.rotateHandler=this.rotate.bind(this),this.svg.rotateHandler=this.rotate.bind(this),document.addEventListener("mousemove",document.rotateHandler),this.svg.addEventListener("touchmove",this.svg.rotateHandler)}},{key:"rotate",value:function(t){(0,c.killE)(t),this.rotating=!0,t.touches&&(t=t.touches[0]);var e=this.svg.createSVGPoint();e.x=this.centerPoint.getAttribute("x"),e.y=this.centerPoint.getAttribute("y");var i=e.matrixTransform(this.centerPoint.getCTM());i=i.matrixTransform(this.canvas.totalGroup.getCTM().inverse());var o=3*Math.round(((0,c.pointAngle)(i,(0,c.cursorPoint)(this.svg,t))+90)/3);this.rotateGroup.setAttribute("transform","rotate("+Math.round(o)+","+this.width/2+",0)")}},{key:"fastClick",value:function(t){(0,c.killE)(t),this.fo.classList.add("pw-fo-active"),this.textRect.classList.add("text-hidden"),this.text.classList.add("text-hidden"),this.focus(),this.input.focus()}},{key:"start",value:function(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]),this.input.clickTime=(0,l.now)(),this.svg.moveHandler=this.move.bind(this),this.svg.addEventListener("mousemove",this.svg.moveHandler),this.svg.addEventListener("touchmove",this.svg.moveHandler);var e=this.svg.createSVGPoint();e.x=t.clientX,e.y=t.clientY,e=e.matrixTransform(this.svg.getScreenCTM().inverse());var i=(0,c.getTranslate)(this.translateGroup);this.offset.x=e.x-i.x,this.offset.y=e.y-i.y}},{key:"end",value:function(t){var e=this;document.removeEventListener("mousemove",document.rotateHandler),this.svg.removeEventListener("mousemove",this.svg.moveHandler),this.svg.removeEventListener("touchmove",this.svg.moveHandler);var i=(0,l.now)()-this.input.clickTime;if(t.target===this.testRect)i<l.CFG.FAST_CLICK_WAIT&&this.fastClick(t);else if(!(this.textFormatter.settings.contains(t.target)||u.ColorInput.isColorInput(t.target)||t.target===document||this.rotating||[this.input].includes(t.target))){e.fo.classList.remove("pw-fo-active"),e.textRect.classList.remove("text-hidden"),e.text.classList.remove("text-hidden"),e.blur()}this.rotating=!1}},{key:"focus",value:function(){if(!this.hasClass("canvas-text-focus"))return this.eventBubble("canvasText:focus",this),this.addClass("canvas-text-focus"),this}},{key:"blur",value:function(){if(this.hasClass("canvas-text-focus"))return this.eventBubble("canvasText:blur",this),this.removeClass("canvas-text-focus"),this}},{key:"move",value:function(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]);var e=(0,c.cursorPoint)(this.svg,t);e.x=(0,l.between)(e.x-this.offset.x,-this.width/2,this.width/2),e.y=(0,l.between)(e.y-this.offset.y,0,this.height),this.translateGroup.setAttribute("transform","translate("+e.x+","+e.y+")")}},{key:"update",value:function(){for(var t=this.input.innerHTML.replace(/<div>/g,"").replace(/<\/div>/g,"<br>").split("<br>");t.length>1&&!t[t.length-1];)t.pop();var e=window.getComputedStyle(this.input);this.updateText(t,e);var i=(0,c.px)().off(e.width),o=(0,c.px)().off(e.height);this.centerPoint.setAttribute("y",o/2),this.rotateIcon.setAttribute("transform","translate("+((this.width-i)/2+i/2-10)+", -40)"),this.editIcon.setAttribute("transform","translate("+((this.width-i)/2-20)+", -20)"),this.deleteIcon.setAttribute("transform","translate("+(i+(this.width-i)/2)+", -20)"),this.vcGroup.setAttribute("transform","translate(0,"+-o/2+")"),this.cropRect.setAttr("width",this.width+2*l.CFG.CANVAS_EDGE_SIZE).setAttr("height",this.height+2*l.CFG.CANVAS_EDGE_SIZE).setAttr("x",-l.CFG.CANVAS_EDGE_SIZE).setAttr("y",-l.CFG.CANVAS_EDGE_SIZE)}},{key:"updateText",value:function(t,e){var i=this,o=(0,c.px)().off(e.fontSize),n=this.lineHeight;this.text.innerHTML="<tspan >O</tspan><tspan >O</tspan>";var r=this.text.getBBox();1!==t.length||t[0]||(t[0]="&nbsp;"),this.text.innerHTML=t.map(function(e,a){return'<tspan x="'+(i.width/2+(a<t.length-1?o/7:0))+'" y="'+(a*n-r.y)+'">'+e+"</tspan>"}).join("\n"),(0,c.wrapWithRect)(this.text,this.testRect),this.centerPoint.setAttribute("x",this.width/2)}},{key:"pointerEvents",value:function(t){t=t||"auto",this.element.style.pointerEvents=t}},{key:"setFont",value:function(t,e,i){var o=this;return t=t||this.font,e=e||this.fontSize,this.font=t,this.fontSize=e,[this.input,this.text].forEach(function(i){i.style.fontFamily=t,i.style.fontSize=(0,c.px)().on(e),i.style.lineHeight=(0,c.px)().on(o.lineHeight),i.style.color="#"+o.color,i.style.fill="#"+o.color,i.style.stroke="#"+o.stroke}),i&&this.update(),this}}]),e}();e.CanvasText=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MiniQ=void 0;var o=i(1);e.MiniQ=function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.from(e.querySelectorAll("[data-id]")).forEach(function(t){i[t.getAttribute("data-id")]=(0,o.createEl)(t)})}},function(t,e){t.exports='<g class=pw-canvas> <defs> <clippath id=mid> <rect data-id=midrect width=300 height=300></rect> </clippath> <clippath id=top> <rect data-id=toprect width=300 height=300></rect> </clippath> <clippath id=topleft> <rect data-id=topleftrect width=300 height=300></rect> </clippath> <clippath id=topright> <rect data-id=toprightrect width=300 height=300></rect> </clippath> <clippath id=left> <rect data-id=leftrect width=300 height=300></rect> </clippath> <clippath id=preview> <polygon data-id=previewpoly points="0,0 10,0 10,10 0,10"></polygon> </clippath> <clippath id=right> <rect data-id=rightrect width=300 height=300></rect> </clippath> <clippath id=bottom> <rect data-id=bottomrect width=300 height=300></rect> </clippath> <clippath id=bottomleft> <rect data-id=bottomleftrect width=300 height=300></rect> </clippath> <clippath id=bottomright> <rect data-id=bottomrightrect width=300 height=300></rect> </clippath> <filter id=f3 x=0 y=0 width=130% height=130%> <feoffset result=offOut in=SourceAlpha dx=0 dy=2 /> <fegaussianblur result=blurOut in=offOut stddeviation=6 /> <fecomponenttransfer> <fefunca type=linear slope=0.2 /> </fecomponenttransfer> <femerge> <femergenode/> <femergenode in=SourceGraphic /> </femerge> </filter> <lineargradient id=edgehighlight x1=20% y1=0% x2=0% y2=100%> <stop offset=0% style=stop-color:#fff;stop-opacity:.7 /> <stop offset=100% style=stop-color:#fff;stop-opacity:.3 /> </lineargradient> </defs> <g class=canvas-effect> <g class=canvas-wrap> <rect data-id=canvasbg class=canvas-bg height=300 width=300></rect> <g clip-path=url(#mid)> <g class=img-translate-group transform=translate(0,0)> <g class=img-scale-group transform="scale(1) translate(0, 0)"> <g transform="rotate(45 150 150)" class=img-rotate-group> <image data-id=img-main width=300 height=300 class=img-main xlink:href=""></image> </g> </g> </g> </g> <g class=mirror-wrap> <g class=img-top-group clip-path=url(#top)> <image data-id=img-top class="img-edge img-top" width=300 height=300 xlink:href=""></image> </g> <g class=img-left-group clip-path=url(#left)> <image data-id=img-left class="img-edge img-left" width=300 height=300 xlink:href=""></image> </g> <g class=img-top-left-group clip-path=url(#topleft)> <image data-id=img-top-left class="img-edge img-top-left" width=300 height=300 xlink:href=""></image> </g> <g class=img-top-right-group clip-path=url(#topright)> <image data-id=img-top-right class="img-edge img-top-right" width=300 height=300 xlink:href=""></image> </g> <g class=img-right-group clip-path=url(#right)> <image data-id=img-right class="img-edge img-right" width=300 height=300 xlink:href=""></image> </g> <g class=img-bottom-group clip-path=url(#bottom)> <image data-id=img-bottom class="img-edge img-bottom" width=300 height=300 xlink:href=""></image> </g> <g class=img-bottom-left-group clip-path=url(#bottomleft)> <image data-id=img-bottom-left class="img-edge img-bottom-left" width=300 height=300 xlink:href=""></image> </g> <g class=img-bottom-right-group clip-path=url(#bottomright)> <image data-id=img-bottom-right class="img-edge img-bottom-right" width=300 height=300 xlink:href=""></image> </g> </g> <polygon class=highlight-poly data-id=highlightpoly points="0,0 10,0 10,10 0,10"></polygon> <rect data-id=canvasoutline class=canvas-outline height=300 width=300 fill=none></rect> </g> <rect data-id=canvasedge class=canvas-edge height=300 width=300 fill=none></rect> <text class=size-text x=100 y=100 text-anchor=middle fill=lightgray>50x50</text> </g> </g> '},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(0),a=i(22),s=(o=a)&&o.__esModule?o:{default:o},l=i(21),c=i(1),d=i(3),u=i(20),p=i(2);var h=function(t){function e(t,i,o,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default,"svg"));return r.x=t,r.y=i,r.width=o,r.height=n,r.imageRotation=0,r.imageScale=1.01,r.imageX=0,r.imageY=0,r.imageDimensions={width:r.width,height:r.height},r.imageTranslateGroup=r.qs(".img-translate-group"),r.imageScaleGroup=(0,c.toEl)(r.qs(".img-scale-group")),r.imageRotateGroup=(0,c.toEl)(r.qs(".img-rotate-group")),r.imageMid=r.qs(".img-main"),r.imageTop=r.qs(".img-top"),r.imageTopLeft=r.qs(".img-top-left"),r.imageTopRight=r.qs(".img-top-right"),r.imageLeft=r.qs(".img-left"),r.imageRight=r.qs(".img-right"),r.imageBottom=r.qs(".img-bottom"),r.imageBottomLeft=r.qs(".img-bottom-left"),r.imageBottomRight=r.qs(".img-bottom-right"),r.sizeText=(0,c.toEl)(r.qs(".size-text")),r.mirrorWrap=(0,c.toEl)(r.qs(".mirror-wrap")),r.offset=[0,0],r.els=new l.MiniQ(r.element),r.texts=[],r._wrapStyle=c.WRAP_STYLE.MIRROR,r._wrapColor="6079c0",r.imageMid.addEventListener("mousedown",r.startDrag.bind(r)),window.addEventListener("mouseup",r.stopDrag.bind(r)),r.addHandler("click",function(t){(0,d.killE)(t),r.focus()}),r.addHandler("drop",function(t){var e=t.dataTransfer.getData("text/plain");if(e){var i=p.store.getImg(e);r.setImage({id:i.id,src:i.bigThumb.getAttribute("src"),dimensions:i.dimensions,drop:!0})}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),n(e,[{key:"init",value:function(){for(var t=this.element;!this.svg&&t;)"svg"===(t=t.parentNode).tagName?this.svg=t:t.classList.contains("total-group")&&(this.totalGroup=t);this.updateCoordinates(),this.updateRotationAndScale(),this.updateEdges()}},{key:"focus",value:function(){this.focused||(this.focused=!0,this.element.classList.add("pw-focus"),this.eventBubble("canvas:focus",this))}},{key:"blur",value:function(){this.focused=!1,this.element.classList.remove("pw-focus"),this.eventBubble("canvas:blur",this)}},{key:"addText",value:function(t){if(!(this.texts.length>=5)){var e=new u.CanvasText(this);return e.textFormatter=t,e.appendTo(this.element),e.update(),this.texts.push(e),e.element.addEventListener("remove",this.removeText.bind(this)),e}this.eventBubble("canvas:maxText")}},{key:"removeText",value:function(t){var e=t.target;this.texts=this.texts.filter(function(t){return t.element!==e}),e.parentNode.removeChild(e)}},{key:"clearImage",value:function(t){t&&t!==this.imageId||(this.hasImage=!1,this.sizeText.setStyle("visibility","visible"),this.imageRotation=0,this.imageScale=1.01,this.imageX=0,this.imageY=0,this.imageId=void 0,this.imageSrc=void 0,this.imageDimensions={width:this.width,height:this.height},this.screenImageWidth=this.imageDimensions.width,this.screenImageHeight=this.imageDimensions.height,this.configureImages(""))}},{key:"configureImages",value:function(t){var e=this;["img-main","img-top","img-top-left","img-top-right","img-left","img-right","img-bottom","img-bottom-left","img-bottom-right"].forEach(function(i){e.els[i].setAttr("width",e.screenImageWidth).setAttr("height",e.screenImageHeight).setAttr("xlink:href",t)})}},{key:"setImage",value:function(t){var e=this;return new Promise(function(i){e.hasImage=!0,e.sizeText.setStyle("visibility","hidden"),e.imageId=t.id,e.imageSrc=t.src,e.imageDimensions=t.dimensions;var o=new Image,n=e.wrapStyle===c.WRAP_STYLE.GALLERY,r=c.CFG.CANVAS_EDGE_SIZE,a=n?-r:0;o.addEventListener("load",function(s){var l=e.width/o.width,c=e.height/o.height,d=Math.max(l,c);e.screenImageWidth=o.width*d,e.screenImageHeight=o.height*d,n&&(e.imageScale=1.01*Math.max((e.width+2*r)/e.width,(e.height+2*r)/e.height)),e.configureImages(t.src),e.updateRotationAndScale(),e.setImagePos(a-.01,a-.01,"init"),e.updateEdges(),i(e)}),o.src=t.src,t.drop&&e.eventBubble("canvas:setimage",e)})}},{key:"updateCoordinates",value:function(){var t=c.CFG.CANVAS_EDGE_SIZE,e=this.wrapStyle===c.WRAP_STYLE.GALLERY?{x:-t,y:-t,w:this.width+2*t,h:this.height+2*t}:{x:0,y:0,w:this.width,h:this.height};this.sizeText.setAttr("x",this.width/2).setAttr("y",this.height/2).innerHTML(this.width/10+"×"+this.height/10+"cm"),this.element.setAttribute("transform","translate("+this.x+","+this.y+")"),this.els.midrect.setAttr("width",e.w).setAttr("height",e.h).setAttr("x",e.x).setAttr("y",e.y),this.els.toprect.setAttr("width",this.width).setAttr("height",t).setAttr("x",0).setAttr("y",-t),this.els.topleftrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",-t).setAttr("y",-t),this.els.toprightrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",this.width-.5).setAttr("y",.5-t),this.els.leftrect.setAttr("width",t).setAttr("height",this.height).setAttr("x",-t).setAttr("y",0),this.els.rightrect.setAttr("width",t).setAttr("height",this.height).setAttr("x",this.width).setAttr("y",0),this.els.bottomrect.setAttr("width",this.width).setAttr("height",t).setAttr("x",0).setAttr("y",this.height),this.els.bottomleftrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",-t).setAttr("y",this.height-.5),this.els.bottomrightrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",this.width-.5).setAttr("y",this.height-.5),this.els.canvasedge.setAttr("width",this.width).setAttr("height",this.height),this.els.canvasoutline.setAttr("width",this.width+2*t).setAttr("height",this.height+2*t).setAttr("x",-t).setAttr("y",-t),this.els.canvasbg.setAttr("x",-t).setAttr("y",-t).setAttr("width",this.width+2*t).setAttr("height",this.height+2*t),this.els.canvasbg.setAttr("fill",this.wrapStyle===c.WRAP_STYLE.COLOR?"#"+this.wrapColor:"white"),this.els.previewpoly.setAttr("points","0,0 "+this.width+",0 "+this.width+","+this.height+" 0,"+this.height+" "+-t/2.5+","+(this.height-4)+" "+-t/2.5+",4"),this.els.highlightpoly.setAttr("points","0,0 0,"+this.height+" "+-t/2.5+","+(this.height-4)+" "+-t/2.5+",4")}},{key:"updateRotationAndScale",value:function(){var t=this.imageMid.getBBox();return this.scaleOffset={x:-t.width*this.imageScale/2,y:-t.height*this.imageScale/2},this.imageScaleGroup.setAttr("transform","translate("+this.scaleOffset.x+","+this.scaleOffset.y+") scale("+this.imageScale+")"),this.imageRotateGroup.setAttr("transform","rotate("+this.imageRotation+" "+t.width/2+" "+t.height/2+")"),this}},{key:"transform",value:function(t,e,i,o){this.imageRotation=i,this.imageScale=o,this.updateRotationAndScale(),this.setImagePos(t,e,"init"),this.updateCoordinates(),this.updateEdges()}},{key:"updateEdges",value:function(){var t=this.totalGroup.getCTM().inverse(),e=this.imageRotateGroup.element.getCTM(),i=this.svg.createSVGMatrix().flipY().translate(-this.x,-this.y).multiply(t);return this.imageTop.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-.5,-this.y-.5).multiply(t),this.imageTopLeft.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-2*this.width-.5,-this.y-.5).multiply(t),this.imageTopRight.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().translate(-this.x,-this.y).multiply(t),this.imageLeft.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().translate(-this.x-2*this.width,-this.y).multiply(t),this.imageRight.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipY().translate(-this.x,-this.y-2*this.height).multiply(t),this.imageBottom.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-.5,-this.y-2*this.height-.5).multiply(t),this.imageBottomLeft.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-2*this.width,-this.y-2*this.height).multiply(t),this.imageBottomRight.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),this}},{key:"startDrag",value:function(t){(0,d.killE)(t),this.focus();var e=(0,d.cursorPoint)(this.svg,t),i=this.imageOffset;this.offset=[e.x-i[0],e.y-i[1]],this.imageMid.moveListener=this.drag.bind(this),document.addEventListener("mousemove",this.imageMid.moveListener),this.texts.forEach(function(t){return t.pointerEvents("none")})}},{key:"stopDrag",value:function(){this.validatePos("outside")&&(this.setImagePos(0,0,"init"),this.validatePos(),this.updateEdges()),document.removeEventListener("mousemove",this.imageMid.moveListener),this.texts.forEach(function(t){return t.pointerEvents()})}},{key:"drag",value:function(t){var e=(0,d.cursorPoint)(this.svg,t);e.x-=this.offset[0],e.y-=this.offset[1],this.setImagePos(e.x,e.y),this.validatePos("outside"),this.updateEdges(),this.eventBubble("canvas:moveimage",{c:this,x:e.x,y:e.y})}},{key:"setImagePos",value:function(t,e,i){this.imageX=t-(i?this.scaleOffset.x:0),this.imageY=e-(i?this.scaleOffset.y:0),this.imageTranslateGroup.setAttribute("transform","translate("+this.imageX+", "+this.imageY+")"),this.validatePos()}},{key:"validatePos",value:function(t){if(this.hasImage){var e=this.totalGroup.getCTM().inverse(),i=this.imageMid.getCTM(),o=[(0,d.point)(this.x,this.y),(0,d.point)(this.x+this.width,this.y),(0,d.point)(this.x+this.width,this.y+this.height),(0,d.point)(this.x,this.y+this.height)];if(this.wrapStyle===c.WRAP_STYLE.GALLERY){var n=c.CFG.CANVAS_EDGE_SIZE;o[0].x-=n,o[0].y-=n,o[1].x+=n,o[1].y-=n,o[2].x+=n,o[2].y+=n,o[3].x-=n,o[3].y+=n}for(var r=this.imageMid.getBBox(),a=r.width,s=r.height,l=this.svg,u=[w(0,0),w(a,0),w(a,s),w(0,s)],p=Array(u.length).fill(0),h=0;h<u.length;h++)for(var f=u[h],g=u[h+1]||u[0],v=0;v<o.length;v++){var m=o[v];if((0,d.rotation)(f,g,m)<0){if(this.element.classList.add("pw-invalid-canvas"),!t)return this.focused&&this.eventBubble("canvas:invalid"),!1;p[v]++}}return this.focused&&!t&&this.eventBubble("canvas:valid"),p.every(function(t){return!t})&&this.element.classList.remove("pw-invalid-canvas"),!t||p.filter(function(t){return!!t}).length>3}function w(t,o){var n=l.createSVGPoint();return n.x=t,n.y=o,n.matrixTransform(e.multiply(i))}}},{key:"wrapStyle",get:function(){return this._wrapStyle},set:function(t){this._wrapStyle=t,this.mirrorWrap.setStyle("visibility",t===c.WRAP_STYLE.MIRROR?"visible":"hidden"),this.updateCoordinates(),this.validatePos()}},{key:"wrapColor",get:function(){return this._wrapColor},set:function(t){this._wrapColor=t,this.updateCoordinates()}},{key:"dpi",get:function(){return this.imageDimensions.width/(this.width*c.UNITS.MM_TO_INCH)/this.imageScale}},{key:"imageOffset",get:function(){var t=this.imageTranslateGroup.getAttribute("transform").slice("transform(".length,-1).split(/[ ,]+/).map(function(t){return Number(t)});return[t[0],t[1]||0]}}]),e}();e.Canvas=h},function(t,e){t.exports='<svg class="composer wow-canvas-fc" viewBox="0 0 800 600" preserveAspectRatio=xMidYMid version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink> <g class=total-group></g> </svg> '},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Composer=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(0),a=i(24),s=(o=a)&&o.__esModule?o:{default:o},l=i(23),c=i(1),d=i(2);var u=c.CFG.COMPOSER_MARGIN,p=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default,"svg"));return o.canvases=[],o.totalGroup=o.qs(".total-group"),o.svg=(0,c.toEl)(o.element),o.splitImage=i,o.canvas=void 0,o.viewBox={x:0,y:0,width:0,height:0},o.tightViewBox=o.viewBox,function(t,e){var i={x:0,y:0,width:0,height:0},o=0,n=0;e.forEach(function(e){t.canvases.push(new l.Canvas(e[0],e[1],e[2],e[3]).appendTo(t.totalGroup)),o=Math.max(o,e[2]),n=Math.max(n,e[3]),i.x=Math.min(i.x,e[0]),i.y=Math.min(i.y,e[1]),i.width=Math.max(i.width,-i.x+e[0]+e[2]),i.height=Math.max(i.height,-i.y+e[1]+e[3])}),t.tightViewBox=i,t.viewBox=function(t){return(t=Object.assign({},t)).x-=u,t.y-=u,t.width+=2*u,t.height+=2*u,t}(i),t.largestCanvasDimensions={width:o,height:n}}(o,t),o.updateViewBox(),o.addHandler("canvas:focus",function(t){return o.selectCanvas(t.detail)}),o.addHandler("click",function(t){return o.selectCanvas()}),i?(o.addHandler("canvas:setimage",function(t){return o.setSplitImages(t)}),o.addHandler("canvas:moveimage",function(t){return o.moveSplitImages(t)}),d.store.minDimensions.width=o.tightViewBox.width,d.store.minDimensions.height=o.tightViewBox.height):(d.store.minDimensions.width=o.largestCanvasDimensions.width,d.store.minDimensions.height=o.largestCanvasDimensions.height),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),n(e,[{key:"selectCanvas",value:function(t){this.canvases.forEach(function(e){return e!==t&&e.blur()}),this.canvas=t}},{key:"scaleCanvas",value:function(t){(this.canvas||this.splitImage)&&(t=1.01+t/50,(this.splitImage?this.canvases:[this.canvas]).forEach(function(e){e.imageScale=t,e.updateRotationAndScale().updateEdges().validatePos()}))}},{key:"rotateCanvas",value:function(t){(this.canvas||this.splitImage)&&(this.splitImage?this.canvases:[this.canvas]).forEach(function(e){e.imageRotation+=t,e.updateRotationAndScale().updateEdges().validatePos()})}},{key:"setSplitImages",value:function(t){var e=this,i=t.detail;this.canvases.forEach(function(t){t.setImage({id:i.imageId,src:i.imageSrc,dimensions:i.imageDimensions}).then(function(o){var n=Math.max(e.tightViewBox.width/i.screenImageWidth,e.tightViewBox.height/i.screenImageHeight)+.01;o.transform(-t.x-1,-t.y-1,i.imageRotation,n)})})}},{key:"moveSplitImages",value:function(t){var e=t.detail.c,i=t.detail.x,o=t.detail.y;this.canvases.filter(function(t){return t!==e}).forEach(function(t){t.setImagePos(i+e.x-t.x,o+e.y-t.y),t.updateEdges()})}},{key:"updateViewBox",value:function(t){t=t||this.viewBox,this.svg.setAttr("viewBox",t.x+" "+t.y+" "+t.width+" "+t.height)}},{key:"clearImage",value:function(t){this.canvases.forEach(function(e){return e.clearImage(t)})}},{key:"initCanvases",value:function(){return this.canvases.forEach(function(t){return t.init()}),this}},{key:"setWrap",value:function(t){return this.canvases.forEach(function(e){return e.wrapStyle=t}),this}}]),e}();e.Composer=p},function(t,e){t.exports="<div class=pw-zoom> <div class=wp-zoom-label>scale</div> <div class=slide-container> <input id=zoom type=range min=1 max=100 value=50 class=slider name=slider> </div> </div> "},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(26),a=(o=r)&&o.__esModule?o:{default:o},s=i(0);i(1);var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.input=t.qs("input"),t.input.value=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),n(e,[{key:"setVal",value:function(t){t=50*(t-1.01),this.input.value=t}},{key:"setEnabled",value:function(t){this.input[t?"removeAttribute":"setAttribute"]("disabled",!0)}}]),e}();e.Slider=l},function(t,e){t.exports="<div class=pw-img-thumb-wrap> <div class=pw-img-thumb><div class=pw-delete></div></div> </div> "},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Thumb=void 0;var o,n=i(28),r=(o=n)&&o.__esModule?o:{default:o},a=i(0);i(3);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.default));return i.body=i.qs(".pw-img-thumb"),i.body.appendChild(t.smallThumb),i.id=t.id,i.name=t.name,i.addHandler("dragstart",function(t){t.dataTransfer.setData("text/plain",i.id)}),i.qs(".pw-delete").addEventListener("click",function(t){i.eventBubble("image:remove",i)}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),e}();e.Thumb=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uploadImg=function(t,e){return new Promise(function(i,o){var n=new FormData;n.append(e,t);var r=new XMLHttpRequest;r.addEventListener("load",function(t){return console.log(t)}),r.addEventListener("error",function(t){return console.log(t)}),r.addEventListener("progress",function(t){return console.log(t)}),r.open("POST","http://localhost:3011/upload",!0),r.send(n)})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=2;e.createThumb=function(t,e){return new Promise(function(i){function n(){t.removeEventListener("load",n);var o=document.createElement("canvas"),r=o.getContext("2d"),a=document.createElement("img");a.src=t.result,a.addEventListener("load",function(){var t=Math.min(1,e/Math.max(a.width,a.height)),n=t<.7?function(t,e){var i=document.createElement("canvas"),o=i.getContext("2d");return i.width=t.width,i.height=t.height,o.filter="blur("+Math.round(1/e/3)+"px)",o.drawImage(t,0,0),o.filter="none",i}(a,t):a;o.width=Math.floor(a.width*t),o.height=Math.floor(a.height*t),r.drawImage(n,0,0,o.width,o.height),i(o.toDataURL()),a=null})}t.readyState===o?n():t.addEventListener("load",n,!1)})},e.getDimensions=function(t){return new Promise(function(e){var i=URL.createObjectURL(t),o=new Image;o.onload=function(){e({width:o.width,height:o.height})},o.src=i})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleFile=void 0;var o=i(31),n=i(30),r=i(1),a=i(2);e.handleFile=function(t){var e=5*a.store.minDimensions.width,i=5*a.store.minDimensions.height;return console.log("name:",t.name,"type:",t.type,"size:",(t.size/1024/1024).toFixed(1)),new Promise(function(s,l){if(t){var c=new FileReader;c.addEventListener(r.EVENTS.LOAD_END,function(){if(d=new Uint8Array(c.result),u=[255,216,255],p=[137,80,78,71,13,10,26,10],d.slice(0,3).every(function(t,e){return t===u[e]})||d.every(function(t,e){return t===p[e]})){var d,u,p,h=(0,r.uid)();(c=new FileReader).readAsDataURL(t),Promise.all([(0,o.createThumb)(c,r.CFG.THUMB_SIZE_SMALL),(0,o.createThumb)(c,r.CFG.THUMB_SIZE_BIG),(0,o.getDimensions)(t)]).then(function(o){var c=o[2];if(c.width<e||c.height<i)l({error:"imageTooSmall",name:t.name,min:{width:e,height:i},dimensions:c});else{var d={id:h,name:t.name,smallThumbSrc:o[0],bigThumbSrc:o[1],smallThumb:(0,r.createEl)("img").setAttr("src",o[0]).setAttr("draggable",!0).el,bigThumb:(0,r.createEl)("img").setAttr("src",o[1]).setAttr("draggable",!0).el,dimensions:o[2]};a.store.images.push(d),(0,n.uploadImg)(t,h),s(d)}})}else l({error:"invalidFile",name:t.name})}),c.readAsArrayBuffer(t.slice(0,8))}else l({error:"noFile"})})}},function(t,e){t.exports='<div class=drop-zone> <div class=pw-file> <label class=pw-file-label for=pw-file-input> <input id=pw-file-input class=pw-file-input type=file multiple=multiple accept=.png,.jpg,.jpeg /> <button class="pw-btn pw-file-button">Upload Images</button> <div class=pw-drop-max-reached></div> <div class=pw-drop-help></div> </label> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileDropZone=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(33),a=(o=r)&&o.__esModule?o:{default:o},s=i(0),l=i(32),c=i(1),d=i(29);var u="drag-over",p=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return document.body.addEventListener(c.EVENTS.MOUSE_UP,function(){t.removeClass(u)}),t.addHandler(c.EVENTS.DRAG_OVER,function(){return t.addClass(u)}),t.addHandler(c.EVENTS.DRAG_LEAVE,function(){return t.removeClass(u)}),t.modal=void 0,t.helpText=t.qs(".pw-drop-help"),t.maxReachedText=t.qs(".pw-drop-max-reached"),t.fileInput=t.qs(".pw-file-input"),t.fileButton=t.qs(".pw-file-button"),t.fileButton.addEventListener("click",function(e){t.qs(".pw-file-input").click()}),t.fileInput.addEventListener("input",function(e){Array.from(t.fileInput.files).forEach(function(e){return(0,l.handleFile)(e).then(h.bind(t)).catch(function(e){return t.handleError(e)})}),t.fileInput.value=""}),t.maxReachedText.innerHTML="You reached the maximum of "+c.CFG.MAX_IMAGES+" images. Please remove some before uploading new ones",t.update(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),n(e,[{key:"update",value:function(){var t=this.qsAll(".pw-img-thumb-wrap").length;this.count=t,this.helpText.classList[t?"add":"remove"]("has-files"),this.helpText.innerHTML=c.CFG.HTML_INFO_ICON+"<br>"+(t?"<label>Drag an image onto a canvas</label>":"<label>or Drag & Drop<br>image files here</label>"),t>=c.CFG.MAX_IMAGES?(this.fileButton.setAttribute("disabled","disabled"),this.maxReachedText.style.display="block"):(this.fileButton.removeAttribute("disabled"),this.maxReachedText.style.display="none")}},{key:"drop",value:function(t){var e=this;if(this.eventBubble("image:add"),this.removeClass("drag-over"),t.preventDefault(),!this.modal||!this.modal.isOpen)if(t.dataTransfer.items){for(var i=0;i<t.dataTransfer.items.length;i++)if("file"===t.dataTransfer.items[i].kind&&!t.dataTransfer.getData("text/plain")){var o=t.dataTransfer.items[i].getAsFile();(0,l.handleFile)(o).then(h.bind(this)).catch(function(t){return e.handleError(t)})}t.dataTransfer.items.clear()}else for(var n=0;n<t.dataTransfer.files.length;n++)(0,l.handleFile)(t.dataTransfer.files[n]).then(h.bind(this)).catch(function(t){return e.handleError(t)})}},{key:"handleError",value:function(t){this.eventBubble("fileError",t)}}]),e}();function h(t){if(this.count++,this.count>c.CFG.MAX_IMAGES)this.handleError({error:"maxReached"});else{var e=new d.Thumb(t);this.append(e),this.update()}}e.FileDropZone=p},function(t,e){t.exports='<div> <link id=google-fonts href="https://fonts.googleapis.com/css?family=Fjalla+One|Fredericka+the+Great|Kaushan+Script|Meddon|MedievalSharp|Metal+Mania|Pacifico|Passion+One|Patua+One|Rubik+Mono+One" rel=stylesheet> <style>.wow-canvas .slide-container{flex:1 1 auto}.wp-zoom-label{margin:0 10px;flex:0 1 auto;color:gray}.pw-zoom{margin-top:7px;display:flex;flex-direction:row}.wow-canvas .slider{-webkit-appearance:none;appearance:none;width:100%;height:15px;background:#d3d3d3;outline:0;opacity:.7;-webkit-transition:.2s;transition:opacity .2s}.wow-canvas .slider:hover{opacity:1}.wow-canvas .slider:disabled{opacity:.3}.wow-canvas .slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#6495ed;border:1px solid #557fca;cursor:pointer}.wow-canvas .slider::-moz-range-thumb{width:25px;height:25px;background:#6495ed;border:1px solid #557fca;cursor:pointer}.wow-canvas *{box-sizing:border-box}.wow-canvas-fc{display:flex;flex-direction:column}.wow-canvas{height:95vh;position:relative;border:1px solid #d3d3d3;font-family:Roboto,sans-serif;font-size:14px;font-weight:500}.wow-canvas-top{flex:1 1 auto}.wow-canvas-top-wrapper{flex:1;display:flex}.wow-canvas-main{border-right:1px solid #eee;flex:1 1 auto}.wow-canvas-toolbar{flex:0 1 20%}.wow-canvas-header{flex:0 0 70px}.wow-canvas-body{flex:1 1 auto;position:relative}.wow-canvas-body-wrap{background:red;position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0}.wow-canvas-header{border-bottom:1px solid #eee}.wow-canvas-footer{border-top:1px solid #eee;flex:0 0 50px;display:flex;flex-direction:row}.pw-footer{flex:0 1 auto;margin:10px}.pw-footer-mid{flex:0 1 30%}.wow-canvas .drop-zone{flex:1 1 auto;overflow:auto}.wow-canvas .drag-over{border-color:#fff}.wow-canvas .drop-zone-empty::after{display:block;width:100%;margin:50% 0;text-align:center;content:\'Drop Images Here\'}.wow-canvas .composer{z-index:1;position:absolute;flex:1 1 auto;width:100%;height:100%}svg .text-wrap{overflow:hidden;text-align:center;tab-index:-1}.pw-svg-icon{font-family:Roboto,sans-serif;font-weight:600;font-size:15px}svg .text-input,text{font-family:Arial,sans-serif;font-size:32px;line-height:38px}svg .text-input{box-sizing:border-box;outline:0;border:1px solid #20b2aa;background:rgba(0,0,0,.1);display:inline-block;min-width:10px}svg .pw-fo{visibility:hidden;pointer-events:none}svg .pw-fo.pw-fo-active{visibility:visible;pointer-events:auto}svg .text-hidden{visibility:hidden}svg text{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}svg text::selection{background:0 0}.pw-canvas .delete-icon,.pw-canvas .edit-icon,.pw-canvas .rotate-icon{visibility:hidden}.pw-canvas .text-rect{pointer-events:none}.pw-canvas .canvas-text-focus .delete-icon,.pw-canvas .canvas-text-focus .rotate-icon,.pw-canvas.pw-focus .edit-icon{visibility:visible;cursor:pointer}.canvas-text.canvas-text-focus .test-rect{stroke-width:2px;stroke:#1e90ff!important}.img-main{cursor:move}.pw-canvas.pw-focus .test-rect{stroke:#0ff;cursor:pointer}.pw-canvas.pw-focus .text-rect{pointer-events:auto}.canvas-edge{stroke:rgba(125,125,125,.5)}.pw-canvas{box-shadow:#4caf50}.pw-focus .canvas-edge{stroke:#ff0}.canvas-effect{filter:url(#f3)}.pw-focus .canvas-effect{filter:none}.highlight-poly{fill:url(#edgehighlight)}.pw-focus .highlight-poly{visibility:hidden}.pw-img-thumb-wrap{margin:10px;width:80%;margin-left:10%;text-align:center;position:relative}.pw-img-thumb{border:1px solid #d3d3d3}.pw-img-thumb img{position:relative;display:block;width:100%}.pw-file-input{width:0;height:0;overflow:hidden;display:none}.drop-zone .pw-file-label{width:0;height:0}.pw-file{padding:15px 15px 0 15px}.pw-drop-help{color:gray;text-align:center;margin-top:50%;padding:5px}.pw-drop-icon{display:inline-block}.pw-icon-info{background-size:contain;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYwIiB3aWR0aD0iMTYwIiB2ZXJzaW9uPSIxLjAiPiAgICA8ZyBmaWxsPSIjNGI0YjRiIj4gICAgICAgIDxwYXRoIGQ9Im04MCAxNWMtMzUuODggMC02NSAyOS4xMi02NSA2NXMyOS4xMiA2NSA2NSA2NSA2NS0yOS4xMiA2NS02NS0yOS4xMi02NS02NS02NXptMCAxMGMzMC4zNiAwIDU1IDI0LjY0IDU1IDU1cy0yNC42NCA1NS01NSA1NS01NS0yNC42NC01NS01NSAyNC42NC01NSA1NS01NXoiLz4gICAgICAgIDxwYXRoIGQ9Im01Ny4zNzMgMTguMjMxYTkuMzgzNCA5LjExNTMgMCAxIDEgLTE4Ljc2NyAwIDkuMzgzNCA5LjExNTMgMCAxIDEgMTguNzY3IDB6IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjE5ODkgMCAwIDEuMjM0MiAyMS4yMTQgMjguNzUpIi8+ICAgICAgICA8cGF0aCBkPSJtOTAuNjY1IDExMC45NmMtMC4wNjkgMi43MyAxLjIxMSAzLjUgNC4zMjcgMy44Mmw1LjAwOCAwLjF2NS4xMmgtMzkuMDczdi01LjEybDUuNTAzLTAuMWMzLjI5MS0wLjEgNC4wODItMS4zOCA0LjMyNy0zLjgydi0zMC44MTNjMC4wMzUtNC44NzktNi4yOTYtNC4xMTMtMTAuNzU3LTMuOTY4di01LjA3NGwzMC42NjUtMS4xMDUiLz4gICAgPC9nPjwvc3ZnPg==)}.pw-icon-info-svg{fill:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYwIiB3aWR0aD0iMTYwIiB2ZXJzaW9uPSIxLjAiPiAgICA8ZyBmaWxsPSIjNGI0YjRiIj4gICAgICAgIDxwYXRoIGQ9Im04MCAxNWMtMzUuODggMC02NSAyOS4xMi02NSA2NXMyOS4xMiA2NSA2NSA2NSA2NS0yOS4xMiA2NS02NS0yOS4xMi02NS02NS02NXptMCAxMGMzMC4zNiAwIDU1IDI0LjY0IDU1IDU1cy0yNC42NCA1NS01NSA1NS01NS0yNC42NC01NS01NSAyNC42NC01NSA1NS01NXoiLz4gICAgICAgIDxwYXRoIGQ9Im01Ny4zNzMgMTguMjMxYTkuMzgzNCA5LjExNTMgMCAxIDEgLTE4Ljc2NyAwIDkuMzgzNCA5LjExNTMgMCAxIDEgMTguNzY3IDB6IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjE5ODkgMCAwIDEuMjM0MiAyMS4yMTQgMjguNzUpIi8+ICAgICAgICA8cGF0aCBkPSJtOTAuNjY1IDExMC45NmMtMC4wNjkgMi43MyAxLjIxMSAzLjUgNC4zMjcgMy44Mmw1LjAwOCAwLjF2NS4xMmgtMzkuMDczdi01LjEybDUuNTAzLTAuMWMzLjI5MS0wLjEgNC4wODItMS4zOCA0LjMyNy0zLjgydi0zMC44MTNjMC4wMzUtNC44NzktNi4yOTYtNC4xMTMtMTAuNzU3LTMuOTY4di01LjA3NGwzMC42NjUtMS4xMDUiLz4gICAgPC9nPjwvc3ZnPg==)}.pw-icon{width:32px;height:32px}.pw-drop-help.has-files{margin-top:10px}.pw-file-button{padding:15px!important;width:100%;box-sizing:border-box;display:block}.pw-delete{position:absolute;z-index:1;background:#6495ed;border:1px solid #547ac4;border-radius:3px;width:20px;height:20px;line-height:18px;top:5px;cursor:pointer;font-size:20px;color:#eee;text-align:center;font-weight:900;right:5px}.pw-delete:hover{background:#6ca0ff;border:1px solid #5c86d7;color:#fff}.pw-delete:active{background:#5887d5;border:1px solid #4568a5;color:#fff}.pw-delete::after{content:\'×\'}.canvas-outline{stroke:#d3d3d3}.pw-canvas.pw-focus .canvas-outline{stroke:#20b2aa;stroke-width:3px}.pw-canvas .canvas-text,.pw-canvas .canvas-wrap{clip-path:url(#preview)}.pw-canvas.pw-focus .canvas-text,.pw-canvas.pw-focus .canvas-wrap{clip-path:url(#text-crop)}.pw-canvas.pw-invalid-canvas .canvas-edge{stroke:red;stroke-width:3px}.pw-btn{border-radius:3px;padding:8px 10px;cursor:pointer;background:#6495ed;border:1px solid #547ac4;font-family:Roboto,sans-serif;font-weight:600;color:#fff}.pw-btn{background:#6495ed;border:1px solid #547ac4;color:#fff}.pw-btn:hover{background:#6ca0ff;border:1px solid #5c86d7}.pw-btn:active{background:#5887d5;border:1px solid #4568a5}.pw-btn:disabled{background:#ececec;border:1px solid #d3d3d3;color:gray}.pw-btn.pw-btn-danger{background:#db5951;border:1px solid #b13b36}.pw-btn.pw-btn-danger:hover{background:#f06259;border:1px solid #d34640}.pw-btn.pw-btn-danger:active{background:#c24f48;border:1px solid #9b342f}.pw-btn-wide{width:100%}.pw-drop-max-reached{margin-top:10px;font-size:12px;color:grey}.pw-modal-wrap{position:absolute;top:0;left:0;right:0;bottom:0;z-index:10;display:none}.pw-modal-wrap.pw-modal-wrap-open{display:initial}.pw-modal-window-wrap{background:rgba(255,255,255,.5);top:0;left:0;right:0;bottom:0;position:relative;display:flex;align-items:center;justify-content:center;height:100%}.pw-modal-window{max-width:50%;position:relative;background:#fff;border:1px solid #d3d3d3;box-shadow:2px 2px 20px 0 rgba(0,0,0,.25)}.pw-modal-content{min-width:300px;min-height:100px;padding:50px 50px;font-size:16px;font-weight:300;color:gray}.pw-modal-content strong{color:#dc143c}.pw-modal-btn-container{border-top:1px solid #d3d3d3;padding:10px}.aligner-item--top{align-self:flex-start}.aligner-item--bottom{align-self:flex-end}.pw-float-right{float:right}.pw-text-formatter{flex:1 1 auto;overflow-x:hidden;overflow-y:auto;padding:15px}@keyframes slide{from{margin-left:-20px;opacity:0}to{margin-left:0;opacity:1}}@keyframes slide-back{from{margin-left:0;opacity:1}to{margin-left:-20px;opacity:0}}.pw-help-hide{animation-name:slide-back;animation-duration:.3s;animation-fill-mode:forwards}.pw-help-show{animation-name:slide;animation-duration:.3s}.pw-hide{display:none!important}.pw-space{margin-bottom:10px}.pw-help{flex:0 1 auto;padding:5px;border-top:1px solid #eee}.pw-help::before{content:\'i\';padding:0 6.5px;margin-right:5px;border-radius:50%;border:1px solid #000}.hex-input{margin-left:5px;width:110px;border:1px solid #d3d3d3;padding:5px;outline:0;font-size:18px}.cp-invalid{border:1px solid red}.nomouse{pointer-events:none}.cp-col{width:49%}.clearfix::after{content:"";clear:both;display:table}.color-display{border:1px solid #d3d3d3;width:107px;height:30px;background:red;float:right}.pw-select{padding:5px;border:1px solid #d3d3d3;font-weight:700}</style> <div class="wow-canvas wow-canvas-fc"> <div class="wow-canvas-top wow-canvas-fc"> <div class=wow-canvas-top-wrapper> <div class="wow-canvas-main wow-canvas-fc"> <div class=wow-canvas-header></div> <div class="wow-canvas-body wow-canvas-fc"></div> </div> <div class="wow-canvas-toolbar wow-canvas-fc"> <div class="wow-canvas-body wow-canvas-fc"></div> </div> </div> </div> <div class=pw-help></div> <div class=wow-canvas-footer> <div class="pw-footer pw-footer-left"></div> <div class="pw-footer pw-footer-mid"></div> <div class="pw-footer pw-footer-right"></div> </div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=void 0;var o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=i(35),a=(o=r)&&o.__esModule?o:{default:o},s=i(0),l=i(34),c=i(27),d=i(25),u=i(15),p=i(13),h=i(2),f=i(1),g=i(11),v=i(7),m=i(6);var w=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default)),i=t.qs("#google-fonts").getAttribute("href");return h.store.fontFaces=i.slice(i.indexOf("family=")+7).split("|").map(function(t){return t.split("+").join(" ")}),t.toolbarBody=t.qs(".wow-canvas .wow-canvas-toolbar .wow-canvas-body"),t.footer=t.qs(".wow-canvas-footer"),t.footerLeft=t.qs(".pw-footer-left"),t.footerMid=t.qs(".pw-footer-mid"),t.footerRight=t.qs(".pw-footer-right"),t.help=(0,f.toEl)(t.qs(".pw-help")),t.fileDropper=(new l.FileDropZone).appendTo(t.toolbarBody).addHandler("image:remove",function(e){h.store.modal.open({danger:!0,btnText:"Remove",html:"Really remove <strong>"+e.detail.name+"</strong> from the editor?"}).then(function(){e.detail.remove(),t.composer.clearImage(e.detail.id),t.fileDropper.update(),t.updateControls()})}).addHandler("image:add",function(e){t.focusedCanvas&&t.focusedCanvas.blur()}),t.addHandler("drop",function(e){return t.fileDropper.drop(e)}),t.addHandler("dragover",function(t){return t.preventDefault()}),t.wrap=t.qs(".wow-canvas"),t.mainBody=t.qs(".wow-canvas .wow-canvas-main .wow-canvas-body"),t.mainHeader=t.qs(".wow-canvas .wow-canvas-main .wow-canvas-header"),t.slider=(new c.Slider).appendTo(t.footerMid).addHandler("input",function(e){return t.composer.scaleCanvas(e.target.value)}),t.rotater=(new u.Rotater).appendTo(t.footerLeft).addHandler("input",function(e){return t.composer.rotateCanvas(e.target.value)}),t.composer=new d.Composer([[0,0,350,300],[410,100,350,300]],!1).appendTo(t.mainBody).addHandler("canvas:focus",function(e){t.slider.setVal(e.detail.imageScale),t.focusedCanvas=e.detail,t.textFormatter.canvas=t.focusedCanvas,t.update()}).addHandler("canvas:blur",function(e){setTimeout(function(){e.detail===t.focusedCanvas&&(t.focusedCanvas=void 0,t.update())},10)}).addHandler("canvas:invalid",function(e){t.help.blip("The Image doesn't cover the canvas!")}).addHandler("canvas:valid",function(e){t.help.blip()}),t.modal=(new p.Modal).appendTo(t.wrap),t.fileDropper.modal=t.modal,t.textFormatter=(new g.TextFormatter).appendTo(t.toolbarBody).addHandler("textFormatter:exit",function(e){t.focusedCanvas&&t.focusedCanvas.blur()}).addHandler("textFormatter:addText",function(e){t.focusedCanvas&&t.focusedCanvas.addText(t.textFormatter)}),t.addHandler("canvasText:focus",function(e){return t.textFormatter.setEnabled(!0).setFormat(e.detail)}),t.addHandler("canvasText:blur",function(e){return t.textFormatter.setEnabled(!1)}),t.addHandler("fileError",function(t){return v.ErrorDisplay.display(t)}),t.wrapChooser=(new m.WrapChooser).appendTo(t.mainHeader).addHandler("wrap:change",function(e){t.composer.setWrap(e.detail)}),t.update(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),n(e,[{key:"init",value:function(){this.composer.initCanvases()}},{key:"updateControls",value:function(){var t=!!this.focusedCanvas&&this.focusedCanvas.hasImage;return this.rotater.setEnabled(t),this.slider.setEnabled(t),this.help.blip(t?"":"Select a canvas with an image to rotate or scale"),this}},{key:"updateToolbar",value:function(){var t=this,e=this.focusedCanvas?"textFormatter":"fileDropper";return["textFormatter","fileDropper"].forEach(function(i){t[i][i===e?"show":"hide"]()}),this}},{key:"update",value:function(){this.updateControls().updateToolbar()}}]),e}();e.Editor=w},function(t,e,i){"use strict";(new(i(36).Editor)).appendTo(document.body).init()}]);