!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=42)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o={DIV:"DIV",IMG:"IMG"},r={INPUT:"input",DRAG_OVER:"dragover",DRAG_LEAVE:"dragleave",MOUSE_UP:"mouseup",LOAD_END:"loadend"},a={MAX_IMAGES:10,THUMB_SIZE_SMALL:200,THUMB_SIZE_BIG:600,CANVAS_EDGE_SIZE:35,CANVAS_FOLD_MARK_SIZE:5,FAST_CLICK_WAIT:270,COMPOSER_MARGIN:50,CANVAS_DISTANCE:60,HTML_INFO_ICON:'<div class="pw-drop-icon pw-icon pw-icon-info"></div>'},s={MM_TO_INCH:.0393700787},l={MIRROR:"mirror",GALLERY:"gallery",COLOR:"color"};Object.freeze(o),Object.freeze(r),Object.freeze(a),Object.freeze(s),Object.freeze(l);var c=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?"svg"===e.toLowerCase()?this.element=document.createElementNS("http://www.w3.org/2000/svg","svg"):this.element=document.createElement(e):this.element=e,this}return n(t,[{key:"innerHTML",value:function(t){return this.element.innerHTML=t,this}},{key:"setAttr",value:function(t,e){return null===e?this.element.removeAttribute(t):this.element.setAttribute(t,e),this}},{key:"attr",value:function(t){return this.element.getAttribute(t)}},{key:"setStyle",value:function(t,e){return this.element.style[t]=e,this}},{key:"setVal",value:function(t){return this.element.value=t,this}},{key:"val",value:function(){return this.element.value}},{key:"hide",value:function(){return this.addClass("pw-hide"),this}},{key:"show",value:function(){return this.removeClass("pw-hide"),this}},{key:"addClass",value:function(t){return this.element.classList.add(t),this}},{key:"removeClass",value:function(t){return this.element.classList.remove(t),this}},{key:"hasClass",value:function(t){return this.element.classList.contains(t)}},{key:"contains",value:function(t){return this.element.contains(t)}},{key:"remove",value:function(){return this.element.remove(),this}},{key:"append",value:function(e){return this.element.appendChild(e instanceof t?e.element:e),this}},{key:"appendTo",value:function(e){return e instanceof t&&(e=e.element),e.appendChild(this.element),this}},{key:"on",value:function(t,e){return this.element.addEventListener(t,e),this}},{key:"addHandler",value:function(t,e){return this.element.addEventListener(t,e.bind(this)),this}},{key:"stdEventBubble",value:function(t){this.element.dispatchEvent(new Event(t))}},{key:"eventBubble",value:function(t,e){return this.element.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e})),this}},{key:"qs",value:function(t){return this.element.querySelector(t)}},{key:"qsAll",value:function(t){return this.element.querySelectorAll(t)}},{key:"blip",value:function(t){if(t=t||"",this.element.innerHTML===t)return this;t=t||"&nbsp;";var e=this.element.cloneNode();return"&nbsp;"!==t?(e.innerHTML=t,e.classList.remove("pw-help-hide"),e.classList.add("pw-help-show")):(e.classList.remove("pw-help-show"),e.classList.add("pw-help-hide")),this.element.parentNode.replaceChild(e,this.element),this.element=e,this}},{key:"child",get:function(){return this.element.firstChild}},{key:"el",get:function(){return this.element}}]),t}();function d(t){return new c(t)}e.El=c,e.createEl=d,e.toEl=function(t){return d(t)},e.uid=function(){return window.btoa(Math.floor(1e5*Math.random())+String(new Date).valueOf().slice(-5)).slice(0,-2)},e.noop=function(){},e.now=function(){return(new Date).valueOf()},e.between=function(t,e,i){return Math.max(Math.min(t,i),e)},e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.TAGS=o,e.EVENTS=r,e.UNITS=s,e.CFG=a,e.SWATCHES=["1F77B4","AEC7E8","FF7F0E","FFBB78","2CA02C","98DF8A","D62728","FF9896","9467BD","C5B0D5","8C564B","C49C94","E377C2","F7B6D2","7F7F7F","C7C7C7","BCBD22","DBDB8D","17BECF","9EDAE5"],e.WRAP_STYLE=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var n=i(0);function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var r=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div"));if(i){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.innerHTML=t,r.element=a.firstChild}else r.element=(0,n.createEl)(n.TAGS.DIV).innerHTML(t).child;return o(r,r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.El),e}();e.Component=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[],o={minDimensions:{width:800,height:600},serverURL:"https://server.photowow.com.au",images:n,getImg:function(t){return n.find(function(e){return e.id===t})},removeImg:function(t){n.splice(n.findIndex(function(e){return e.id===t}),1)}};e.store=o},function(t,e,i){"use strict";function n(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}Object.defineProperty(e,"__esModule",{value:!0}),e.killE=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},e.cursorPoint=function(t,e){var i=t.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i.matrixTransform(t.getScreenCTM().inverse())},e.matrixToAttr=function(t){return"matrix("+t.a+" "+t.b+" "+t.c+" "+t.d+" "+t.e+" "+t.f+")"},e.wrapWithRect=function(t,e){var i=t.getBBox();e.setAttribute("x",i.x),e.setAttribute("y",i.y),e.setAttribute("width",i.width),e.setAttribute("height",i.height)},e.getTranslate=function(t){var e=(t.getAttribute("transform")||"translate(0,0)").slice(10,-1).split(/[, ]+/).map(function(t){return parseInt(t)});return{x:e[0]||0,y:e[1]||0}},e.px=function(){return{on:function(t){return parseInt(t)+"px"},off:function(t){return parseInt(t.replace("px",""))}}},e.pointAngle=n,e.rotation=function(t,e,i){var o=n(t,e),r=n(t,i)-o;return r<-180?r+=360:r>180&&(r-=360),r},e.pointDistSq=function(t,e){var i=e.y-t.y,n=e.x-t.x;return i*i+n*n},e.point=function(t,e){return{x:t,y:e}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorInput=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=i(23),s=(n=a)&&n.__esModule?n:{default:n},l=i(0),c=i(22),d=i(3);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default));return i.isOpen=!1,i.btn=(0,l.toEl)(i.qs(".pw-color-button-body")),i.modal=(0,l.toEl)(i.qs(".pw-color-input-body")).hide(),i.color=t||"000000",i.swatches=(0,l.toEl)(i.qs(".pw-color-swatches")),i.swatchButtons=[],l.SWATCHES.forEach(function(t){var e=(0,l.createEl)(l.TAGS.DIV).setAttr("data-color",t).addClass("pw-color-swatch").setStyle("background","#"+t).appendTo(i.swatches).addHandler("click",function(t){return i.setColor(t.target.getAttribute("data-color"))});i.swatchButtons.push(e)}),i.closeBtn=(0,l.toEl)(i.qs(".pw-set-color")).addHandler("click",function(){return i.modal.hide()&&(i.isOpen=!1)}),i.moreBtn=(0,l.toEl)(i.qs(".pw-more-color")).addHandler("click",function(t){i.setState("simple"===i.state?"advanced":"simple")}),i.colorWheel=(0,l.toEl)(i.qs(".pw-color-wheel")),i.setState("simple"),i.btn.addHandler("click",function(t){i.isOpen?(i.isOpen=!1,i.modal.hide(),i.modal.remove()):(i.isOpen=!0,i.modal.show(),i.setPos())}),(0,l.toEl)(document).addHandler("click",function(t){i.modal.contains(t.target)||i.contains(t.target)||i.modal.hide()&&i.modal.remove()&&(i.isOpen=!1)}).addHandler("scroll",function(t){i.isOpen=!1,i.modal.hide()}),i.setColor(i.color),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),o(e,[{key:"setPos",value:function(){var t=this;document.body.appendChild(this.modal.element),this.colorPicker&&this.colorPicker.remove(),this.colorPicker=(new c.ColorPicker).appendTo(this.colorWheel).addHandler("colorPicker:input",function(e){(0,d.killE)(e),t.setColor(e.detail)}),this.setColor();var e=this.btn.element.getBoundingClientRect(),i=e.y+e.height,n=e.x+window.pageXOffset;n>window.innerHeight-300&&(n=n-300+e.width),this.modal.setStyle("left",n+"px").setStyle("top",i+"px")}},{key:"setColor",value:function(t,e){t&&!e&&this.eventBubble("colorInput:set",t),t=t||this.color,this.color=t,this.colorPicker&&this.colorPicker.setColor(t),this.btn.setStyle("background","#"+t),this.swatchButtons.forEach(function(e){e[e.attr("data-color")===t?"addClass":"removeClass"]("pw-color-swatch-selected")})}},{key:"setState",value:function(t){switch(this.state=t,t){case"simple":this.swatches.show(),this.colorWheel.hide(),this.moreBtn.innerHTML("More colors");break;case"advanced":this.swatches.hide(),this.colorWheel.show(),this.moreBtn.innerHTML("Less colors")}}}],[{key:"isColorInput",value:function(t){for(;t;){if(t.classList&&t.classList.contains("pw-color-input-body"))return!0;t=t.parentNode}return!1}}]),e}();e.ColorInput=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(31),a=(n=r)&&n.__esModule?n:{default:n},s=i(1);i(0);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return i.label=i.qs(".wp-zoom-label"),t?i.label.innerHTML=t:i.label.remove(),i.input=i.qs("input"),i.input.value=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"setVal",value:function(t){t=50*(t-1.01),this.input.value=t}},{key:"setEnabled",value:function(t){this.input[t?"removeAttribute":"setAttribute"]("disabled",!0)}}]),e}();e.Slider=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.post=function(t,e){return new Promise(function(i,n){var o=new XMLHttpRequest;o.open("POST",t,!0),o.setRequestHeader("Content-type","application/json"),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?i(o.response):n(o.response))},o.send(JSON.stringify(e))})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exportComposition=void 0;var n=i(0);function o(t){var e='xlink:href="',i=0;for(i=t.indexOf(e,i);-1!==i;){var n=i+e.length,o=t.indexOf('"',n);o>n&&(t=t.slice(0,n)+t.slice(o)),i++,i=t.indexOf(e,i)}return t}e.exportComposition=function(t,e){t.canvases.forEach(function(t){return t.blur()});var i=t.canvases.map(function(t){return{canvas:function(t){var e=n.CFG.CANVAS_EDGE_SIZE,i=n.CFG.CANVAS_FOLD_MARK_SIZE,r=t.width,a=t.height,s=r+2*e+2*i,l=a+2*e+2*i,c=(0,n.createEl)("svg").setAttr("width",s).setAttr("height",l).setAttr("version","1.1").setAttr("xmlns","http://www.w3.org/2000/svg").setAttr("xmlns:xlink","http://www.w3.org/1999/xlink").innerHTML(o(t.element.outerHTML)),d=(0,n.toEl)(c.child).setAttr("transform","translate("+(e+i)+","+(e+i)+")");d.qs(".canvas-edge").remove(),d.qs(".canvas-outline").remove(),d.qs(".highlight-poly").remove(),d.qs("filter").remove(),d.qs("linearGradient").remove(),Array.from(d.qsAll(".vertical-center-group :not(text)")).filter(function(t){return"tspan"!==t.tagName.toLowerCase()}).forEach(function(t){return t.remove()}),Array.from(d.qsAll("image")).forEach(function(t){return(0,n.toEl)(t).setAttr("xlink:href","")});var u=(0,n.toEl)(d.qs(".canvas-marks")),p=[[-i-e,0,-e,0],[0,-i-e,0,-e],[r,-i-e,r,-e],[r+e,0,r+e+i,0],[-i-e,a,-e,a],[r+e,a,r+e+i,a],[0,a+e,0,a+e+i],[r,a+e,r,a+e+i]].map(function(t){return'<line x1="'+t[0]+'" y1="'+t[1]+'" x2="'+t[2]+'" y2="'+t[3]+'" stroke="black"></line>'}).join("");return u.innerHTML(p),{canvas:t,svg:c,x:t.x,y:t.y,ow:s,oh:l,fileName:t.fileName}}(t),file:t.fileName,id:t.id,dimensions:{width:t.width+"mm",height:t.height+"mm"}}}),r=function(t,e){var i=n.CFG.CANVAS_EDGE_SIZE,r=(0,n.createEl)("svg").setAttr("width",t.viewBox.width-i).setAttr("height",t.viewBox.height-i).setAttr("version","1.1").setAttr("xmlns","http://www.w3.org/2000/svg").setAttr("xmlns:xlink","http://www.w3.org/1999/xlink").innerHTML("#ANCHOR#").element.outerHTML,a=e.map(function(t){var e=(0,n.toEl)(t.canvas.svg.child.cloneNode()).innerHTML(o(t.canvas.svg.child.innerHTML));e.setAttr("transform","translate("+(t.canvas.x+i)+","+(t.canvas.y+i)+")"),e.qs(".mirror-wrap").remove(),e.qs(".canvas-marks").remove(),e.qs(".canvas-bg").remove();var r=e.qs("defs #mid");r.remove();var a=e.qs("defs");a.innerHTML="";var s=(0,n.toEl)(r.querySelector("rect"));return s.setAttr("x",0).setAttr("y",0).setAttr("width",t.canvas.canvas.width).setAttr("height",t.canvas.canvas.height),a.appendChild(r),e=(e=e.element.outerHTML).replace(/\s+/g," ").split('xlink:href=""').join('xlink:href="'+t.file+'"')}).join("");return r=r.replace("#ANCHOR#",a)}(t,i);return i=i.map(function(t){return{svg:t.canvas.svg.element.outerHTML.replace(/\s+/g," ").split("> <").join("><").split('xlink:href=""').join('xlink:href="'+t.file+'"'),id:t.id,file:t.file,dimensions:t.dimensions,outerWidth:t.canvas.ow,outerHeight:t.canvas.oh}}),{id:t.id,finish:e,canvases:i,composition:r}}},function(t,e){t.exports='<div> <style>.pw-finish-chooser label{color:gray;white-space:nowrap;margin:10px 10px 10px 20px}.pw-finish-btn{white-space:nowrap;padding:10px;background:#e6e6e6;border:1px solid #d8d8d8;color:#545454}.pw-finish-btn:not(.pw-finish-btn-selected):hover{background:#f4f4f4;border-color:#d3d3d3}.pw-finish-btn:not(.pw-finish-btn-selected):active{background:#e2e2e2;border-color:#c9c9c9}.pw-finish-btn.pw-finish-btn-left{border-radius:3px 0 0 3px;border-right:none}.pw-finish-btn.pw-finish-btn-right{border-radius:0 3px 3px 0}.pw-finish-btn-selected{color:#fff;background:#252839;border:1px solid #191b27}</style> <div class="pw-wrap-flex pw-finish-chooser"> <label class=pw-col> Canvas Finish: </label> <div id=pw-finish-matte data-value=matte class="pw-btn pw-finish-btn-selected pw-finish-btn pw-finish-btn-left"> Matte finish </div> <div id=pw-finish-glossy data-value=glossy class="pw-btn pw-finish-btn pw-finish-btn-right"> Glossy finish </div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FinishChooser=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(8),a=(n=r)&&n.__esModule?n:{default:n},s=i(1),l=i(0);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.matteBtn=(0,l.toEl)(t.qs("#pw-finish-matte")),t.glossyBtn=(0,l.toEl)(t.qs("#pw-finish-glossy")),t.value="matte",[t.matteBtn,t.glossyBtn].forEach(function(e){return e.addHandler("click",function(e){t.value=e.target.getAttribute("data-value"),t.update()})}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"update",value:function(){"matte"===this.value?(this.matteBtn.addClass("pw-finish-btn-selected"),this.glossyBtn.removeClass("pw-finish-btn-selected")):(this.matteBtn.removeClass("pw-finish-btn-selected"),this.glossyBtn.addClass("pw-finish-btn-selected"))}}]),e}();e.FinishChooser=c},function(t,e){t.exports='<div> <style>.pw-wrap-flex{margin:10px 0 0 10px;display:flex;flex-direction:row}.pw-wrap-btn{white-space:nowrap;flex:0 1 0;padding:10px}.pw-wrap-chooser-info,.pw-wrap-chooser-info:active,.pw-wrap-chooser-info:hover{border-left:none}.pw-wrap-chooser-info{flex:0 1 130px;border-radius:0 3px 3px 0;text-align:right}.pw-wrap-chooser-btn{border-radius:3px 0 0 3px}.pw-wrap-chooser-info::after{content:\'▼\'}.pw-wrap-drop{position:absolute;border:1px solid #d3d3d3;box-shadow:2px 2px 20px 0 rgba(0,0,0,.25);z-index:50;left:10px;background:#fff;width:50%;padding:5px;display:flex}.pw-wrap-option{flex:1 1 30%;border:1px solid #eee;margin:10px;padding:10px;border-radius:3px;cursor:pointer}.pw-wrap-option *{pointer-events:none}.pw-wrap-option:hover{background:#edf1f7;border-color:#d4d7f7}.pw-wrap-option:active{background:#f3f7fd;border-color:#d4d7f7}.pw-wrap-option h2{text-align:center;margin:0 0 15px 0;font-weight:300;font-size:18px}@media screen and (max-width:1200px){.pw-wrap-drop{width:calc(100% - 20px)}}.pw-wrap-img{left:25%;height:170px;width:75%;position:relative;perspective:500px}.pw-wrap-img-img{width:150px;height:150px;overflow:hidden}.pw-wrap-img img{width:200px;height:200px;position:relative}.pw-wrap-img-front img{left:-50px;top:-25px}.pw-wrap-img-front{position:absolute;transform:rotate3d(0,1,0,25deg)}.pw-wrap-img-left img{left:-25px;top:-25px}.pw-wrap-img-left{width:25px;position:absolute;transform:translate3d(-16px,0,20px) rotate3d(0,1,0,-50deg)}.pw-color-wrap{background:#dc143c}.pw-img-flipped img{left:-125px;transform:scaleX(-1)}.pw-wrap-help{text-align:center;margin:0 15px;font-weight:300}</style> <div class=pw-wrap-flex> <div class="pw-btn pw-wrap-btn pw-wrap-chooser-btn"> Choose canvas wrap style </div> <div class="pw-btn pw-wrap-btn pw-wrap-chooser-info"> Mirror wrap </div> </div> <div class=pw-wrap-drop> <div class=pw-wrap-option data-value=mirror> <h2>Mirror Wrap</h2> <div class=pw-wrap-img> <div class="pw-wrap-img-img pw-wrap-img-front"> <img src=https://buribalazs.github.io/fish.png> </div> <div class="pw-img-flipped pw-wrap-img-img pw-wrap-img-left"> <img src=https://buribalazs.github.io/fish.png> </div> </div> <div class=pw-wrap-help> The image is mirrored onto the edges of the canvas </div> </div> <div class=pw-wrap-option data-value=gallery> <h2>Gallery Wrap</h2> <div class=pw-wrap-img> <div class="pw-wrap-img-img pw-wrap-img-front"> <img src=https://buribalazs.github.io/fish.png> </div> <div class="pw-wrap-img-img pw-wrap-img-left"> <img src=https://buribalazs.github.io/fish.png> </div> </div> <div class=pw-wrap-help> The image is wrapping onto the edges of the canvas </div> </div> <div class=pw-wrap-option data-value=color> <h2>Color Wrap</h2> <div class=pw-wrap-img> <div class="pw-wrap-img-img pw-wrap-img-front"> <img src=https://buribalazs.github.io/fish.png> </div> <div class="pw-color-wrap pw-wrap-img-img pw-wrap-img-left"> </div> </div> <div class=pw-wrap-help> The edges are filled with a custom color </div> </div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WrapChooser=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(10),a=(n=r)&&n.__esModule?n:{default:n},s=i(1),l=i(0);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.modal=(0,l.toEl)(t.qs(".pw-wrap-drop")).hide(),t.isOpen=!1,t.chooseButton=(0,l.toEl)(t.qs(".pw-wrap-chooser-btn")),t.infoButton=(0,l.toEl)(t.qs(".pw-wrap-chooser-info")),[t.chooseButton,t.infoButton].forEach(function(e){e.addHandler("click",t.toggle.bind(t))}),t.qsAll(".pw-wrap-option").forEach(function(e){(0,l.toEl)(e).addHandler("click",function(e){var i=(0,l.toEl)(e.target).attr("data-value");t.infoButton.innerHTML((0,l.capitalize)(i)+" wrap"),t.eventBubble("wrap:change",i),t.toggle()})}),(0,l.toEl)(document).addHandler("click",function(e){t.isOpen&&!t.contains(e.target)&&t.toggle()}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"toggle",value:function(){this.modal[this.isOpen?"hide":"show"](),this.isOpen=!this.isOpen}}]),e}();e.WrapChooser=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorDisplay=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(2);var r=5,a=[],s=null,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"display",value:function(t){a.push(t.detail),clearTimeout(s),s=setTimeout(c,700)}}]),t}();function c(){var t=Math.max(0,a.length-r);a=a.slice(0,r),t&&a.push({error:"more",name:t}),a="<ul>"+(a=a.map(function(t){return"<li>"+function(t){return{noFile:"File not found: "+t.name,imageTooSmall:"<strong>"+t.name+" is too small.</strong> Minimum image size for optimal quality is "+(t.min&&t.min.width)+"×"+(t.min&&t.min.height)+" pixels",imageTooBig:"<strong>"+t.name+" is too large.</strong> Maximum file size is 10 Mb",invalidFile:"<strong>"+t.name+" is not supported.</strong> Please upload JPG or PNG files",more:"...<strong>"+t.name+"</strong> more errors",alreadyUploaded:"<strong>"+t.name+"</strong> is already added to the editor",uploadFailed:"<strong>"+t.name+"</strong> upload failed"}[t.error]||"unknown error"}(t)+"</li>"}).join(""))+"</ul>",o.store.modal.open({html:a}),a=[]}e.ErrorDisplay=l},function(t,e){t.exports="<div> <style>.font-selector{box-sizing:border-box;position:relative;font-size:18px;line-height:38px;cursor:pointer}@media screen and (max-width:900px){.font-selector{font-size:12px}}@media screen and (max-width:1200px){.font-selector{font-size:14px}}.font-selector *{box-sizing:border-box}.font-selector .fs-current,.font-selector .fs-list{padding-left:5px;border:1px solid #d3d3d3;background:#fff}.font-selector .fs-list{border-top:none;display:none;z-index:10;position:absolute;max-height:200px;overflow-x:hidden;overflow-y:auto}.font-selector .fs-list.fs-list-open{display:block}.pw-font-disabled{opacity:.5;pointer-events:none}.font-option:hover{background:#eee}.font-option.fs-selected{background:#4169e1;color:#fff}.font-option.fs-selected:hover{background:#4169e1}</style> <div class=font-selector> <div class=fs-current></div> <div class=fs-list></div> </div> </div>"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontSelector=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(13),a=(n=r)&&n.__esModule?n:{default:n},s=i(1),l=i(2);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.fontFaces=l.store.fontFaces,t.fontSelector=t.qs(".font-selector"),t.fsCurrent=t.qs(".fs-current"),t.fsList=t.qs(".fs-list"),t.open=!1,t.fsList.innerHTML=t.fontFaces.map(function(t){return'<div class="font-option" data-font="'+t+'" style="font-family: '+t+'">'+t+"</div>"}).join(""),t.listItems=Array.from(t.fsList.childNodes),t.listItems.forEach(function(e){return e.addEventListener("click",t.selectFont.bind(t))}),t.FONT=t.fontFaces[0],t.setCurrent(t.FONT),t.fsCurrent.addEventListener("click",t.clickTop.bind(t)),window.addEventListener("resize",t.resize.bind(t)),t.resize(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"selectFont",value:function(t){this.listItems.forEach(function(t){return t.classList.remove("fs-selected")}),this.setCurrent(t.currentTarget.getAttribute("data-font")),this.stdEventBubble("input"),this.clickTop()}},{key:"setCurrent",value:function(t){this.FONT=t,this.fsList.querySelector('[data-font="'+t+'"]').classList.add("fs-selected"),this.fsCurrent.innerText=t,this.fsCurrent.style.fontFamily=t}},{key:"clickTop",value:function(t){this.open=void 0!==t?t:!this.open,this.fsList.classList[this.open?"add":"remove"]("fs-list-open"),this.open&&this.resize()}},{key:"resize",value:function(){this.fsList.style.width=window.getComputedStyle(this.fsCurrent).width}},{key:"setEnabled",value:function(t){this[t?"removeClass":"addClass"]("pw-font-disabled"),t||this.clickTop(!1)}}]),e}();e.FontSelector=c},function(t,e){t.exports='<div class=pw-text-formatter> <style>.pw-tf-label{margin:15px 0 5px;display:inline-block!important;color:gray}.pw-tf-row{display:flex;flex-direction:row}.pw-tf-col{flex:1 1 auto}.pw-tf-col-color{flex:0 1 70px}#pw-add-image{margin-bottom:10px}</style> <a id=text-formatter-exit class="pw-float-right pw-space" href=javascript:void(0);>Back to images</a> <button id=pw-add-image class="pw-btn pw-file-button">Add Image</button> <button id=pw-add-text class="pw-btn pw-file-button">Add Text</button> <div class=tf-settings> <label class=pw-tf-label>Font</label> <div class=font-selector-container></div> <div class=pw-tf-row> <div class="pw-tf-col pw-tf-col-color"> <label class=pw-tf-label>Color</label> <div class=pw-color-picker> </div> </div> <div class="pw-tf-col pw-tf-col-opacity"> <label class=pw-tf-label>Opacity</label> <div class=pw-opacity-slider></div> </div> </div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextFormatter=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(15),a=(n=r)&&n.__esModule?n:{default:n},s=i(1),l=i(0),c=i(14),d=i(4),u=i(5);var p=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.backButton=t.qs("#text-formatter-exit"),t.addButton=t.qs("#pw-add-text"),t.addImageButton=(0,l.toEl)(t.qs("#pw-add-image")),t.backButton.addEventListener("click",function(e){return t.eventBubble("textFormatter:exit")}),t.addImageButton.addHandler("click",function(e){return t.eventBubble("textFormatter:exit")}),t.addButton.addEventListener("click",function(e){return t.eventBubble("textFormatter:addText")}),t.settings=(0,l.toEl)(t.qs(".tf-settings")),t.fontSelector=(new c.FontSelector).appendTo(t.qs(".font-selector-container")).addHandler("input",function(e){t.canvasText.setFont(t.fontSelector.FONT,void 0,!0)}),t.canvasText=null,t.setEnabled(),t.colorInput=(new d.ColorInput).appendTo(t.qs(".pw-color-picker")).addHandler("colorInput:set",function(e){t.canvasText.color=e.detail,t.canvasText.setFont(null,null,!0)}),t.opacitySlider=(new u.Slider).appendTo(t.qs(".pw-opacity-slider")).addHandler("input",function(e){t.canvasText.opacity=e.target.value/100,t.canvasText.setFont(null,null,!0)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"setEnabled",value:function(t){return this.settings[t?"show":"hide"](),this}},{key:"setFormat",value:function(t){return this.fontSelector.setCurrent(t.font),this.canvasText=t,this.colorInput.setColor(this.canvasText.color),this.opacitySlider.input.value=100*t.opacity,this}},{key:"canvas",set:function(t){this.addImageButton[t.hasImage?"hide":"show"]()}}]),e}();e.TextFormatter=p},function(t,e){t.exports='<div class=pw-modal-wrap> <div class=pw-modal-window-wrap> <div class=aligner-item--top></div> <div class=pw-modal-window> <div class=pw-delete></div> <div class=pw-modal-content> Really delete asd.png? </div> <div class=pw-modal-btn-container> <button class="pw-btn pw-modal-close">Close</button> <button class="pw-btn pw-modal-confirm pw-float-right"></button> </div> </div> <div class=aligner-item--bottom></div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(17),a=(n=r)&&n.__esModule?n:{default:n},s=i(1),l=i(2);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return l.store.modal=t,t.bg=t.qs(".pw-modal-window-wrap"),t.bg.addEventListener("click",t.close.bind(t)),t.closeIcon=t.qs(".pw-delete"),t.closeButton=t.qs(".pw-modal-close"),t.confirmButton=t.qs(".pw-modal-confirm"),t.contentArea=t.qs(".pw-modal-content"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"open",value:function(t){var e=this;return this.confirmButton.classList[t.danger?"add":"remove"]("pw-btn-danger"),this.contentArea.innerHTML="","string"==typeof t.html?this.contentArea.innerHTML=t.html:t.html instanceof s.Component?this.contentArea.appendChild(t.html.element):this.contentArea.appendChild(t.html),this.confirmButton.innerHTML=t.btnText||"Confirm",this.closeButton.style.visibility=t.btnText?"inherit":"hidden",this.addClass("pw-modal-wrap-open"),new Promise(function(t){e.confirmHandler=function(i){t(),e.close()},e.confirmButton.addEventListener("click",e.confirmHandler)})}},{key:"close",value:function(t){return t&&![this.bg,this.closeIcon,this.closeButton].includes(t.target)||this.removeClass("pw-modal-wrap-open"),this.confirmButton.removeEventListener("click",this.confirmHandler),this}},{key:"isOpen",get:function(){return this.hasClass("pw-modal-wrap-open")}}]),e}();e.Modal=c},function(t,e){t.exports="<div class=pw-rotate-buttons> <button class=pw-btn id=pw-rotate-left data-value=-5>◄ Rotate left</button> <button class=pw-btn id=pw-rotate-right data-value=5>Rotate right ►</button> </div>"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rotater=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(19),a=(n=r)&&n.__esModule?n:{default:n},s=i(1);var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return t.left=t.qs("#pw-rotate-left"),t.right=t.qs("#pw-rotate-right"),[t.left,t.right].forEach(function(e){return e.addEventListener("click",function(e){t.element.value=parseInt(e.target.getAttribute("data-value")),t.stdEventBubble("input")})}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"setEnabled",value:function(t){[this.left,this.right].forEach(function(e){return e[t?"removeAttribute":"setAttribute"]("disabled",!0)})}}]),e}();e.Rotater=l},function(t,e){t.exports='<div class=pw-color-picker> <div class=color-picker> <svg width=100% height=230 viewBox="0 0 280 220" preserveAspectRatio=xMidYMid> <defs> <linearGradient id=rainbow x1=0% y1=0% x2=0% y2=100%> </linearGradient> <linearGradient id=white-black x1=0% y1=0% x2=0% y2=100%> <stop offset=0% style=stop-color:#fff;stop-opacity:1></stop> <stop offset=100% style=stop-color:#000;stop-opacity:1></stop> </linearGradient> <linearGradient id=color-black x1=0% y1=0% x2=0% y2=100%> </linearGradient> <linearGradient id=saturation-mask-gradient x1=0% y1=0% x2=100% y2=0%> <stop offset=0% style=stop-color:#000;stop-opacity:1></stop> <stop offset=100% style=stop-color:#fff;stop-opacity:1></stop> </linearGradient> <mask id=saturation-mask> <rect x=0 y=0 width=200 height=200 fill=url(#saturation-mask-gradient) /> </mask> </defs> <g transform=translate(10,10)> <rect class=bw height=200 width=200 fill=url(#white-black)></rect> <rect class=nomouse height=200 width=200 fill=url(#color-black) mask=url(#saturation-mask)></rect> <rect class=rainbow height=200 width=50 x=210 fill=url(#rainbow)></rect> <g class=color-dot> <rect x=-7 y=-7 width=16 height=16 stroke=white fill=none></rect> <rect x=-8 y=-8 width=16 height=16 stroke=black fill=none></rect> </g> <g class=hue-slider> <rect width=54 height=16 stroke=white fill=none></rect> <rect x=-1 y=-1 width=54 height=16 stroke=black fill=none></rect> </g> </g> </svg> </div> <div class=cp-toolbar> <div class="cp-col pw-float-right"> <div class=color-display></div> </div> <div class="cp-col pw-float-right"> <span>#</span><input class=hex-input value=54F100 spellcheck=false> </div> <div class=clearfix></div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPicker=void 0;var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1),s=i(21),l=(n=s)&&n.__esModule?n:{default:n},c=i(3),d=i(0);function u(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l.default));return i.handleInput=void 0,i.init(t,i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),r(e,[{key:"dispatch",value:function(t){this.eventBubble("colorPicker:input",t)}},{key:"init",value:function(t,e){e.COLOR=t||"FFFF88";var i=200,n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],r=this.element.querySelector("svg"),a=this.element.querySelector(".rainbow"),s=this.element.querySelector(".bw"),l=this.element.querySelector("#rainbow"),p=this.element.querySelector("#color-black"),h=this.element.querySelector(".color-dot"),f=this.element.querySelector(".hue-slider"),v=this.element.querySelector(".color-display"),g=[{h:0},{h:64},{h:128},{h:196},{h:255},{h:300}];e.handleInput=y,e.setColor=function(t){w.value=t.replace("#",""),b=E(w.value),y()};var m=Math.floor(100/(g.length-1)),w=this.element.querySelector(".hex-input"),b=void 0;function y(t){if(t&&(b=t),w.value=Array.from(w.value.toUpperCase().slice(0,6)).filter(function(t){return n.includes(t)}).join(""),!(w.value.length<6)){e.COLOR=w.value,w.classList.remove("cp-invalid"),h.setAttribute("transform","translate("+function(t){if("object"===(void 0===t?"undefined":o(t)))return t[1]*i;var e=E(t);return Math.round(e[1]*i)}(t||e.COLOR)+","+function(t){if("object"===(void 0===t?"undefined":o(t)))return(1-t[2])*i;var e=E(t);return i-Math.round(e[2]*i)}(t||e.COLOR)+")");var r=E(e.COLOR);return r[0]=r[0]||1/255,p.innerHTML='<stop offset="0%" style="stop-color:hsl('+360*r[0]+',100%,50%);stop-opacity:1" /><stop offset="100%" style="stop-color:hsl('+360*r[0]+',0%,0%);stop-opacity:1" />',f.setAttribute("transform","translate(209, "+(240*(t?t[0]:r[0])-9)+")"),v.style.backgroundColor="#"+e.COLOR,e.COLOR}w.classList.add("cp-invalid")}function x(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]);var i=(0,c.cursorPoint)(r,t);i.y-=9;var n=b||E(e.COLOR);i.y=(0,d.between)(i.y,0,200),n[0]=i.y/240,e.COLOR=A.apply(void 0,u(n)),w.value=e.COLOR,e.handleInput(n),e.dispatch(e.COLOR)}function C(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]);var n=(0,c.cursorPoint)(r,t);n.x-=10,n.y-=10;var o=b||E(e.COLOR);n.x=(0,d.between)(n.x,0,i),n.y=(0,d.between)(n.y,0,i),o[1]=n.x/i||1/255,o[2]=(i-n.y)/i,e.COLOR=A.apply(void 0,u(o)),w.value=e.COLOR,e.handleInput(o),e.dispatch(e.COLOR)}function E(t){return function(t,e,i){t/=255,e/=255,i/=255;var n=Math.max(t,e,i),o=Math.min(t,e,i),r=void 0,a=void 0,s=n,l=n-o;if(a=0==n?0:l/n,n==o)r=0;else{switch(n){case t:r=(e-i)/l+(e<i?6:0);break;case e:r=(i-t)/l+2;break;case i:r=(t-e)/l+4}r/=6}return[r,a,s]}.apply(void 0,u(function(t){return[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)]}(t)))}function A(t,e,i){return function(t,e,i){var n=void 0,o=void 0,r=void 0,a=Math.floor(6*t),s=6*t-a,l=i*(1-e),c=i*(1-s*e),d=i*(1-(1-s)*e);switch(a%6){case 0:n=i,o=d,r=l;break;case 1:n=c,o=i,r=l;break;case 2:n=l,o=i,r=d;break;case 3:n=l,o=c,r=i;break;case 4:n=d,o=l,r=i;break;case 5:n=i,o=l,r=c}return[255*n,255*o,255*r]}(t,e,i).map(function(t){return 1===(t=Math.round(t).toString(16)).length&&(t="0"+t),t}).join("")}w.addEventListener("input",function(t){y()&&e.dispatch(e.COLOR)}),l.innerHTML=g.map(function(t,e){return'<stop offset="'+e*m+'%" style="stop-color:hsl('+t.h+',100%,50%);stop-opacity:1" />'}).join("\n"),this.handleInput(),a.addEventListener("mousedown",function(t){x(t),a.addEventListener("mousemove",x)}),a.addEventListener("touchstart",function(t){x(t),a.addEventListener("touchmove",x)}),s.addEventListener("mousedown",function(t){C(t),s.addEventListener("mousemove",C)}),s.addEventListener("touchstart",function(t){C(t),s.addEventListener("touchmove",C)}),this.element.addEventListener("mouseup",function(t){a.removeEventListener("mousemove",x),s.removeEventListener("mousemove",C)}),this.element.addEventListener("touchend",function(t){a.removeEventListener("touchmove",x),s.removeEventListener("touchmove",C)})}}]),e}();e.ColorPicker=p},function(t,e){t.exports='<div class=pw-color-input> <style>.pw-color-button-highlight{position:absolute;top:0;background:#fff;pointer-events:none}.pw-color-button-body{border:3px solid #e9e9e9;background:red;outline:1px solid #bfbfbf;position:relative}.pw-color-button,.pw-color-button-body,.pw-color-button-highlight{width:40px;height:40px;cursor:pointer}.pw-wide .pw-color-button,.pw-wide .pw-color-button-body,.pw-wide .pw-color-button-highlight{width:100%}.pw-color-button .pw-color-button-highlight{opacity:0}.pw-color-button:hover .pw-color-button-body{border-color:#fff}.pw-color-button:active .pw-color-button-highlight{opacity:.2}.pw-color-input-wrap{position:relative}.pw-color-input-body{position:fixed;width:300px;padding:5px 0;background:#fff;border:1px solid #d3d3d3;box-shadow:2px 2px 20px 0 rgba(0,0,0,.25);z-index:100}.pw-color-swatches{text-align:center}.pw-color-swatch{margin:8px;width:40px;height:40px;border:1px solid #d3d3d3;display:inline-block;cursor:pointer}.pw-color-swatch:active:not(.pw-color-swatch-selected),.pw-color-swatch:hover:not(.pw-color-swatch-selected){outline:1px solid #d3d3d3}.pw-color-swatch:active{opacity:.6}.pw-color-swatch-selected{outline:3px solid #d3d3d3}.pw-color-more{padding:5px 15px}.cp-toolbar{padding:0 15px 10px 0}</style> <div class=pw-color-input-wrap> <div class=pw-color-button> <div class=pw-color-button-body></div> <div class=pw-color-button-highlight></div> </div> <div class=pw-color-input-body> <div> <div class=pw-color-swatches> </div> <div class=pw-color-wheel></div> <div class=pw-color-more> <button class="pw-more-color pw-btn"> More Colors </button> <button class="pw-set-color pw-btn pw-float-right"> Close </button> </div> </div> </div> </div> </div>'},function(t,e){t.exports="<g class=canvas-text> <style>.canvas-text-text{paint-order:stroke;stroke-width:1px;stroke:none;stroke-linecap:butt;stroke-linejoin:miter}</style> <defs> <clippath id=text-crop> <rect width=300 height=300></rect> </clippath> </defs> <g clip-path=url(#text-crop) class=canvas-text> <g class=translate-group transform=translate(0,200)> <g class=rotate-group transform=rotate(0,150,0)> <g class=vertical-center-group> <text class=canvas-text-text text-anchor=middle fill=red></text> <g class=text-rect> <rect class=test-rect fill=rgba(0,0,0,0) width=10 height=10></rect> </g> <foreignobject class=pw-fo width=300 height=300> <div class=text-wrap> <div class=text-input spellcheck=false contenteditable=true>edit Text</div> </div> </foreignobject> <rect class=center-point width=1 height=1 fill=none x=150></rect> <g class=edit-icon> <circle r=10 cx=10 cy=10 fill=dodgerblue></circle> <text class=pw-svg-icon x=2 y=15 fill=white>✎</text> </g> <g class=rotate-icon> <line x1=10 y1=10 x2=10 y2=40 stroke=gray></line> <circle r=10 cx=10 cy=10 fill=dodgerblue></circle> <text class=pw-svg-icon x=3 y=15 fill=white>↻</text> </g> <g class=delete-icon> <circle r=10 cx=10 cy=10 fill=orange></circle> <text class=pw-svg-icon x=6 y=15 fill=black>×</text> </g> <g class=resize-icon> <circle r=10 cx=10 cy=10 fill=black></circle> <g transform=rotate(-45)> <text class=pw-svg-icon x=-4 y=18 fill=white>↕</text> </g> </g> </g> </g> </g> </g> </g> "},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasText=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=i(24),s=(n=a)&&n.__esModule?n:{default:n},l=i(0),c=i(3),d=i(2),u=i(4);navigator.userAgent.toLowerCase().includes("firefox");var p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default,"svg"));i.canvas=t,i.width=t.width,i.height=t.height,i.svg=i.canvas.svg,i.input=i.qs(".text-input"),i.textWrap=i.qs(".text-wrap"),i.translateGroup=i.qs(".translate-group"),i.rotateGroup=i.qs(".rotate-group"),i.vcGroup=i.qs(".vertical-center-group"),i.centerPoint=i.qs(".center-point"),i.editIcon=i.qs(".edit-icon"),i.deleteIcon=i.qs(".delete-icon"),i.rotateIcon=i.qs(".rotate-icon"),i.resizeIcon=(0,l.toEl)(i.qs(".resize-icon")),i.text=i.qs(".canvas-text-text"),i.fo=i.qs(".pw-fo"),i.offset={x:0,y:0},i.textRect=i.qs(".text-rect"),i.testRect=i.qs(".test-rect"),i.cropRect=(0,l.toEl)(i.qs("#text-crop rect")),i.font=d.store.fontFaces[0],i.stroke="none",i.color="FF0000",i.fontSize=32,i.lineHeight=38,i.opacity=1,i.rotateIcon.addEventListener("mousedown",i.startRotate.bind(i)),i.rotateIcon.addEventListener("touchstart",i.startRotate.bind(i)),i.resizeIcon.addHandler("mousedown",i.startResize.bind(i)),i.resizeIcon.addHandler("touchstart",i.startResize.bind(i)),i.textRect.addEventListener("mousedown",i.start.bind(i)),i.textRect.addEventListener("touchstart",i.start.bind(i)),i.deleteIcon.addEventListener("mousedown",function(t){return i.blur().element.dispatchEvent(new Event("remove"))}),i.deleteIcon.addEventListener("touchstart",function(t){return i.element.dispatchEvent(new Event("remove"))}),i.editIcon.addEventListener("click",function(t){return i.focus()}),i.input.addEventListener("input",i.update.bind(i));var n=i.end.bind(i);return i.textWrap.addEventListener("click",function(t){return n(t)}),document.addEventListener("mouseup",n),document.addEventListener("touchend",n),document.addEventListener("mouseleave",n),i.input.addEventListener("blur",n),i.fo.setAttribute("width",i.width),i.fo.setAttribute("height",i.height),i.setFont(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),o(e,[{key:"startResize",value:function(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]),this.resizing=!0,document.resizeHandler=this.resize.bind(this),this.resizeBasis={size:this.fontSize,distance:Math.sqrt((0,c.pointDistSq)(this.getCP(),(0,c.cursorPoint)(this.svg,t)))},document.addEventListener("mousemove",document.resizeHandler),document.addEventListener("touchmove",document.resizeHandler)}},{key:"resize",value:function(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]);var e=Math.sqrt((0,c.pointDistSq)(this.getCP(),(0,c.cursorPoint)(this.svg,t)))/this.resizeBasis.distance*this.resizeBasis.size;this.setFont(null,e,!0)}},{key:"startRotate",value:function(t){(0,c.killE)(t),document.rotateHandler=this.rotate.bind(this),document.addEventListener("mousemove",document.rotateHandler),document.addEventListener("touchmove",document.rotateHandler)}},{key:"rotate",value:function(t){(0,c.killE)(t),this.rotating=!0,t.touches&&(t=t.touches[0]);var e=3*Math.round(((0,c.pointAngle)(this.getCP(),(0,c.cursorPoint)(this.svg,t))+90)/3);this.rotateGroup.setAttribute("transform","rotate("+Math.round(e)+","+this.width/2+",0)")}},{key:"fastClick",value:function(t){(0,c.killE)(t),this.fo.classList.add("pw-fo-active"),this.textRect.classList.add("text-hidden"),this.text.classList.add("text-hidden"),this.focus(),this.input.focus()}},{key:"start",value:function(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]),this.input.clickTime=(0,l.now)(),this.svg.moveHandler=this.move.bind(this),this.svg.addEventListener("mousemove",this.svg.moveHandler),this.svg.addEventListener("touchmove",this.svg.moveHandler);var e=this.svg.createSVGPoint();e.x=t.clientX,e.y=t.clientY,e=e.matrixTransform(this.svg.getScreenCTM().inverse());var i=(0,c.getTranslate)(this.translateGroup);this.offset.x=e.x-i.x,this.offset.y=e.y-i.y}},{key:"end",value:function(t){var e=this;document.removeEventListener("mousemove",document.rotateHandler),document.removeEventListener("touchmove",document.rotateHandler),document.removeEventListener("mousemove",document.resizeHandler),document.removeEventListener("touchmove",document.resizeHandler),this.svg.removeEventListener("mousemove",this.svg.moveHandler),this.svg.removeEventListener("touchmove",this.svg.moveHandler);var i=(0,l.now)()-this.input.clickTime;if(t.target===this.testRect)i<l.CFG.FAST_CLICK_WAIT&&this.fastClick(t);else if(!(this.textFormatter.settings.contains(t.target)||u.ColorInput.isColorInput(t.target)||t.target===document||this.rotating||this.resizing||[this.input].includes(t.target))){e.fo.classList.remove("pw-fo-active"),e.textRect.classList.remove("text-hidden"),e.text.classList.remove("text-hidden"),e.blur()}this.rotating=!1,this.resizing=!1}},{key:"focus",value:function(){if(!this.hasClass("canvas-text-focus"))return this.eventBubble("canvasText:focus",this),this.addClass("canvas-text-focus"),this}},{key:"blur",value:function(){if(this.hasClass("canvas-text-focus"))return this.eventBubble("canvasText:blur",this),this.removeClass("canvas-text-focus"),this}},{key:"move",value:function(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]);var e=(0,c.cursorPoint)(this.svg,t);e.x=(0,l.between)(e.x-this.offset.x,-this.width/2,this.width/2),e.y=(0,l.between)(e.y-this.offset.y,0,this.height),this.translateGroup.setAttribute("transform","translate("+e.x+","+e.y+")")}},{key:"update",value:function(){for(var t=this.input.innerHTML.replace(/<div>/g,"").replace(/<\/div>/g,"<br>").split("<br>");t.length>1&&!t[t.length-1];)t.pop();var e=window.getComputedStyle(this.input);this.updateText(t,e);var i=(0,c.px)().off(e.width),n=(0,c.px)().off(e.height);this.centerPoint.setAttribute("y",n/2),this.rotateIcon.setAttribute("transform","translate("+((this.width-i)/2+i/2-10)+", -40)"),this.editIcon.setAttribute("transform","translate("+((this.width-i)/2-20)+", -20)"),this.deleteIcon.setAttribute("transform","translate("+(i+(this.width-i)/2)+", -20)"),this.resizeIcon.setAttr("transform","translate("+(i+(this.width-i)/2)+", "+n+")"),this.vcGroup.setAttribute("transform","translate(0,"+-n/2+")"),this.cropRect.setAttr("width",this.width+2*l.CFG.CANVAS_EDGE_SIZE).setAttr("height",this.height+2*l.CFG.CANVAS_EDGE_SIZE).setAttr("x",-l.CFG.CANVAS_EDGE_SIZE).setAttr("y",-l.CFG.CANVAS_EDGE_SIZE)}},{key:"updateText",value:function(t,e){var i=this,n=(0,c.px)().off(e.fontSize),o=this.lineHeight;this.text.innerHTML="<tspan >O</tspan><tspan >O</tspan>";var r=this.text.getBBox();1!==t.length||t[0]||(t[0]="&nbsp;"),this.text.innerHTML=t.map(function(e,a){return'<tspan x="'+(i.width/2+(a<t.length-1?n/7:0))+'" y="'+(a*o-r.y)+'">'+e+"</tspan>"}).join("\n"),(0,c.wrapWithRect)(this.text,this.testRect),this.centerPoint.setAttribute("x",this.width/2)}},{key:"pointerEvents",value:function(t){t=t||"auto",this.element.style.pointerEvents=t}},{key:"setFont",value:function(t,e,i){var n=this;return t=t||this.font,e=e||this.fontSize,this.font=t,this.fontSize=e,this.lineHeight=Math.round(1.2*e),[this.input,this.text].forEach(function(i){i.style.fontFamily=t,i.style.fontSize=(0,c.px)().on(e),i.style.lineHeight=(0,c.px)().on(n.lineHeight),i.style.color="#"+n.color,i.style.fill="#"+n.color,i.style.stroke="#"+n.stroke}),this.text.style.opacity=this.opacity,i&&this.update(),this}},{key:"getCP",value:function(){var t=this.svg.createSVGPoint();t.x=this.centerPoint.getAttribute("x"),t.y=this.centerPoint.getAttribute("y");var e=t.matrixTransform(this.centerPoint.getCTM());return e=e.matrixTransform(this.canvas.totalGroup.getCTM().inverse())}}]),e}();e.CanvasText=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MiniQ=void 0;var n=i(0);e.MiniQ=function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.from(e.querySelectorAll("[data-id]")).forEach(function(t){i[t.getAttribute("data-id")]=(0,n.createEl)(t)})}},function(t,e){t.exports='<g class=pw-canvas> <defs> <clippath id=mid> <rect data-id=midrect width=300 height=300></rect> </clippath> <clippath id=top> <rect data-id=toprect width=300 height=300></rect> </clippath> <clippath id=topleft> <rect data-id=topleftrect width=300 height=300></rect> </clippath> <clippath id=topright> <rect data-id=toprightrect width=300 height=300></rect> </clippath> <clippath id=left> <rect data-id=leftrect width=300 height=300></rect> </clippath> <clippath id=preview> <polygon data-id=previewpoly points="0,0 10,0 10,10 0,10"></polygon> </clippath> <clippath id=right> <rect data-id=rightrect width=300 height=300></rect> </clippath> <clippath id=bottom> <rect data-id=bottomrect width=300 height=300></rect> </clippath> <clippath id=bottomleft> <rect data-id=bottomleftrect width=300 height=300></rect> </clippath> <clippath id=bottomright> <rect data-id=bottomrightrect width=300 height=300></rect> </clippath> <filter id=f3 x=0 y=0 width=130% height=130%> <feoffset result=offOut in=SourceAlpha dx=0 dy=2 /> <fegaussianblur result=blurOut in=offOut stddeviation=6 /> <fecomponenttransfer> <fefunca type=linear slope=0.2 /> </fecomponenttransfer> <femerge> <femergenode/> <femergenode in=SourceGraphic /> </femerge> </filter> <lineargradient id=edgehighlight x1=20% y1=0% x2=0% y2=100%> <stop offset=0% style=stop-color:#fff;stop-opacity:.7 /> <stop offset=100% style=stop-color:#fff;stop-opacity:.3 /> </lineargradient> </defs> <g class=canvas-effect> <g class=canvas-wrap> <rect data-id=canvasbg class=canvas-bg height=300 width=300></rect> <g clip-path=url(#mid)> <g class=img-translate-group transform=translate(0,0)> <g class=img-scale-group transform="scale(1) translate(0, 0)"> <g transform="rotate(45 150 150)" class=img-rotate-group> <image data-id=img-main width=300 height=300 class=img-main xlink:href=""></image> </g> </g> </g> </g> <g class=mirror-wrap> <g class=img-top-group clip-path=url(#top)> <image data-id=img-top class="img-edge img-top" width=300 height=300 xlink:href=""></image> </g> <g class=img-left-group clip-path=url(#left)> <image data-id=img-left class="img-edge img-left" width=300 height=300 xlink:href=""></image> </g> <g class=img-top-left-group clip-path=url(#topleft)> <image data-id=img-top-left class="img-edge img-top-left" width=300 height=300 xlink:href=""></image> </g> <g class=img-top-right-group clip-path=url(#topright)> <image data-id=img-top-right class="img-edge img-top-right" width=300 height=300 xlink:href=""></image> </g> <g class=img-right-group clip-path=url(#right)> <image data-id=img-right class="img-edge img-right" width=300 height=300 xlink:href=""></image> </g> <g class=img-bottom-group clip-path=url(#bottom)> <image data-id=img-bottom class="img-edge img-bottom" width=300 height=300 xlink:href=""></image> </g> <g class=img-bottom-left-group clip-path=url(#bottomleft)> <image data-id=img-bottom-left class="img-edge img-bottom-left" width=300 height=300 xlink:href=""></image> </g> <g class=img-bottom-right-group clip-path=url(#bottomright)> <image data-id=img-bottom-right class="img-edge img-bottom-right" width=300 height=300 xlink:href=""></image> </g> </g> <polygon class=highlight-poly data-id=highlightpoly points="0,0 10,0 10,10 0,10"></polygon> <rect data-id=canvasoutline class=canvas-outline height=300 width=300 fill=none></rect> </g> <rect data-id=canvasedge class=canvas-edge height=300 width=300 fill=none></rect> <g class=canvas-marks></g> <text class=size-text x=100 y=100 text-anchor=middle fill=lightgray>50x50</text> </g> </g> '},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=i(27),s=(n=a)&&n.__esModule?n:{default:n},l=i(26),c=i(0),d=i(3),u=i(25),p=i(2);var h=function(t){function e(t,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default,"svg"));return r.x=t,r.y=i,r.id=(0,c.uid)(),r.width=n,r.height=o,r.imageRotation=0,r.imageScale=1.01,r.imageX=0,r.imageY=0,r.imageDimensions={width:r.width,height:r.height},r.imageTranslateGroup=r.qs(".img-translate-group"),r.imageScaleGroup=(0,c.toEl)(r.qs(".img-scale-group")),r.imageRotateGroup=(0,c.toEl)(r.qs(".img-rotate-group")),r.imageMid=r.qs(".img-main"),r.imageTop=r.qs(".img-top"),r.imageTopLeft=r.qs(".img-top-left"),r.imageTopRight=r.qs(".img-top-right"),r.imageLeft=r.qs(".img-left"),r.imageRight=r.qs(".img-right"),r.imageBottom=r.qs(".img-bottom"),r.imageBottomLeft=r.qs(".img-bottom-left"),r.imageBottomRight=r.qs(".img-bottom-right"),r.sizeText=(0,c.toEl)(r.qs(".size-text")),r.mirrorWrap=(0,c.toEl)(r.qs(".mirror-wrap")),r.offset=[0,0],r.els=new l.MiniQ(r.element),r.texts=[],r.valid=!1,r._wrapStyle=c.WRAP_STYLE.MIRROR,r._wrapColor="6079c0",r.imageMid.addEventListener("mousedown",r.startDrag.bind(r)),window.addEventListener("mouseup",r.stopDrag.bind(r)),r.addHandler("click",function(t){(0,d.killE)(t),r.focus()}),r.addHandler("drop",function(t){var e=document.querySelector("nav.breadcrumb");e&&e.scrollIntoView({block:"start",behavior:"smooth"});var i=t.dataTransfer.getData("text/plain");if(i){var n=p.store.getImg(i);r.setImage({id:n.id,extension:n.extension,src:n.bigThumb.getAttribute("src"),dimensions:n.dimensions,drop:!0},"focusMe")}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),o(e,[{key:"init",value:function(){for(var t=this.element;!this.svg&&t;)"svg"===(t=t.parentNode).tagName?this.svg=t:t.classList.contains("total-group")&&(this.totalGroup=t);this.updateCoordinates(),this.updateRotationAndScale(),this.updateEdges()}},{key:"focus",value:function(){this.focused||(this.focused=!0,this.element.classList.add("pw-focus"),this.eventBubble("canvas:focus",this))}},{key:"blur",value:function(){this.focused=!1,this.element.classList.remove("pw-focus"),this.eventBubble("canvas:blur",this)}},{key:"addText",value:function(t){if(!(this.texts.length>=5)){var e=new u.CanvasText(this);return e.textFormatter=t,e.appendTo(this.element),e.update(),this.texts.push(e),e.element.addEventListener("remove",this.removeText.bind(this)),e}this.eventBubble("canvas:maxText")}},{key:"removeText",value:function(t){var e=t.target;this.texts=this.texts.filter(function(t){return t.element!==e}),e.parentNode.removeChild(e)}},{key:"clearImage",value:function(t){t&&t!==this.imageId||(this.hasImage=!1,this.sizeText.setStyle("visibility","visible"),this.imageRotation=0,this.imageScale=1.01,this.imageX=0,this.imageY=0,this.imageId=void 0,this.imageSrc=void 0,this.imageDimensions={width:this.width,height:this.height},this.screenImageWidth=this.imageDimensions.width,this.screenImageHeight=this.imageDimensions.height,this.configureImages(""))}},{key:"configureImages",value:function(t){var e=this;["img-main","img-top","img-top-left","img-top-right","img-left","img-right","img-bottom","img-bottom-left","img-bottom-right"].forEach(function(i){e.els[i].setAttr("width",e.screenImageWidth).setAttr("height",e.screenImageHeight).setAttr("xlink:href",t)})}},{key:"setImage",value:function(t,e){var i=this;return new Promise(function(e){i.hasImage=!0,i.sizeText.setStyle("visibility","hidden"),i.imageId=t.id,i.extension=t.extension,i.imageSrc=t.src,i.imageDimensions=t.dimensions;var n=new Image,o=i.wrapStyle===c.WRAP_STYLE.GALLERY,r=c.CFG.CANVAS_EDGE_SIZE,a=o?-r:0;n.addEventListener("load",function(s){var l=i.width/n.width,c=i.height/n.height,d=Math.max(l,c);i.screenImageWidth=n.width*d,i.screenImageHeight=n.height*d,o&&(i.imageScale=1.01*Math.max((i.width+2*r)/i.width,(i.height+2*r)/i.height)),i.configureImages(t.src),i.updateRotationAndScale(),i.focus(),i.setImagePos(a-.01,a-.01,"init"),i.updateEdges(),e(i)}),n.src=t.src,t.drop&&i.eventBubble("canvas:setimage",i)})}},{key:"updateCoordinates",value:function(){var t=c.CFG.CANVAS_EDGE_SIZE,e=this.wrapStyle===c.WRAP_STYLE.GALLERY?{x:-t,y:-t,w:this.width+2*t,h:this.height+2*t}:{x:0,y:0,w:this.width,h:this.height};this.sizeText.setAttr("x",this.width/2).setAttr("y",this.height/2).innerHTML(this.width/10+"×"+this.height/10+"cm"),this.element.setAttribute("transform","translate("+this.x+","+this.y+")"),this.els.midrect.setAttr("width",e.w).setAttr("height",e.h).setAttr("x",e.x).setAttr("y",e.y),this.els.toprect.setAttr("width",this.width).setAttr("height",t+1).setAttr("x",0).setAttr("y",-t),this.els.topleftrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",-t).setAttr("y",-t),this.els.toprightrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",this.width-.5).setAttr("y",.5-t),this.els.leftrect.setAttr("width",t+1).setAttr("height",this.height).setAttr("x",-t).setAttr("y",0),this.els.rightrect.setAttr("width",t).setAttr("height",this.height).setAttr("x",this.width).setAttr("y",0),this.els.bottomrect.setAttr("width",this.width).setAttr("height",t).setAttr("x",0).setAttr("y",this.height),this.els.bottomleftrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",-t).setAttr("y",this.height-.5),this.els.bottomrightrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",this.width-.5).setAttr("y",this.height-.5),this.els.canvasedge.setAttr("width",this.width).setAttr("height",this.height),this.els.canvasoutline.setAttr("width",this.width+2*t).setAttr("height",this.height+2*t).setAttr("x",-t).setAttr("y",-t),this.els.canvasbg.setAttr("x",-t).setAttr("y",-t).setAttr("width",this.width+2*t).setAttr("height",this.height+2*t),this.els.canvasbg.setAttr("fill",this.wrapStyle===c.WRAP_STYLE.COLOR?"#"+this.wrapColor:"white"),this.els.previewpoly.setAttr("points","0,0 "+this.width+",0 "+this.width+","+this.height+" 0,"+this.height+" "+-t/2.5+","+(this.height-4)+" "+-t/2.5+",4"),this.els.highlightpoly.setAttr("points","0,0 0,"+this.height+" "+-t/2.5+","+(this.height-4)+" "+-t/2.5+",4")}},{key:"updateRotationAndScale",value:function(){var t=this.imageMid.getBBox();return this.scaleOffset={x:-t.width*this.imageScale/2,y:-t.height*this.imageScale/2},this.imageScaleGroup.setAttr("transform","translate("+this.scaleOffset.x+","+this.scaleOffset.y+") scale("+this.imageScale+")"),this.imageRotateGroup.setAttr("transform","rotate("+this.imageRotation+" "+t.width/2+" "+t.height/2+")"),this}},{key:"transform",value:function(t,e,i,n){this.imageRotation=i,this.imageScale=n,this.updateRotationAndScale(),this.setImagePos(t,e,"init"),this.updateCoordinates(),this.updateEdges()}},{key:"updateEdges",value:function(){var t=this.totalGroup.getCTM().inverse(),e=this.imageRotateGroup.element.getCTM(),i=this.svg.createSVGMatrix().flipY().translate(-this.x,-this.y-1).multiply(t);return this.imageTop.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-1,-this.y-.5).multiply(t),this.imageTopLeft.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-2*this.width-.5,-this.y-.5).multiply(t),this.imageTopRight.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().translate(-this.x-1,-this.y).multiply(t),this.imageLeft.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().translate(-this.x-2*this.width,-this.y).multiply(t),this.imageRight.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipY().translate(-this.x,-this.y-2*this.height).multiply(t),this.imageBottom.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-1,-this.y-2*this.height-.5).multiply(t),this.imageBottomLeft.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-2*this.width,-this.y-2*this.height).multiply(t),this.imageBottomRight.setAttribute("transform",(0,d.matrixToAttr)(i.multiply(e))),this}},{key:"startDrag",value:function(t){(0,d.killE)(t),this.focus();var e=(0,d.cursorPoint)(this.svg,t),i=this.imageOffset;this.offset=[e.x-i[0],e.y-i[1]],this.imageMid.moveListener=this.drag.bind(this),document.addEventListener("mousemove",this.imageMid.moveListener),this.texts.forEach(function(t){return t.pointerEvents("none")})}},{key:"stopDrag",value:function(){this.validatePos("outside")&&(this.setImagePos(0,0,"init"),this.validatePos(),this.updateEdges()),document.removeEventListener("mousemove",this.imageMid.moveListener),this.texts.forEach(function(t){return t.pointerEvents()})}},{key:"drag",value:function(t){var e=(0,d.cursorPoint)(this.svg,t);e.x-=this.offset[0],e.y-=this.offset[1],this.setImagePos(e.x,e.y),this.validatePos("outside"),this.updateEdges(),this.eventBubble("canvas:moveimage",{c:this,x:e.x,y:e.y})}},{key:"setImagePos",value:function(t,e,i){this.imageX=t-(i?this.scaleOffset.x:0),this.imageY=e-(i?this.scaleOffset.y:0),this.imageTranslateGroup.setAttribute("transform","translate("+this.imageX+", "+this.imageY+")"),this.validatePos()}},{key:"validatePos",value:function(t){if(this.hasImage){var e=this.totalGroup.getCTM().inverse(),i=this.imageMid.getCTM(),n=[(0,d.point)(this.x,this.y),(0,d.point)(this.x+this.width,this.y),(0,d.point)(this.x+this.width,this.y+this.height),(0,d.point)(this.x,this.y+this.height)];if(this.wrapStyle===c.WRAP_STYLE.GALLERY){var o=c.CFG.CANVAS_EDGE_SIZE;n[0].x-=o,n[0].y-=o,n[1].x+=o,n[1].y-=o,n[2].x+=o,n[2].y+=o,n[3].x-=o,n[3].y+=o}for(var r=this.imageMid.getBBox(),a=r.width,s=r.height,l=this.svg,u=[w(0,0),w(a,0),w(a,s),w(0,s)],p=Array(u.length).fill(0),h=0;h<u.length;h++)for(var f=u[h],v=u[h+1]||u[0],g=0;g<n.length;g++){var m=n[g];if((0,d.rotation)(f,v,m)<0){if(this.element.classList.add("pw-invalid-canvas"),!t)return this.valid=!1,this.focused&&this.eventBubble("canvas:invalid"),!1;p[g]++}}return t||(this.valid=!0,this.focused&&this.eventBubble("canvas:valid")),p.every(function(t){return!t})&&this.element.classList.remove("pw-invalid-canvas"),!t||p.filter(function(t){return!!t}).length>3}function w(t,n){var o=l.createSVGPoint();return o.x=t,o.y=n,o.matrixTransform(e.multiply(i))}}},{key:"wrapStyle",get:function(){return this._wrapStyle},set:function(t){this._wrapStyle=t,this.mirrorWrap.setStyle("visibility",t===c.WRAP_STYLE.MIRROR?"visible":"hidden"),this.updateCoordinates(),this.validatePos()}},{key:"wrapColor",get:function(){return this._wrapColor},set:function(t){this._wrapColor=t,this.updateCoordinates()}},{key:"dpi",get:function(){return this.imageDimensions.width/(this.width*c.UNITS.MM_TO_INCH)/this.imageScale}},{key:"fileName",get:function(){return this.imageId+"."+this.extension}},{key:"imageOffset",get:function(){var t=this.imageTranslateGroup.getAttribute("transform").slice("transform(".length,-1).split(/[ ,]+/).map(function(t){return Number(t)});return[t[0],t[1]||0]}}]),e}();e.Canvas=h},function(t,e){t.exports='<svg class="composer wow-canvas-fc" viewBox="0 0 800 600" preserveAspectRatio=xMidYMid version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink> <g class=total-group></g> </svg> '},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Composer=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=i(29),s=(n=a)&&n.__esModule?n:{default:n},l=i(28),c=i(0),d=i(2);var u=c.CFG.COMPOSER_MARGIN,p=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default,"svg"));return n.id=(0,c.uid)(),n.canvases=[],n.totalGroup=n.qs(".total-group"),n.svg=(0,c.toEl)(n.element),n.splitImage=i,n.canvas=void 0,n.viewBox={x:0,y:0,width:0,height:0},n.tightViewBox=n.viewBox,function(t,e){var i={x:0,y:0,width:0,height:0},n=0,o=0;e.forEach(function(e){t.canvases.push(new l.Canvas(e[0],e[1],e[2],e[3]).appendTo(t.totalGroup)),n=Math.max(n,e[2]),o=Math.max(o,e[3]),i.x=Math.min(i.x,e[0]),i.y=Math.min(i.y,e[1]),i.width=Math.max(i.width,-i.x+e[0]+e[2]),i.height=Math.max(i.height,-i.y+e[1]+e[3])}),t.tightViewBox=i,t.viewBox=function(t){return(t=Object.assign({},t)).x-=u,t.y-=u,t.width+=2*u,t.height+=2*u,t}(i),t.largestCanvasDimensions={width:n,height:o}}(n,t),n.updateViewBox(),n.addHandler("canvas:focus",function(t){return n.selectCanvas(t.detail)}),n.addHandler("click",function(t){return n.selectCanvas()}),i?(n.addHandler("canvas:setimage",function(t){return n.setSplitImages(t)}),n.addHandler("canvas:moveimage",function(t){return n.moveSplitImages(t)}),d.store.minDimensions.width=n.tightViewBox.width,d.store.minDimensions.height=n.tightViewBox.height):(d.store.minDimensions.width=n.largestCanvasDimensions.width,d.store.minDimensions.height=n.largestCanvasDimensions.height),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),o(e,[{key:"selectCanvas",value:function(t){this.canvases.forEach(function(e){return e!==t&&e.blur()}),this.canvas=t}},{key:"scaleCanvas",value:function(t){(this.canvas||this.splitImage)&&(t=1.01+t/50,(this.splitImage?this.canvases:[this.canvas]).forEach(function(e){e.imageScale=t,e.updateRotationAndScale().updateEdges().validatePos()}))}},{key:"rotateCanvas",value:function(t){(this.canvas||this.splitImage)&&(this.splitImage?this.canvases:[this.canvas]).forEach(function(e){e.imageRotation+=t,e.updateRotationAndScale().updateEdges().validatePos()})}},{key:"setSplitImages",value:function(t){var e=this,i=t.detail;this.canvases.forEach(function(t){t.setImage({id:i.imageId,src:i.imageSrc,dimensions:i.imageDimensions}).then(function(n){var o=Math.max(e.tightViewBox.width/i.screenImageWidth,e.tightViewBox.height/i.screenImageHeight)+.01;n.transform(-t.x-1,-t.y-1,i.imageRotation,o)})})}},{key:"moveSplitImages",value:function(t){var e=t.detail.c,i=t.detail.x,n=t.detail.y;this.canvases.filter(function(t){return t!==e}).forEach(function(t){t.setImagePos(i+e.x-t.x,n+e.y-t.y),t.updateEdges()})}},{key:"updateViewBox",value:function(t){t=t||this.viewBox,this.svg.setAttr("viewBox",t.x+" "+t.y+" "+t.width+" "+t.height)}},{key:"clearImage",value:function(t){this.canvases.forEach(function(e){return e.clearImage(t)})}},{key:"initCanvases",value:function(){return this.canvases.forEach(function(t){return t.init()}),this}},{key:"setWrap",value:function(t){return this.canvases.forEach(function(e){e.wrapStyle=t,e.validatePos()}),this}}]),e}();e.Composer=p},function(t,e){t.exports="<div class=pw-zoom> <div class=wp-zoom-label></div> <div class=slide-container> <input id=zoom type=range min=1 max=100 value=50 class=slider name=slider> </div> </div> "},function(t,e){t.exports="<div class=pw-img-thumb-wrap> <div class=pw-img-thumb> <div class=pw-delete></div> <div class=pw-progress> <div class=pw-progress-done></div> </div> </div> </div> "},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Thumb=void 0;var n,o=i(32),r=(n=o)&&n.__esModule?n:{default:n},a=i(1),s=i(0),l=i(2);var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.default));return i.body=i.qs(".pw-img-thumb"),i.progressEl=(0,s.toEl)(i.qs(".pw-progress")),i.body.insertBefore(t.smallThumb,i.progressEl.element),i.id=t.id,i.name=t.name,i.progressDone=(0,s.toEl)(i.qs(".pw-progress-done")),t.progress.progressFn=function(t){return i.progressDone.setStyle("width",Math.round(100*t)+"%")},t.progress.promise.then(function(t){return i.progressDone.addClass("pw-upload-done")}).catch(function(e){i.eventBubble("fileError",{name:t.name,error:"uploadFailed"}),i.remove(),l.store.removeImg(t.id)}),i.addHandler("dragstart",function(t){t.dataTransfer.setData("text/plain",i.id)}),i.qs(".pw-delete").addEventListener("click",function(t){i.eventBubble("image:remove",i)}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),e}();e.Thumb=c},function(t,e,i){var n;!function(o){"use strict";function r(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function a(t,e,i,n,o,a){return r((s=r(r(e,t),r(n,a)))<<(l=o)|s>>>32-l,i);var s,l}function s(t,e,i,n,o,r,s){return a(e&i|~e&n,t,e,o,r,s)}function l(t,e,i,n,o,r,s){return a(e&n|i&~n,t,e,o,r,s)}function c(t,e,i,n,o,r,s){return a(e^i^n,t,e,o,r,s)}function d(t,e,i,n,o,r,s){return a(i^(e|~n),t,e,o,r,s)}function u(t,e){var i,n,o,a,u;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var p=1732584193,h=-271733879,f=-1732584194,v=271733878;for(i=0;i<t.length;i+=16)n=p,o=h,a=f,u=v,h=d(h=d(h=d(h=d(h=c(h=c(h=c(h=c(h=l(h=l(h=l(h=l(h=s(h=s(h=s(h=s(h,f=s(f,v=s(v,p=s(p,h,f,v,t[i],7,-680876936),h,f,t[i+1],12,-389564586),p,h,t[i+2],17,606105819),v,p,t[i+3],22,-1044525330),f=s(f,v=s(v,p=s(p,h,f,v,t[i+4],7,-176418897),h,f,t[i+5],12,1200080426),p,h,t[i+6],17,-1473231341),v,p,t[i+7],22,-45705983),f=s(f,v=s(v,p=s(p,h,f,v,t[i+8],7,1770035416),h,f,t[i+9],12,-1958414417),p,h,t[i+10],17,-42063),v,p,t[i+11],22,-1990404162),f=s(f,v=s(v,p=s(p,h,f,v,t[i+12],7,1804603682),h,f,t[i+13],12,-40341101),p,h,t[i+14],17,-1502002290),v,p,t[i+15],22,1236535329),f=l(f,v=l(v,p=l(p,h,f,v,t[i+1],5,-165796510),h,f,t[i+6],9,-1069501632),p,h,t[i+11],14,643717713),v,p,t[i],20,-373897302),f=l(f,v=l(v,p=l(p,h,f,v,t[i+5],5,-701558691),h,f,t[i+10],9,38016083),p,h,t[i+15],14,-660478335),v,p,t[i+4],20,-405537848),f=l(f,v=l(v,p=l(p,h,f,v,t[i+9],5,568446438),h,f,t[i+14],9,-1019803690),p,h,t[i+3],14,-187363961),v,p,t[i+8],20,1163531501),f=l(f,v=l(v,p=l(p,h,f,v,t[i+13],5,-1444681467),h,f,t[i+2],9,-51403784),p,h,t[i+7],14,1735328473),v,p,t[i+12],20,-1926607734),f=c(f,v=c(v,p=c(p,h,f,v,t[i+5],4,-378558),h,f,t[i+8],11,-2022574463),p,h,t[i+11],16,1839030562),v,p,t[i+14],23,-35309556),f=c(f,v=c(v,p=c(p,h,f,v,t[i+1],4,-1530992060),h,f,t[i+4],11,1272893353),p,h,t[i+7],16,-155497632),v,p,t[i+10],23,-1094730640),f=c(f,v=c(v,p=c(p,h,f,v,t[i+13],4,681279174),h,f,t[i],11,-358537222),p,h,t[i+3],16,-722521979),v,p,t[i+6],23,76029189),f=c(f,v=c(v,p=c(p,h,f,v,t[i+9],4,-640364487),h,f,t[i+12],11,-421815835),p,h,t[i+15],16,530742520),v,p,t[i+2],23,-995338651),f=d(f,v=d(v,p=d(p,h,f,v,t[i],6,-198630844),h,f,t[i+7],10,1126891415),p,h,t[i+14],15,-1416354905),v,p,t[i+5],21,-57434055),f=d(f,v=d(v,p=d(p,h,f,v,t[i+12],6,1700485571),h,f,t[i+3],10,-1894986606),p,h,t[i+10],15,-1051523),v,p,t[i+1],21,-2054922799),f=d(f,v=d(v,p=d(p,h,f,v,t[i+8],6,1873313359),h,f,t[i+15],10,-30611744),p,h,t[i+6],15,-1560198380),v,p,t[i+13],21,1309151649),f=d(f,v=d(v,p=d(p,h,f,v,t[i+4],6,-145523070),h,f,t[i+11],10,-1120210379),p,h,t[i+2],15,718787259),v,p,t[i+9],21,-343485551),p=r(p,n),h=r(h,o),f=r(f,a),v=r(v,u);return[p,h,f,v]}function p(t){var e,i="",n=32*t.length;for(e=0;e<n;e+=8)i+=String.fromCharCode(t[e>>5]>>>e%32&255);return i}function h(t){var e,i=[];for(i[(t.length>>2)-1]=void 0,e=0;e<i.length;e+=1)i[e]=0;var n=8*t.length;for(e=0;e<n;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i}function f(t){var e,i,n="";for(i=0;i<t.length;i+=1)e=t.charCodeAt(i),n+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return n}function v(t){return unescape(encodeURIComponent(t))}function g(t){return function(t){return p(u(h(t),8*t.length))}(v(t))}function m(t,e){return function(t,e){var i,n,o=h(t),r=[],a=[];for(r[15]=a[15]=void 0,o.length>16&&(o=u(o,8*t.length)),i=0;i<16;i+=1)r[i]=909522486^o[i],a[i]=1549556828^o[i];return n=u(r.concat(h(e)),512+8*e.length),p(u(a.concat(n),640))}(v(t),v(e))}function w(t,e,i){return e?i?m(e,t):f(m(e,t)):i?g(t):f(g(t))}void 0===(n=function(){return w}.call(e,i,e,t))||(t.exports=n)}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uploadImg=void 0;var n=i(2);e.uploadImg=function(t,e){var i={progressFn:function(){},promise:null};return i.promise=new Promise(function(o,r){var a=new FormData;a.append(e,t);var s=new XMLHttpRequest,l=n.store.serverURL+"/upload";s.addEventListener("load",function(t){return o(t)}),s.addEventListener("error",function(t){return o(t)}),s.addEventListener("progress",function(t){t.lengthComputable&&i.progressFn(t.loaded/t.total)}),s.open("POST",l,!0),s.send(a)}),i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=2;e.createThumb=function(t,e){return new Promise(function(i){function o(){t.removeEventListener("load",o);var n=document.createElement("canvas"),r=n.getContext("2d"),a=document.createElement("img");a.src=t.result,a.addEventListener("load",function(){var t=Math.min(1,e/Math.max(a.width,a.height)),o=t<.7?function(t,e){var i=document.createElement("canvas"),n=i.getContext("2d");return i.width=t.width,i.height=t.height,n.filter="blur("+Math.round(1/e/3)+"px)",n.drawImage(t,0,0),n.filter="none",i}(a,t):a;n.width=Math.floor(a.width*t),n.height=Math.floor(a.height*t),r.drawImage(o,0,0,n.width,n.height),i(n.toDataURL()),a=null})}t.readyState===n?o():t.addEventListener("load",o,!1)})},e.getDimensions=function(t){return new Promise(function(e){var i=URL.createObjectURL(t),n=new Image;n.onload=function(){e({width:n.width,height:n.height})},n.src=i})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleFile=void 0;var n,o=i(36),r=i(35),a=i(0),s=i(2),l=i(34),c=(n=l)&&n.__esModule?n:{default:n};e.handleFile=function(t){var e=5*s.store.minDimensions.width,i=5*s.store.minDimensions.height;return new Promise(function(n,l){if(t){if(t.size/1024/1024>9)return void l({error:"imageTooBig",name:t.name});var d=new FileReader;d.addEventListener(a.EVENTS.LOAD_END,function(){var u,p,h;(u=new Uint8Array(d.result),p=[255,216,255],h=[137,80,78,71,13,10,26,10],u.slice(0,3).every(function(t,e){return t===p[e]})||u.every(function(t,e){return t===h[e]}))?((0,a.uid)(),(d=new FileReader).readAsDataURL(t),Promise.all([(0,o.createThumb)(d,a.CFG.THUMB_SIZE_SMALL),(0,o.createThumb)(d,a.CFG.THUMB_SIZE_BIG),(0,o.getDimensions)(t)]).then(function(o){var d=o[2];if(d.width<e||d.height<i)l({error:"imageTooSmall",name:t.name,min:{width:e,height:i},dimensions:d});else{var u=(0,c.default)(o[0]),p={id:u,extension:t.name.split(".").pop(),name:t.name,smallThumbSrc:o[0],bigThumbSrc:o[1],smallThumb:(0,a.createEl)("img").setAttr("src",o[0]).setAttr("draggable",!0).el,bigThumb:(0,a.createEl)("img").setAttr("src",o[1]).setAttr("draggable",!0).el,dimensions:o[2]};s.store.images.some(function(t){return t.id===u})?l({error:"alreadyUploaded",name:t.name}):(p.progress=(0,r.uploadImg)(t,u),s.store.images.push(p),n(p))}})):l({error:"invalidFile",name:t.name})}),d.readAsArrayBuffer(t.slice(0,8))}else l({error:"noFile"})})}},function(t,e){t.exports='<div class=drop-zone> <div class=pw-file> <label class=pw-file-label for=pw-file-input> <input id=pw-file-input class=pw-file-input type=file multiple=multiple accept=.png,.jpg,.jpeg /> <button class="pw-btn pw-btn-strong pw-file-button">Upload Images</button> <div class=pw-drop-max-reached></div> <div class=pw-drop-help></div> </label> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileDropZone=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(38),a=(n=r)&&n.__esModule?n:{default:n},s=i(1),l=i(37),c=i(0),d=i(33);var u="drag-over",p=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return document.body.addEventListener(c.EVENTS.MOUSE_UP,function(){t.removeClass(u)}),t.addHandler(c.EVENTS.DRAG_OVER,function(){return t.addClass(u)}),t.addHandler(c.EVENTS.DRAG_LEAVE,function(){return t.removeClass(u)}),t.modal=void 0,t.helpText=t.qs(".pw-drop-help"),t.maxReachedText=t.qs(".pw-drop-max-reached"),t.fileInput=t.qs(".pw-file-input"),t.fileButton=t.qs(".pw-file-button"),t.fileButton.addEventListener("click",function(e){t.qs(".pw-file-input").click()}),t.fileInput.addEventListener("input",function(e){Array.from(t.fileInput.files).forEach(function(e){return(0,l.handleFile)(e).then(h.bind(t)).catch(function(e){return t.handleError(e)})}),t.fileInput.value=""}),t.maxReachedText.innerHTML="You reached the maximum of "+c.CFG.MAX_IMAGES+" images. Please remove some before uploading new ones",t.update(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"update",value:function(){var t=this.qsAll(".pw-img-thumb-wrap").length;this.count=t,this.helpText.classList[t?"add":"remove"]("has-files"),this.helpText.innerHTML=c.CFG.HTML_INFO_ICON+"<br>"+(t?"<label>Drag an image onto a canvas</label>":"<label>or Drag & Drop<br>image files here</label>"),t>=c.CFG.MAX_IMAGES?(this.fileButton.setAttribute("disabled","disabled"),this.maxReachedText.style.display="block"):(this.fileButton.removeAttribute("disabled"),this.maxReachedText.style.display="none")}},{key:"drop",value:function(t){var e=this;if(this.eventBubble("image:add"),this.removeClass("drag-over"),t.preventDefault(),!this.modal||!this.modal.isOpen)if(t.dataTransfer.items){for(var i=0;i<t.dataTransfer.items.length;i++)if("file"===t.dataTransfer.items[i].kind&&!t.dataTransfer.getData("text/plain")){var n=t.dataTransfer.items[i].getAsFile();(0,l.handleFile)(n).then(h.bind(this)).catch(function(t){return e.handleError(t)})}t.dataTransfer.items.clear()}else for(var o=0;o<t.dataTransfer.files.length;o++)(0,l.handleFile)(t.dataTransfer.files[o]).then(h.bind(this)).catch(function(t){return e.handleError(t)})}},{key:"handleError",value:function(t){this.eventBubble("fileError",t)}}]),e}();function h(t){if(this.count++,this.count>c.CFG.MAX_IMAGES)this.handleError({error:"maxReached"});else{var e=new d.Thumb(t);this.append(e),this.update()}}e.FileDropZone=p},function(t,e){t.exports='<div> <link id=google-fonts href="https://fonts.googleapis.com/css?family=Fjalla+One|Fredericka+the+Great|Kaushan+Script|Meddon|MedievalSharp|Metal+Mania|Pacifico|Passion+One|Patua+One|Rubik+Mono+One" rel=stylesheet> <style>.wow-canvas .slide-container{flex:1 1 auto}.wp-zoom-label{margin:0 10px;flex:0 1 auto;color:#000}.pw-zoom{margin-top:7px;display:flex;flex-direction:row}.wow-canvas .slider{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;height:15px;background:#d3d3d3;outline:0;opacity:.85;-webkit-transition:.2s;transition:opacity .2s}.wow-canvas .slider:hover{opacity:1}.wow-canvas .slider:disabled{opacity:.3}.wow-canvas .slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#252839;border:1px solid #191b27;cursor:pointer}.wow-canvas .slider::-moz-range-thumb{width:25px;height:25px;background:#252839;border:1px solid #191b27;cursor:pointer}.wow-canvas *{box-sizing:border-box}.wow-canvas-fc{display:flex;flex-direction:column}.wow-canvas{height:85vh;position:relative;border:1px solid #d3d3d3;font-family:Montserrat,HelveticaNeue,"Helvetica Neue",sans-serif;font-size:14px;font-weight:400;background:#fdfdfd}.wow-canvas-top{flex:1 1 auto}.wow-canvas-top-wrapper{flex:1;display:flex}.wow-canvas-main{border-right:1px solid #eee;flex:1 1 auto}.wow-canvas-toolbar{flex:0 1 20%}.wow-canvas-header{flex:0 0 60px;display:flex;flex-direction:row}.wow-canvas-header .header-step{flex:0 1 25%}.wow-canvas-header .header-step-small{flex:0 1 10%}.wow-canvas-body{flex:1 1 auto;position:relative}.wow-canvas-header{border-bottom:1px solid #eee}.wow-canvas-footer{display:flex;flex-direction:row}.c-footer{flex:0 0 100px;display:flex;flex-direction:column;background:#f3b631;border-top:1px solid #eee}.pw-footer{flex:0 1 auto;margin:10px}.pw-footer-mid{flex:0 1 30%}.wow-canvas .drop-zone{flex:1 1 auto;overflow:auto}.wow-canvas .drag-over{border-color:#fff}.wow-canvas .drop-zone-empty::after{display:block;width:100%;margin:50% 0;text-align:center;content:\'Drop Images Here\'}.wow-canvas .composer{z-index:1;position:absolute;flex:1 1 auto;width:100%;height:100%}.pw-progress{background:#d3d3d3}.pw-upload-done{background:#fff!important;width:100%!important}.pw-progress-done{transition:all .5s ease;width:3px;height:5px;background:#5c86d7}svg .text-wrap{overflow:hidden;text-align:center;tab-index:-1}.pw-svg-icon{font-family:Roboto,sans-serif;font-weight:600;font-size:15px}svg .text-input,text{white-space:nowrap;font-family:Arial,sans-serif;font-size:32px;line-height:38px}svg .text-input{box-sizing:border-box;outline:0;border:1px solid #20b2aa;background:rgba(0,0,0,.1);display:inline-block;min-width:10px}svg .pw-fo{visibility:hidden;pointer-events:none}svg .pw-fo.pw-fo-active{visibility:visible;pointer-events:auto}svg .text-hidden{visibility:hidden}svg text{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}svg text::selection{background:0 0}.pw-canvas .delete-icon,.pw-canvas .edit-icon,.pw-canvas .resize-icon,.pw-canvas .rotate-icon{visibility:hidden}.pw-canvas .text-rect{pointer-events:none}.pw-canvas .canvas-text-focus .delete-icon,.pw-canvas .canvas-text-focus .resize-icon,.pw-canvas .canvas-text-focus .rotate-icon,.pw-canvas.pw-focus .edit-icon{visibility:visible;cursor:pointer}.canvas-text.canvas-text-focus .test-rect{stroke-width:2px;stroke:#1e90ff!important}.img-main{cursor:move}.pw-canvas.pw-focus .test-rect{stroke:#0ff;cursor:pointer}.pw-canvas.pw-focus .text-rect{pointer-events:auto}.canvas-edge{stroke:rgba(125,125,125,.5)}.pw-canvas{box-shadow:#4caf50}.pw-focus .canvas-edge{stroke:#ff0}.canvas-effect{filter:url(#f3)}.pw-focus .canvas-effect{filter:none}.highlight-poly{fill:url(#edgehighlight)}.pw-focus .highlight-poly{visibility:hidden}.pw-img-thumb-wrap{margin:10px;width:80%;margin-left:10%;text-align:center;position:relative}.pw-img-thumb img{position:relative;display:block;width:100%}.pw-file-input{width:0!important;height:0!important;overflow:hidden!important;display:none!important}.drop-zone .pw-file-label{width:0;height:0}.pw-file{padding:10px 10px 0 10px}.pw-drop-help{color:gray;text-align:center;margin-top:50%;padding:5px}.pw-drop-icon{display:inline-block}.pw-icon-info{background-size:contain;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYwIiB3aWR0aD0iMTYwIiB2ZXJzaW9uPSIxLjAiPiAgICA8ZyBmaWxsPSIjNGI0YjRiIj4gICAgICAgIDxwYXRoIGQ9Im04MCAxNWMtMzUuODggMC02NSAyOS4xMi02NSA2NXMyOS4xMiA2NSA2NSA2NSA2NS0yOS4xMiA2NS02NS0yOS4xMi02NS02NS02NXptMCAxMGMzMC4zNiAwIDU1IDI0LjY0IDU1IDU1cy0yNC42NCA1NS01NSA1NS01NS0yNC42NC01NS01NSAyNC42NC01NSA1NS01NXoiLz4gICAgICAgIDxwYXRoIGQ9Im01Ny4zNzMgMTguMjMxYTkuMzgzNCA5LjExNTMgMCAxIDEgLTE4Ljc2NyAwIDkuMzgzNCA5LjExNTMgMCAxIDEgMTguNzY3IDB6IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjE5ODkgMCAwIDEuMjM0MiAyMS4yMTQgMjguNzUpIi8+ICAgICAgICA8cGF0aCBkPSJtOTAuNjY1IDExMC45NmMtMC4wNjkgMi43MyAxLjIxMSAzLjUgNC4zMjcgMy44Mmw1LjAwOCAwLjF2NS4xMmgtMzkuMDczdi01LjEybDUuNTAzLTAuMWMzLjI5MS0wLjEgNC4wODItMS4zOCA0LjMyNy0zLjgydi0zMC44MTNjMC4wMzUtNC44NzktNi4yOTYtNC4xMTMtMTAuNzU3LTMuOTY4di01LjA3NGwzMC42NjUtMS4xMDUiLz4gICAgPC9nPjwvc3ZnPg==)}.pw-icon-info-svg{fill:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYwIiB3aWR0aD0iMTYwIiB2ZXJzaW9uPSIxLjAiPiAgICA8ZyBmaWxsPSIjNGI0YjRiIj4gICAgICAgIDxwYXRoIGQ9Im04MCAxNWMtMzUuODggMC02NSAyOS4xMi02NSA2NXMyOS4xMiA2NSA2NSA2NSA2NS0yOS4xMiA2NS02NS0yOS4xMi02NS02NS02NXptMCAxMGMzMC4zNiAwIDU1IDI0LjY0IDU1IDU1cy0yNC42NCA1NS01NSA1NS01NS0yNC42NC01NS01NSAyNC42NC01NSA1NS01NXoiLz4gICAgICAgIDxwYXRoIGQ9Im01Ny4zNzMgMTguMjMxYTkuMzgzNCA5LjExNTMgMCAxIDEgLTE4Ljc2NyAwIDkuMzgzNCA5LjExNTMgMCAxIDEgMTguNzY3IDB6IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjE5ODkgMCAwIDEuMjM0MiAyMS4yMTQgMjguNzUpIi8+ICAgICAgICA8cGF0aCBkPSJtOTAuNjY1IDExMC45NmMtMC4wNjkgMi43MyAxLjIxMSAzLjUgNC4zMjcgMy44Mmw1LjAwOCAwLjF2NS4xMmgtMzkuMDczdi01LjEybDUuNTAzLTAuMWMzLjI5MS0wLjEgNC4wODItMS4zOCA0LjMyNy0zLjgydi0zMC44MTNjMC4wMzUtNC44NzktNi4yOTYtNC4xMTMtMTAuNzU3LTMuOTY4di01LjA3NGwzMC42NjUtMS4xMDUiLz4gICAgPC9nPjwvc3ZnPg==)}.pw-icon{width:32px;height:32px}.pw-drop-help.has-files{margin-top:10px}.pw-file-button{padding:10px!important;width:100%;box-sizing:border-box;display:block}.pw-delete{position:absolute;z-index:1;background:#252839;border:1px solid #191b27;border-radius:3px;width:20px;height:20px;line-height:18px;top:5px;cursor:pointer;font-size:20px;color:#eee;text-align:center;font-weight:900;right:5px}.pw-delete:hover{background:#353951;border:1px solid #262a3c;color:#fff}.pw-delete:active{background:#252839;border:1px solid #191b27;color:#fff}.pw-delete::after{content:\'×\'}.canvas-outline{stroke:#d3d3d3}.pw-canvas.pw-focus .canvas-outline{stroke:#20b2aa;stroke-width:3px}.pw-canvas .canvas-text,.pw-canvas .canvas-wrap{clip-path:url(#preview)}.pw-canvas.pw-focus .canvas-text,.pw-canvas.pw-focus .canvas-wrap{clip-path:url(#text-crop)}.pw-canvas.pw-invalid-canvas .canvas-edge{stroke:red;stroke-width:3px}.pw-btn{font-family:Montserrat,HelveticaNeue,"Helvetica Neue",sans-serif;font-size:14px;border-radius:3px;padding:8px 10px;cursor:pointer;background:#252839;border:1px solid #191b27;color:#fff}.pw-btn:hover{background:#363a53;border:1px solid #262a3d}.pw-btn:active{background:#252839;border:1px solid #191b27}.pw-btn:disabled{background:#ececec;border:1px solid #d3d3d3;color:gray}.pw-btn-strong{border-width:2px!important;font-size:18px}.pw-btn-cart{position:relative;top:-30px;padding:20px}.pw-btn-cart:disabled:hover::before{position:absolute;width:250px;left:-280px;bottom:-2px;top:-1px;z-index:200;text-align:left;padding:10px;font-size:13px;border-radius:3px;font-weight:300;background:#dc143c;color:#fff;content:\'Please make sure all canvases have images and are fully covered\'}.pw-btn.pw-btn-danger{background:#db5951;border:1px solid #b13b36}.pw-btn.pw-btn-danger:hover{background:#f06259;border:1px solid #d34640}.pw-btn.pw-btn-danger:active{background:#c24f48;border:1px solid #9b342f}.pw-btn-wide{width:100%}.pw-drop-max-reached{margin-top:10px;font-size:12px;color:grey}.pw-modal-wrap{position:absolute;top:0;left:0;right:0;bottom:0;z-index:10;display:none}.pw-modal-wrap.pw-modal-wrap-open{display:initial}.pw-modal-window-wrap{background:rgba(255,255,255,.5);top:0;left:0;right:0;bottom:0;position:relative;display:flex;align-items:center;justify-content:center;height:100%}.pw-modal-window{max-width:50%;position:relative;background:#fff;border:1px solid #d3d3d3;box-shadow:2px 2px 20px 0 rgba(0,0,0,.25)}.pw-modal-content{min-width:300px;min-height:100px;padding:50px 50px;font-size:16px;font-weight:300;color:gray}.pw-modal-content strong{color:#dc143c}.pw-modal-btn-container{border-top:1px solid #d3d3d3;padding:10px}.aligner-item--top{align-self:flex-start}.aligner-item--bottom{align-self:flex-end}.pw-float-right{float:right}.pw-text-formatter{flex:1 1 auto;overflow-x:hidden;overflow-y:auto;padding:15px}@keyframes slide{from{margin-left:-20px;opacity:0}to{margin-left:0;opacity:1}}@keyframes slide-back{from{margin-left:0;opacity:1}to{margin-left:-20px;opacity:0}}.pw-help-hide{animation-name:slide-back;animation-duration:.3s;animation-fill-mode:forwards}.pw-help-show{animation-name:slide;animation-duration:.3s}.pw-hide{display:none!important}.pw-space{margin-bottom:10px}.pw-help{color:#000;font-weight:600;flex:0 1 auto;padding:5px;border-top:1px solid #eee}.pw-help::before{content:\'i\';font-weight:600;color:#000;padding:0 7px;margin-right:5px;border-radius:50%;border:1px solid #000}.hex-input{margin-left:5px;width:110px;border:1px solid #d3d3d3;padding:5px;outline:0;font-size:18px}.cp-invalid{border:1px solid red}.nomouse{pointer-events:none}.cp-col{width:49%}.clearfix::after{content:"";clear:both;display:table}.color-display{border:1px solid #d3d3d3;width:107px;height:30px;background:red;float:right}.pw-select{padding:5px;border:1px solid #d3d3d3;font-weight:700}.pw-footer-right{flex:1 1 auto;text-align:right}.wow-canvas label{display:initial}.wrap-color-wrap{padding:10px}</style> <div class="wow-canvas wow-canvas-fc"> <div class="wow-canvas-top wow-canvas-fc"> <div class=wow-canvas-top-wrapper> <div class="wow-canvas-main wow-canvas-fc"> <div class=wow-canvas-header></div> <div class="wow-canvas-body wow-canvas-fc"></div> </div> <div class="wow-canvas-toolbar wow-canvas-fc"> <div class="wow-canvas-body wow-canvas-fc"></div> </div> </div> </div> <div class=c-footer> <div class=pw-help></div> <div class=wow-canvas-footer> <div class="pw-footer pw-footer-left"></div> <div class="pw-footer pw-footer-mid"></div> <div class="pw-footer pw-footer-right"> <button class="pw-btn pw-btn-strong pw-btn-cart" disabled=disabled>Add to Cart</button> </div> </div> </div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(40),a=(n=r)&&n.__esModule?n:{default:n},s=i(1),l=i(39),c=i(5),d=i(30),u=i(20),p=i(18),h=i(2),f=i(0),v=i(16),g=i(12),m=i(11),w=i(9),b=i(7),y=i(6),x=i(4);var C=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default)),i=t.qs("#google-fonts").getAttribute("href");return h.store.fontFaces=i.slice(i.indexOf("family=")+7).split("|").map(function(t){return t.split("+").join(" ")}),t.toolbarBody=t.qs(".wow-canvas .wow-canvas-toolbar .wow-canvas-body"),t.footer=t.qs(".wow-canvas-footer"),t.footerLeft=t.qs(".pw-footer-left"),t.footerMid=t.qs(".pw-footer-mid"),t.footerRight=t.qs(".pw-footer-right"),t.help=(0,f.toEl)(t.qs(".pw-help")),t.cartBtn=(0,f.toEl)(t.qs(".pw-btn-cart")),t.fileDropper=(new l.FileDropZone).appendTo(t.toolbarBody).addHandler("image:remove",function(e){h.store.modal.open({danger:!0,btnText:"Remove",html:"Really remove <strong>"+e.detail.name+"</strong> from the editor?"}).then(function(){e.detail.remove(),t.composer.clearImage(e.detail.id),h.store.removeImg(e.detail.id),t.fileDropper.update(),t.updateControls()})}).addHandler("image:add",function(e){t.focusedCanvas&&t.focusedCanvas.blur()}),t.addHandler("drop",function(e){return t.fileDropper.drop(e)}),t.addHandler("dragover",function(t){return t.preventDefault()}),t.wrap=t.qs(".wow-canvas"),t.mainBody=t.qs(".wow-canvas .wow-canvas-main .wow-canvas-body"),t.mainHeader=t.qs(".wow-canvas .wow-canvas-main .wow-canvas-header"),t.slider=new c.Slider("scale").appendTo(t.footerMid).addHandler("input",function(e){return t.composer.scaleCanvas(e.target.value)}),t.rotater=(new u.Rotater).appendTo(t.footerLeft).addHandler("input",function(e){return t.composer.rotateCanvas(e.target.value)}),t.composer=new d.Composer([[0,0,350,300]],!1).appendTo(t.mainBody).addHandler("canvas:focus",function(e){t.slider.setVal(e.detail.imageScale),t.focusedCanvas=e.detail,t.textFormatter.canvas=t.focusedCanvas,t.update()}).addHandler("canvas:blur",function(e){setTimeout(function(){e.detail===t.focusedCanvas&&(t.focusedCanvas=void 0,t.update())},10)}).addHandler("canvas:invalid",function(e){t.cartEnabled=!1,t.cartBtn.setAttr("disabled","true"),t.help.blip("The Image doesn't cover the canvas!")}).addHandler("canvas:valid",function(e){t.cartEnabled=t.composer.canvases.every(function(t){return t.hasImage&&t.valid}),t.cartBtn.setAttr("disabled",!t.cartEnabled||null),t.help.blip()}),t.modal=(new p.Modal).appendTo(t.wrap),t.fileDropper.modal=t.modal,t.textFormatter=(new v.TextFormatter).appendTo(t.toolbarBody).addHandler("textFormatter:exit",function(e){t.focusedCanvas&&t.focusedCanvas.blur()}).addHandler("textFormatter:addText",function(e){t.focusedCanvas&&t.focusedCanvas.addText(t.textFormatter)}),t.addHandler("canvasText:focus",function(e){return t.textFormatter.setEnabled(!0).setFormat(e.detail)}),t.addHandler("canvasText:blur",function(e){return t.textFormatter.setEnabled(!1)}),t.addHandler("fileError",function(t){return g.ErrorDisplay.display(t)}),t.wrapChooser=(new m.WrapChooser).appendTo(t.mainHeader).addClass("header-step-small").addHandler("wrap:change",function(e){t.composer.setWrap(e.detail),t.wrapColorInput.setStyle("visibility","color"===e.detail?"visible":"hidden")}),t.wrapColorInput=new x.ColorInput(t.composer.canvases[0].wrapColor).addClass("header-step").addClass("wrap-color-wrap").setStyle("visibility","hidden").appendTo(t.mainHeader).addHandler("colorInput:set",function(e){t.composer.canvases.forEach(function(t){return t.wrapColor=e.detail})}),t.finishChooser=(new w.FinishChooser).addClass("header-step").appendTo(t.mainHeader),t.cartBtn.addHandler("click",function(e){(0,b.exportComposition)(t.composer,t.finishChooser.value);(0,y.post)(h.store.serverURL+"/process",(0,b.exportComposition)(t.composer,t.finishChooser.value)).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})}),t.update(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"init",value:function(){this.composer.initCanvases()}},{key:"updateControls",value:function(){var t=!!this.focusedCanvas&&this.focusedCanvas.hasImage;return this.rotater.setEnabled(t),this.slider.setEnabled(t),this.help.blip(t?"":"Select a canvas with an image to rotate or scale"),this}},{key:"updateToolbar",value:function(){var t=this,e=this.focusedCanvas?"textFormatter":"fileDropper";return["textFormatter","fileDropper"].forEach(function(i){t[i][i===e?"show":"hide"]()}),this}},{key:"update",value:function(){this.updateControls().updateToolbar()}}]),e}();e.Editor=C},function(t,e,i){"use strict";var n=i(41),o=document.querySelector(".pw-canvas-maker");(new n.Editor).appendTo(o||document.body).init()}]);