!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=26)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o={DIV:"DIV",IMG:"IMG"},a={INPUT:"input",DRAG_OVER:"dragover",DRAG_LEAVE:"dragleave",MOUSE_UP:"mouseup",LOAD_END:"loadend"},r={MAX_IMAGES:10,THUMB_SIZE_SMALL:200,THUMB_SIZE_BIG:600,CANVAS_EDGE_SIZE:35,FAST_CLICK_WAIT:270,COMPOSER_MARGIN:50,CANVAS_DISTANCE:60,HTML_INFO_ICON:'<div class="pw-drop-icon pw-icon pw-icon-info"></div>'},s={MM_TO_INCH:.0393700787};Object.freeze(o),Object.freeze(a),Object.freeze(r),Object.freeze(s);var l=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element="string"==typeof e?document.createElement(e):e,this}return n(t,[{key:"innerHTML",value:function(t){return this.element.innerHTML=t,this}},{key:"setAttr",value:function(t,e){return this.element.setAttribute(t,e),this}},{key:"attr",value:function(t){return this.element.getAttribute(t)}},{key:"blip",value:function(t){if(t=t||"",this.element.innerHTML===t)return this;t=t||"&nbsp;";var e=this.element.cloneNode();return"&nbsp;"!==t?(e.innerHTML=t,e.classList.remove("pw-help-hide"),e.classList.add("pw-help-show")):(e.classList.remove("pw-help-show"),e.classList.add("pw-help-hide")),this.element.parentNode.replaceChild(e,this.element),this.element=e,this}},{key:"child",get:function(){return this.element.firstChild}},{key:"el",get:function(){return this.element}}]),t}();function c(t){return new l(t)}e.createEl=c,e.toEl=function(t){return c(t)},e.uid=function(){return window.btoa(Math.floor(1e5*Math.random())+String(new Date).valueOf().slice(-5)).slice(0,-2)},e.noop=function(){},e.now=function(){return(new Date).valueOf()},e.between=function(t,e,i){return Math.max(Math.min(t,i),e)},e.TAGS=o,e.EVENTS=a,e.UNITS=s,e.CFG=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(0);var a=function(){function t(e,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.innerHTML=e,this.element=n.firstChild}else this.element=(0,o.createEl)(o.TAGS.DIV).innerHTML(e).child;return this}return n(t,[{key:"remove",value:function(){this.element.remove()}},{key:"append",value:function(e){return this.element.appendChild(e instanceof t?e.element:e),this}},{key:"appendTo",value:function(e){return e instanceof t&&(e=e.element),e.appendChild(this.element),this}},{key:"on",value:function(t,e){return this.element.addEventListener(t,e),this}},{key:"addClass",value:function(t){this.element.classList.add(t)}},{key:"removeClass",value:function(t){return this.element.classList.remove(t),this}},{key:"hasClass",value:function(t){return this.element.classList.contains(t)}},{key:"addHandler",value:function(t,e){return this.element.addEventListener(t,e.bind(this)),this}},{key:"stdEventBubble",value:function(t){this.element.dispatchEvent(new Event(t))}},{key:"eventBubble",value:function(t,e){return this.element.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e})),this}},{key:"qs",value:function(t){return this.element.querySelector(t)}},{key:"qsAll",value:function(t){return this.element.querySelectorAll(t)}}]),t}();e.Component=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[],o={minDimensions:{width:800,height:600},images:n,getImg:function(t){return n.find(function(e){return e.id===t})}};e.store=o},function(t,e,i){"use strict";function n(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}Object.defineProperty(e,"__esModule",{value:!0}),e.killE=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},e.cursorPoint=function(t,e){var i=t.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i.matrixTransform(t.getScreenCTM().inverse())},e.matrixToAttr=function(t){return"matrix("+t.a+" "+t.b+" "+t.c+" "+t.d+" "+t.e+" "+t.f+")"},e.wrapWithRect=function(t,e){var i=t.getBBox();e.setAttribute("x",i.x),e.setAttribute("y",i.y),e.setAttribute("width",i.width),e.setAttribute("height",i.height)},e.getTranslate=function(t){var e=(t.getAttribute("transform")||"translate(0,0)").slice(10,-1).split(/[, ]+/).map(function(t){return parseInt(t)});return{x:e[0]||0,y:e[1]||0}},e.px=function(){return{on:function(t){return parseInt(t)+"px"},off:function(t){return parseInt(t.replace("px",""))}}},e.pointAngle=n,e.rotation=function(t,e,i){var o=n(t,e),a=n(t,i)-o;return a<-180?a+=360:a>180&&(a-=360),a},e.pointDistSq=function(t,e){var i=e.y-t.y,n=e.x-t.x;return i*i+n*n},e.point=function(t,e){return{x:t,y:e}}},function(t,e){t.exports='<div class=pw-modal-wrap> <div class=pw-modal-window-wrap> <div class=aligner-item--top></div> <div class=pw-modal-window> <div class=pw-delete></div> <div class=pw-modal-content> Really delete asd.png? </div> <div class=pw-modal-btn-container> <button class=pw-modal-close>Close</button> <button class="pw-modal-confirm pw-float-right"></button> </div> </div> <div class=aligner-item--bottom></div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(4),r=(n=a)&&n.__esModule?n:{default:n},s=i(1),l=i(2);var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.default));return l.store.modal=t,t.bg=t.qs(".pw-modal-window-wrap"),t.bg.addEventListener("click",t.close.bind(t)),t.closeIcon=t.qs(".pw-delete"),t.closeButton=t.qs(".pw-modal-close"),t.confirmButton=t.qs(".pw-modal-confirm"),t.contentArea=t.qs(".pw-modal-content"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"open",value:function(t){var e=this;return this.confirmButton.classList[t.danger?"add":"remove"]("pw-btn-danger"),this.contentArea.innerHTML=t.html,this.confirmButton.innerHTML=t.btnText||"Confirm",this.closeButton.style.visibility=t.btnText?"inherit":"hidden",this.addClass("pw-modal-wrap-open"),new Promise(function(t){e.confirmHandler=function(i){t(),e.close()},e.confirmButton.addEventListener("click",e.confirmHandler)})}},{key:"close",value:function(t){return t&&![this.bg,this.closeIcon,this.closeButton].includes(t.target)||this.removeClass("pw-modal-wrap-open"),this.confirmButton.removeEventListener("click",this.confirmHandler),this}},{key:"isOpen",get:function(){return this.hasClass("pw-modal-wrap-open")}}]),e}();e.Modal=c},function(t,e){t.exports="<div class=pw-rotate-buttons> <button id=pw-rotate-left data-value=-5>◄ Rotate left</button> <button id=pw-rotate-right data-value=5>Rotate right ►</button> </div>"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rotater=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),r=(n=a)&&n.__esModule?n:{default:n},s=i(1);var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.default));return t.left=t.qs("#pw-rotate-left"),t.right=t.qs("#pw-rotate-right"),[t.left,t.right].forEach(function(e){return e.addEventListener("click",function(e){t.element.value=parseInt(e.target.getAttribute("data-value")),t.stdEventBubble("input")})}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"setEnabled",value:function(t){[this.left,this.right].forEach(function(e){return e[t?"removeAttribute":"setAttribute"]("disabled",!0)})}}]),e}();e.Rotater=l},function(t,e){t.exports="<g> <defs> <clippath id=text-crop> <rect width=300 height=300></rect> </clippath> </defs> <g clip-path=url(#text-crop)> <g class=translate-group transform=translate(0,200)> <g class=rotate-group transform=rotate(0,150,0)> <g class=vertical-center-group> <g class=rotate-icon> <rect width=20 height=20 fill=cyan></rect> </g> <g class=delete-icon> <rect width=20 height=20 fill=orange></rect> </g> <text text-anchor=middle fill=red></text> <g class=text-rect> <rect class=test-rect fill=rgba(0,0,0,0) width=10 height=10></rect> </g> <foreignobject class=pw-fo width=300 height=300> <div class=text-wrap> <div class=text-input spellcheck=false contenteditable=true>Text Node</div> </div> </foreignobject> <rect class=center-point width=1 height=1 fill=none x=150></rect> </g> </g> </g> </g> </g> "},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasText=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1),r=i(8),s=(n=r)&&n.__esModule?n:{default:n},l=i(0),c=i(3);var u=navigator.userAgent.toLowerCase().includes("firefox")?1.05:1.025,d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default,"svg"));i.canvas=t,i.width=t.width,i.height=t.height,i.svg=i.canvas.svg,i.input=i.qs(".text-input"),i.textWrap=i.qs(".text-wrap"),i.translateGroup=i.qs(".translate-group"),i.rotateGroup=i.qs(".rotate-group"),i.vcGroup=i.qs(".vertical-center-group"),i.centerPoint=i.qs(".center-point"),i.deleteIcon=i.qs(".delete-icon"),i.rotateIcon=i.qs(".rotate-icon"),i.text=i.qs("text"),i.fo=i.qs(".pw-fo"),i.offset={x:0,y:0},i.textRect=i.qs(".text-rect"),i.testRect=i.qs(".test-rect"),i.cropRect=i.qs("#text-crop rect"),i.font="Arial",i.fontSize=32,i.lineHeight=38,i.rotateIcon.addEventListener("mousedown",i.startRotate.bind(i)),i.rotateIcon.addEventListener("touchstart",i.startRotate.bind(i)),i.textRect.addEventListener("mousedown",i.start.bind(i)),i.textRect.addEventListener("touchstart",i.start.bind(i)),i.deleteIcon.addEventListener("click",function(t){return i.element.dispatchEvent(new Event("remove"))}),i.input.addEventListener("input",i.update.bind(i));var n=i.end.bind(i);return document.addEventListener("mouseup",n),document.addEventListener("touchend",n),i.svg.addEventListener("mouseleave",n),i.svg.addEventListener("touchleave",n),document.addEventListener("mouseleave",n),i.input.addEventListener("blur",n),i.fo.setAttribute("width",i.width),i.fo.setAttribute("height",i.height),i.setFont(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),o(e,[{key:"startRotate",value:function(t){(0,c.killE)(t),document.rotateHandler=this.rotate.bind(this),this.svg.rotateHandler=this.rotate.bind(this),document.addEventListener("mousemove",document.rotateHandler),this.svg.addEventListener("touchmove",this.svg.rotateHandler)}},{key:"rotate",value:function(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]);var e=this.svg.createSVGPoint();e.x=this.centerPoint.getAttribute("x"),e.y=this.centerPoint.getAttribute("y");var i=e.matrixTransform(this.centerPoint.getCTM());i=i.matrixTransform(this.canvas.totalGroup.getCTM().inverse());var n=3*Math.round(((0,c.pointAngle)(i,(0,c.cursorPoint)(this.svg,t))+90)/3);this.rotateGroup.setAttribute("transform","rotate("+Math.round(n)+","+this.width/2+",0)")}},{key:"fastClick",value:function(t){(0,c.killE)(t),this.fo.classList.add("pw-fo-active"),this.textRect.classList.add("text-hidden"),this.input.focus()}},{key:"start",value:function(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]),this.input.clickTime=(0,l.now)(),this.svg.moveHandler=this.move.bind(this),this.svg.addEventListener("mousemove",this.svg.moveHandler),this.svg.addEventListener("touchmove",this.svg.moveHandler);var e=this.svg.createSVGPoint();e.x=t.clientX,e.y=t.clientY,e=e.matrixTransform(this.svg.getScreenCTM().inverse());var i=(0,c.getTranslate)(this.translateGroup);this.offset.x=e.x-i.x,this.offset.y=e.y-i.y}},{key:"end",value:function(t){document.removeEventListener("mousemove",document.rotateHandler),this.svg.removeEventListener("mousemove",this.svg.moveHandler),this.svg.removeEventListener("touchmove",this.svg.moveHandler);var e=(0,l.now)()-this.input.clickTime;t.target===this.testRect?e<l.CFG.FAST_CLICK_WAIT&&this.fastClick(t):"blur"!==t.type&&[this.input,this.textWrap].includes(t.target)||(this.fo.classList.remove("pw-fo-active"),this.textRect.classList.remove("text-hidden"))}},{key:"move",value:function(t){(0,c.killE)(t),t.touches&&(t=t.touches[0]);var e=(0,c.cursorPoint)(this.svg,t);e.x=(0,l.between)(e.x-this.offset.x,-this.width/2,this.width/2),e.y=(0,l.between)(e.y-this.offset.y,0,this.height),this.translateGroup.setAttribute("transform","translate("+e.x+","+e.y+")")}},{key:"update",value:function(){for(var t=this.input.innerHTML.replace(/<div>/g,"").replace(/<\/div>/g,"<br>").split("<br>");t.length>1&&!t[t.length-1];)t.pop();var e=window.getComputedStyle(this.input);this.updateText(t,e);var i=(0,c.px)().off(e.width),n=(0,c.px)().off(e.height);this.centerPoint.setAttribute("y",n/2),this.rotateIcon.setAttribute("transform","translate("+((this.width-i)/2+i/2-10)+", -40)"),this.deleteIcon.setAttribute("transform","translate("+(i+(this.width-i)/2)+", -20)"),this.vcGroup.setAttribute("transform","translate(0,"+-n/2+")"),this.cropRect.setAttribute("width",this.width),this.cropRect.setAttribute("height",this.height)}},{key:"updateText",value:function(t,e){var i=this,n=(0,c.px)().off(e.fontSize),o=this.lineHeight*u;this.text.innerHTML="<tspan >O</tspan><tspan >O</tspan>";var a=this.text.getBBox();1!==t.length||t[0]||(t[0]="&nbsp;"),this.text.innerHTML=t.map(function(e,r){return'<tspan x="'+(i.width/2+(r<t.length-1?n/7:0))+'" y="'+(r*o-a.y)+'">'+e+"</tspan>"}).join("\n"),(0,c.wrapWithRect)(this.text,this.testRect),this.centerPoint.setAttribute("x",this.width/2)}},{key:"pointerEvents",value:function(t){t=t||"auto",this.element.style.pointerEvents=t}},{key:"setFont",value:function(t,e){var i=this;this.lineHeight=Math.ceil(1.2*(e||this.fontSize)),[this.input,this.text].forEach(function(n){n.style.fontFamily=t||i.font,n.style.fontSize=(0,c.px)().on(e||i.fontSize),n.style.lineHeight=(0,c.px)().on(i.lineHeight)})}}]),e}();e.CanvasText=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MiniQ=void 0;var n=i(0);e.MiniQ=function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.from(e.querySelectorAll("[data-id]")).forEach(function(t){i[t.getAttribute("data-id")]=(0,n.createEl)(t)})}},function(t,e){t.exports='<g class=pw-canvas> <defs> <clippath id=mid> <rect data-id=midrect width=300 height=300></rect> </clippath> <clippath id=top> <rect data-id=toprect width=300 height=300></rect> </clippath> <clippath id=topleft> <rect data-id=topleftrect width=300 height=300></rect> </clippath> <clippath id=topright> <rect data-id=toprightrect width=300 height=300></rect> </clippath> <clippath id=left> <rect data-id=leftrect width=300 height=300></rect> </clippath> <clippath id=preview> <polygon data-id=previewpoly points="0,0 10,0 10,10 0,10"></polygon> </clippath> <clippath id=right> <rect data-id=rightrect width=300 height=300></rect> </clippath> <clippath id=bottom> <rect data-id=bottomrect width=300 height=300></rect> </clippath> <clippath id=bottomleft> <rect data-id=bottomleftrect width=300 height=300></rect> </clippath> <clippath id=bottomright> <rect data-id=bottomrightrect width=300 height=300></rect> </clippath> <filter id=f3 x=0 y=0 width=130% height=130%> <feoffset result=offOut in=SourceAlpha dx=0 dy=2 /> <fegaussianblur result=blurOut in=offOut stddeviation=6 /> <fecomponenttransfer> <fefunca type=linear slope=0.2 /> </fecomponenttransfer> <femerge> <femergenode/> <femergenode in=SourceGraphic /> </femerge> </filter> <lineargradient id=edgehighlight x1=20% y1=0% x2=0% y2=100%> <stop offset=0% style=stop-color:#fff;stop-opacity:.7 /> <stop offset=100% style=stop-color:#fff;stop-opacity:.3 /> </lineargradient> </defs> <g class=canvas-effect> <g class=canvas-wrap> <rect data-id=canvasbg class=canvas-bg height=300 width=300></rect> <g clip-path=url(#mid)> <g class=img-translate-group transform=translate(0,0)> <g class=img-scale-group transform="scale(1) translate(0, 0)"> <g transform="rotate(45 150 150)" class=img-rotate-group> <image data-id=img-main width=300 height=300 class=img-main xlink:href=""></image> </g> </g> </g> </g> <g class=img-top-group clip-path=url(#top)> <image data-id=img-top class="img-edge img-top" width=300 height=300 xlink:href=""></image> </g> <g class=img-left-group clip-path=url(#left)> <image data-id=img-left class="img-edge img-left" width=300 height=300 xlink:href=""></image> </g> <g class=img-top-left-group clip-path=url(#topleft)> <image data-id=img-top-left class="img-edge img-top-left" width=300 height=300 xlink:href=""></image> </g> <g class=img-top-right-group clip-path=url(#topright)> <image data-id=img-top-right class="img-edge img-top-right" width=300 height=300 xlink:href=""></image> </g> <g class=img-right-group clip-path=url(#right)> <image data-id=img-right class="img-edge img-right" width=300 height=300 xlink:href=""></image> </g> <g class=img-bottom-group clip-path=url(#bottom)> <image data-id=img-bottom class="img-edge img-bottom" width=300 height=300 xlink:href=""></image> </g> <g class=img-bottom-left-group clip-path=url(#bottomleft)> <image data-id=img-bottom-left class="img-edge img-bottom-left" width=300 height=300 xlink:href=""></image> </g> <g class=img-bottom-right-group clip-path=url(#bottomright)> <image data-id=img-bottom-right class="img-edge img-bottom-right" width=300 height=300 xlink:href=""></image> </g> <polygon class=highlight-poly data-id=highlightpoly points="0,0 10,0 10,10 0,10"></polygon> <rect data-id=canvasoutline class=canvas-outline height=300 width=300 fill=none></rect> </g> <rect data-id=canvasedge class=canvas-edge height=300 width=300 fill=none></rect> </g> </g> '},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1),r=i(11),s=(n=r)&&n.__esModule?n:{default:n},l=i(10),c=i(0),u=i(3),d=i(9),h=i(2);var p=function(t){function e(t,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default,"svg"));return a.x=t,a.y=i,a.width=n,a.height=o,a.imageRotation=0,a.imageScale=1.01,a.imageX=0,a.imageY=0,a.imageDimensions={width:a.width,height:a.height},a.imageTranslateGroup=a.qs(".img-translate-group"),a.imageScaleGroup=(0,c.toEl)(a.qs(".img-scale-group")),a.imageRotateGroup=(0,c.toEl)(a.qs(".img-rotate-group")),a.imageMid=a.qs(".img-main"),a.imageTop=a.qs(".img-top"),a.imageTopLeft=a.qs(".img-top-left"),a.imageTopRight=a.qs(".img-top-right"),a.imageLeft=a.qs(".img-left"),a.imageRight=a.qs(".img-right"),a.imageBottom=a.qs(".img-bottom"),a.imageBottomLeft=a.qs(".img-bottom-left"),a.imageBottomRight=a.qs(".img-bottom-right"),a.offset=[0,0],a.els=new l.MiniQ(a.element),a.texts=[],a.imageMid.addEventListener("mousedown",a.startDrag.bind(a)),window.addEventListener("mouseup",a.stopDrag.bind(a)),a.addHandler("click",function(t){(0,u.killE)(t),a.focus()}),a.addHandler("drop",function(t){var e=t.dataTransfer.getData("text/plain");if(e){var i=h.store.getImg(e);a.setImage({id:i.id,src:i.bigThumb.getAttribute("src"),dimensions:i.dimensions,drop:!0})}}),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),o(e,[{key:"init",value:function(){for(var t=this.element;!this.svg&&t;)"svg"===(t=t.parentNode).tagName?this.svg=t:t.classList.contains("total-group")&&(this.totalGroup=t);this.updateCoordinates(),this.updateRotationAndScale(),this.updateEdges()}},{key:"focus",value:function(){this.focused||(this.focused=!0,this.element.classList.add("pw-focus"),this.eventBubble("canvas:focus",this))}},{key:"blur",value:function(){this.focused=!1,this.element.classList.remove("pw-focus"),this.eventBubble("canvas:blur",this)}},{key:"addText",value:function(){var t=new d.CanvasText(this);return t.appendTo(this.element),t.update(),this.texts.push(t),t.element.addEventListener("remove",this.removeText.bind(this)),t}},{key:"removeText",value:function(t){var e=t.target;this.texts=this.texts.filter(function(t){return t.element!==e}),e.parentNode.removeChild(e)}},{key:"clearImage",value:function(t){t&&t!==this.imageId||(this.hasImage=!1,this.imageRotation=0,this.imageScale=1.01,this.imageX=0,this.imageY=0,this.imageId=void 0,this.imageSrc=void 0,this.imageDimensions={width:this.width,height:this.height},this.screenImageWidth=this.imageDimensions.width,this.screenImageHeight=this.imageDimensions.height,this.configureImages(""))}},{key:"configureImages",value:function(t){var e=this;["img-main","img-top","img-top-left","img-top-right","img-left","img-right","img-bottom","img-bottom-left","img-bottom-right"].forEach(function(i){e.els[i].setAttr("width",e.screenImageWidth).setAttr("height",e.screenImageHeight).setAttr("xlink:href",t)})}},{key:"setImage",value:function(t){var e=this;return new Promise(function(i){e.hasImage=!0,e.imageId=t.id,e.imageSrc=t.src,e.imageDimensions=t.dimensions;var n=new Image;n.addEventListener("load",function(o){var a=e.width/n.width,r=e.height/n.height,s=Math.max(a,r);e.screenImageWidth=n.width*s,e.screenImageHeight=n.height*s,e.configureImages(t.src),e.updateRotationAndScale(),e.setImagePos(0,0,"init"),e.updateEdges(),i(e)}),n.src=t.src,t.drop&&e.eventBubble("canvas:setimage",e)})}},{key:"updateCoordinates",value:function(){var t=c.CFG.CANVAS_EDGE_SIZE;this.element.setAttribute("transform","translate("+this.x+","+this.y+")"),this.els.midrect.setAttr("width",this.width+2*t).setAttr("height",this.height+2*t).setAttr("x",-t).setAttr("y",-t),this.els.toprect.setAttr("width",this.width).setAttr("height",t).setAttr("x",0).setAttr("y",-t),this.els.topleftrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",-t).setAttr("y",-t),this.els.toprightrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",this.width-.5).setAttr("y",.5-t),this.els.leftrect.setAttr("width",t).setAttr("height",this.height).setAttr("x",-t).setAttr("y",0),this.els.rightrect.setAttr("width",t).setAttr("height",this.height).setAttr("x",this.width).setAttr("y",0),this.els.bottomrect.setAttr("width",this.width).setAttr("height",t).setAttr("x",0).setAttr("y",this.height),this.els.bottomleftrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",-t).setAttr("y",this.height-.5),this.els.bottomrightrect.setAttr("width",t+.5).setAttr("height",t+.5).setAttr("x",this.width-.5).setAttr("y",this.height-.5),this.els.canvasedge.setAttr("width",this.width).setAttr("height",this.height),this.els.canvasoutline.setAttr("width",this.width+2*t).setAttr("height",this.height+2*t).setAttr("x",-t).setAttr("y",-t),this.els.canvasbg.setAttr("x",-t).setAttr("y",-t).setAttr("width",this.width+2*t).setAttr("height",this.height+2*t),this.els.previewpoly.setAttr("points","0,0 "+this.width+",0 "+this.width+","+this.height+" 0,"+this.height+" "+-t/2.5+","+(this.height-4)+" "+-t/2.5+",4"),this.els.highlightpoly.setAttr("points","0,0 0,"+this.height+" "+-t/2.5+","+(this.height-4)+" "+-t/2.5+",4")}},{key:"updateRotationAndScale",value:function(){var t=this.imageMid.getBBox();return this.scaleOffset={x:-t.width*this.imageScale/2,y:-t.height*this.imageScale/2},this.imageScaleGroup.setAttr("transform","translate("+this.scaleOffset.x+","+this.scaleOffset.y+") scale("+this.imageScale+")"),this.imageRotateGroup.setAttr("transform","rotate("+this.imageRotation+" "+t.width/2+" "+t.height/2+")"),this}},{key:"transform",value:function(t,e,i,n){this.imageRotation=i,this.imageScale=n,this.updateRotationAndScale(),this.setImagePos(t,e,"init"),this.updateCoordinates(),this.updateEdges()}},{key:"updateEdges",value:function(){var t=this.totalGroup.getCTM().inverse(),e=this.imageRotateGroup.element.getCTM(),i=this.svg.createSVGMatrix().flipY().translate(-this.x,-this.y).multiply(t);return this.imageTop.setAttribute("transform",(0,u.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-.5,-this.y-.5).multiply(t),this.imageTopLeft.setAttribute("transform",(0,u.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-2*this.width-.5,-this.y-.5).multiply(t),this.imageTopRight.setAttribute("transform",(0,u.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().translate(-this.x,-this.y).multiply(t),this.imageLeft.setAttribute("transform",(0,u.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().translate(-this.x-2*this.width,-this.y).multiply(t),this.imageRight.setAttribute("transform",(0,u.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipY().translate(-this.x,-this.y-2*this.height).multiply(t),this.imageBottom.setAttribute("transform",(0,u.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-.5,-this.y-2*this.height-.5).multiply(t),this.imageBottomLeft.setAttribute("transform",(0,u.matrixToAttr)(i.multiply(e))),i=this.svg.createSVGMatrix().flipX().flipY().translate(-this.x-2*this.width,-this.y-2*this.height).multiply(t),this.imageBottomRight.setAttribute("transform",(0,u.matrixToAttr)(i.multiply(e))),this}},{key:"startDrag",value:function(t){(0,u.killE)(t),this.focus();var e=(0,u.cursorPoint)(this.svg,t),i=this.imageOffset;this.offset=[e.x-i[0],e.y-i[1]],this.imageMid.moveListener=this.drag.bind(this),document.addEventListener("mousemove",this.imageMid.moveListener),this.texts.forEach(function(t){return t.pointerEvents("none")})}},{key:"stopDrag",value:function(){this.validatePos("outside")&&(this.setImagePos(0,0,"init"),this.validatePos(),this.updateEdges()),document.removeEventListener("mousemove",this.imageMid.moveListener),this.texts.forEach(function(t){return t.pointerEvents()})}},{key:"drag",value:function(t){var e=(0,u.cursorPoint)(this.svg,t);e.x-=this.offset[0],e.y-=this.offset[1],this.setImagePos(e.x,e.y),this.validatePos("outside"),this.updateEdges(),this.eventBubble("canvas:moveimage",{c:this,x:e.x,y:e.y})}},{key:"setImagePos",value:function(t,e,i){this.imageX=t-(i?this.scaleOffset.x:0),this.imageY=e-(i?this.scaleOffset.y:0),this.imageTranslateGroup.setAttribute("transform","translate("+this.imageX+", "+this.imageY+")"),this.validatePos()}},{key:"validatePos",value:function(t){if(this.hasImage){for(var e=this.totalGroup.getCTM().inverse(),i=this.imageMid.getCTM(),n=[(0,u.point)(this.x,this.y),(0,u.point)(this.x+this.width,this.y),(0,u.point)(this.x+this.width,this.y+this.height),(0,u.point)(this.x,this.y+this.height)],o=this.imageMid.getBBox(),a=o.width,r=o.height,s=this.svg,l=[m(0,0),m(a,0),m(a,r),m(0,r)],c=Array(l.length).fill(0),d=0;d<l.length;d++)for(var h=l[d],p=l[d+1]||l[0],f=0;f<n.length;f++){var g=n[f];if((0,u.rotation)(h,p,g)<0){if(this.element.classList.add("pw-invalid-canvas"),!t)return this.focused&&this.eventBubble("canvas:invalid"),!1;c[f]++}}return this.focused&&!t&&this.eventBubble("canvas:valid"),c.every(function(t){return!t})&&this.element.classList.remove("pw-invalid-canvas"),!t||c.filter(function(t){return!!t}).length>3}function m(t,n){var o=s.createSVGPoint();return o.x=t,o.y=n,o.matrixTransform(e.multiply(i))}}},{key:"dpi",get:function(){return this.imageDimensions.width/(this.width*c.UNITS.MM_TO_INCH)/this.imageScale}},{key:"imageOffset",get:function(){var t=this.imageTranslateGroup.getAttribute("transform").slice("transform(".length,-1).split(/[ ,]+/).map(function(t){return Number(t)});return[t[0],t[1]||0]}}]),e}();e.Canvas=p},function(t,e){t.exports='<svg class="composer wow-canvas-fc" viewBox="0 0 800 600" preserveAspectRatio=xMidYMid version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink> <g class=total-group></g> </svg> '},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Composer=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1),r=i(13),s=(n=r)&&n.__esModule?n:{default:n},l=i(12),c=i(0),u=i(2);var d=c.CFG.COMPOSER_MARGIN,h=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.default,"svg"));return n.canvases=[],n.totalGroup=n.qs(".total-group"),n.svg=(0,c.toEl)(n.element),n.splitImage=i,n.canvas=void 0,n.viewBox={x:0,y:0,width:0,height:0},n.tightViewBox=n.viewBox,function(t,e){var i={x:0,y:0,width:0,height:0},n=0,o=0;e.forEach(function(e){t.canvases.push(new l.Canvas(e[0],e[1],e[2],e[3]).appendTo(t.totalGroup)),n=Math.max(n,e[2]),o=Math.max(o,e[3]),i.x=Math.min(i.x,e[0]),i.y=Math.min(i.y,e[1]),i.width=Math.max(i.width,-i.x+e[0]+e[2]),i.height=Math.max(i.height,-i.y+e[1]+e[3])}),t.tightViewBox=i,t.viewBox=function(t){return(t=Object.assign({},t)).x-=d,t.y-=d,t.width+=2*d,t.height+=2*d,t}(i),t.largestCanvasDimensions={width:n,height:o}}(n,t),n.updateViewBox(),n.addHandler("canvas:focus",function(t){return n.selectCanvas(t.detail)}),n.addHandler("click",function(t){return n.selectCanvas()}),i?(n.addHandler("canvas:setimage",function(t){return n.setSplitImages(t)}),n.addHandler("canvas:moveimage",function(t){return n.moveSplitImages(t)}),u.store.minDimensions.width=n.tightViewBox.width,u.store.minDimensions.height=n.tightViewBox.height):(u.store.minDimensions.width=n.largestCanvasDimensions.width,u.store.minDimensions.height=n.largestCanvasDimensions.height),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),o(e,[{key:"selectCanvas",value:function(t){this.canvases.forEach(function(e){return e!==t&&e.blur()}),this.canvas=t}},{key:"scaleCanvas",value:function(t){(this.canvas||this.splitImage)&&(t=1.01+t/50,(this.splitImage?this.canvases:[this.canvas]).forEach(function(e){e.imageScale=t,e.updateRotationAndScale().updateEdges().validatePos()}))}},{key:"rotateCanvas",value:function(t){(this.canvas||this.splitImage)&&(this.splitImage?this.canvases:[this.canvas]).forEach(function(e){e.imageRotation+=t,e.updateRotationAndScale().updateEdges().validatePos()})}},{key:"setSplitImages",value:function(t){var e=this,i=t.detail;this.canvases.forEach(function(t){t.setImage({id:i.imageId,src:i.imageSrc,dimensions:i.imageDimensions}).then(function(n){var o=Math.max(e.tightViewBox.width/i.screenImageWidth,e.tightViewBox.height/i.screenImageHeight)+.01;n.transform(-t.x-1,-t.y-1,i.imageRotation,o)})})}},{key:"moveSplitImages",value:function(t){var e=t.detail.c,i=t.detail.x,n=t.detail.y;this.canvases.filter(function(t){return t!==e}).forEach(function(t){t.setImagePos(i+e.x-t.x,n+e.y-t.y),t.updateEdges()})}},{key:"updateViewBox",value:function(t){t=t||this.viewBox,this.svg.setAttr("viewBox",t.x+" "+t.y+" "+t.width+" "+t.height)}},{key:"clearImage",value:function(t){this.canvases.forEach(function(e){return e.clearImage(t)})}},{key:"initCanvases",value:function(){return this.canvases.forEach(function(t){return t.init()}),this}}]),e}();e.Composer=h},function(t,e){t.exports="<div class=pw-zoom> <div class=wp-zoom-label>zoom</div> <div class=slide-container> <input id=zoom type=range min=1 max=100 value=50 class=slider name=slider> </div> </div> "},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(15),r=(n=a)&&n.__esModule?n:{default:n},s=i(1);i(0);var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.default));return t.input=t.qs("input"),t.input.value=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"setVal",value:function(t){t=50*(t-1.01),this.input.value=t}},{key:"setEnabled",value:function(t){this.input[t?"removeAttribute":"setAttribute"]("disabled",!0)}}]),e}();e.Slider=l},function(t,e){t.exports="<div class=pw-img-thumb-wrap> <div class=pw-img-thumb><div class=pw-delete></div></div> </div> "},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Thumb=void 0;var n,o=i(17),a=(n=o)&&n.__esModule?n:{default:n},r=i(1);i(3);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.default));return i.body=i.qs(".pw-img-thumb"),i.body.appendChild(t.smallThumb),i.id=t.id,i.name=t.name,i.addHandler("dragstart",function(t){t.dataTransfer.setData("text/plain",i.id)}),i.qs(".pw-delete").addEventListener("click",function(t){i.eventBubble("image:remove",i)}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),e}();e.Thumb=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uploadImg=function(t,e){return new Promise(function(i,n){var o=new FormData;o.append(e,t);var a=new XMLHttpRequest;a.addEventListener("load",function(t){return console.log(t)}),a.addEventListener("error",function(t){return console.log(t)}),a.addEventListener("progress",function(t){return console.log(t)}),a.open("POST","http://localhost:3011/upload",!0),a.send(o)})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=2;e.createThumb=function(t,e){return new Promise(function(i){function o(){t.removeEventListener("load",o);var n=document.createElement("canvas"),a=n.getContext("2d"),r=document.createElement("img");r.src=t.result,r.addEventListener("load",function(){var t=Math.min(1,e/Math.max(r.width,r.height)),o=t<.7?function(t,e){var i=document.createElement("canvas"),n=i.getContext("2d");return i.width=t.width,i.height=t.height,n.filter="blur("+Math.round(1/e/3)+"px)",n.drawImage(t,0,0),n.filter="none",i}(r,t):r;n.width=Math.floor(r.width*t),n.height=Math.floor(r.height*t),a.drawImage(o,0,0,n.width,n.height),i(n.toDataURL()),r=null})}t.readyState===n?o():t.addEventListener("load",o,!1)})},e.getDimensions=function(t){return new Promise(function(e){var i=URL.createObjectURL(t),n=new Image;n.onload=function(){e({width:n.width,height:n.height})},n.src=i})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleFile=void 0;var n=i(20),o=i(19),a=i(0),r=i(2);e.handleFile=function(t){var e=5*r.store.minDimensions.width,i=5*r.store.minDimensions.height;return console.log("name:",t.name,"type:",t.type,"size:",(t.size/1024/1024).toFixed(1)),new Promise(function(s,l){if(t){var c=new FileReader;c.addEventListener(a.EVENTS.LOAD_END,function(){if(u=new Uint8Array(c.result),d=[255,216,255],h=[137,80,78,71,13,10,26,10],u.slice(0,3).every(function(t,e){return t===d[e]})||u.every(function(t,e){return t===h[e]})){var u,d,h,p=(0,a.uid)();(c=new FileReader).readAsDataURL(t),Promise.all([(0,n.createThumb)(c,a.CFG.THUMB_SIZE_SMALL),(0,n.createThumb)(c,a.CFG.THUMB_SIZE_BIG),(0,n.getDimensions)(t)]).then(function(n){var c=n[2];if(c.width<e||c.height<i)l({error:"imageTooSmall",name:t.name,min:{width:e,height:i},dimensions:c});else{var u={id:p,name:t.name,smallThumbSrc:n[0],bigThumbSrc:n[1],smallThumb:(0,a.createEl)("img").setAttr("src",n[0]).setAttr("draggable",!0).el,bigThumb:(0,a.createEl)("img").setAttr("src",n[1]).setAttr("draggable",!0).el,dimensions:n[2]};r.store.images.push(u),(0,o.uploadImg)(t,p),s(u)}})}else l({error:"invalidFile"})}),c.readAsArrayBuffer(t.slice(0,8))}else l({error:"noFile"})})}},function(t,e){t.exports="<div class=drop-zone> <div class=pw-file> <label class=pw-file-label for=pw-file-input> <input id=pw-file-input class=pw-file-input type=file multiple=multiple accept=.png,.jpg,.jpeg /> <button class=pw-file-button>Upload Images</button> <div class=pw-drop-max-reached></div> <div class=pw-drop-help></div> </label> </div> </div>"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileDropZone=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(22),r=(n=a)&&n.__esModule?n:{default:n},s=i(1),l=i(21),c=i(0),u=i(18);var d="drag-over",h=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.default));return document.body.addEventListener(c.EVENTS.MOUSE_UP,function(){t.removeClass(d)}),t.addHandler(c.EVENTS.DRAG_OVER,function(){return t.addClass(d)}),t.addHandler(c.EVENTS.DRAG_LEAVE,function(){return t.removeClass(d)}),t.modal=void 0,t.helpText=t.qs(".pw-drop-help"),t.maxReachedText=t.qs(".pw-drop-max-reached"),t.fileInput=t.qs(".pw-file-input"),t.fileButton=t.qs(".pw-file-button"),t.fileButton.addEventListener("click",function(e){t.qs(".pw-file-input").click()}),t.fileInput.addEventListener("input",function(e){Array.from(t.fileInput.files).forEach(function(e){return(0,l.handleFile)(e).then(p.bind(t)).catch(function(e){return t.handleError(e)})}),t.fileInput.value=""}),t.maxReachedText.innerHTML="You reached the maximum of "+c.CFG.MAX_IMAGES+" images. Please remove some before uploading new ones",t.update(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"update",value:function(){var t=this.qsAll(".pw-img-thumb-wrap").length;this.count=t,this.helpText.classList[t?"add":"remove"]("has-files"),this.helpText.innerHTML=c.CFG.HTML_INFO_ICON+"<br>"+(t?"<label>Drag an image onto a canvas</label>":"<label>or Drag & Drop<br>image files here</label>"),t>=c.CFG.MAX_IMAGES?(this.fileButton.setAttribute("disabled","disabled"),this.maxReachedText.style.display="block"):(this.fileButton.removeAttribute("disabled"),this.maxReachedText.style.display="none")}},{key:"drop",value:function(t){var e=this;if(this.removeClass("drag-over"),t.preventDefault(),!this.modal||!this.modal.isOpen)if(t.dataTransfer.items){for(var i=0;i<t.dataTransfer.items.length;i++)if("file"===t.dataTransfer.items[i].kind&&!t.dataTransfer.getData("text/plain")){var n=t.dataTransfer.items[i].getAsFile();(0,l.handleFile)(n).then(p.bind(this)).catch(function(t){return e.handleError(t)})}t.dataTransfer.items.clear()}else for(var o=0;o<t.dataTransfer.files.length;o++)(0,l.handleFile)(t.dataTransfer.files[o]).then(p.bind(this)).catch(function(t){return e.handleError(t)})}},{key:"handleError",value:function(t){this.eventBubble("fileError",t),console.log(t)}}]),e}();function p(t){if(this.count++,!(this.count>c.CFG.MAX_IMAGES)){var e=new u.Thumb(t);this.append(e),this.update()}}e.FileDropZone=h},function(t,e){t.exports='<div> <style>.wow-canvas .slide-container{flex:1 1 auto}.wp-zoom-label{margin:0 10px;flex:0 1 auto;color:gray}.pw-zoom{margin-top:7px;display:flex;flex-direction:row}.wow-canvas .slider{-webkit-appearance:none;appearance:none;width:100%;height:15px;background:#d3d3d3;outline:0;opacity:.7;-webkit-transition:.2s;transition:opacity .2s}.wow-canvas .slider:hover{opacity:1}.wow-canvas .slider:disabled{opacity:.3}.wow-canvas .slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#6495ed;border:1px solid #557fca;cursor:pointer}.wow-canvas .slider::-moz-range-thumb{width:25px;height:25px;background:#6495ed;border:1px solid #557fca;cursor:pointer}.wow-canvas *{box-sizing:border-box}.wow-canvas-fc{display:flex;flex-direction:column}.wow-canvas{height:95vh;position:relative;border:1px solid #d3d3d3;font-family:Roboto,sans-serif;font-size:14px;font-weight:500}.wow-canvas-top{flex:1 1 auto}.wow-canvas-top-wrapper{flex:1;display:flex}.wow-canvas-main{border-right:1px solid #eee;flex:1 1 auto}.wow-canvas-toolbar{flex:0 1 20%}.wow-canvas-header{flex:0 0 70px}.wow-canvas-body{flex:1 1 auto;position:relative}.wow-canvas-body-wrap{background:red;position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0}.wow-canvas-header{border-bottom:1px solid #eee}.wow-canvas-footer{border-top:1px solid #eee;flex:0 0 50px;display:flex;flex-direction:row}.pw-footer{flex:0 1 auto;margin:10px}.pw-footer-mid{flex:0 1 30%}.wow-canvas .drop-zone{flex:1 1 auto;overflow:auto}.wow-canvas .drag-over{border-color:#fff}.wow-canvas .drop-zone-empty::after{display:block;width:100%;margin:50% 0;text-align:center;content:\'Drop Images Here\'}.wow-canvas .composer{z-index:1;position:absolute;flex:1 1 auto;width:100%;height:100%}svg .text-wrap{text-align:center;tab-index:-1}svg .text-input,text{font-family:Arial,sans-serif;font-size:32px;line-height:38px}svg .text-input{box-sizing:border-box;outline:0;border:1px solid #20b2aa;background:#fff;display:inline-block;min-width:10px}svg .pw-fo{visibility:hidden;pointer-events:none}svg .pw-fo.pw-fo-active{visibility:visible;pointer-events:auto}svg .text-hidden{visibility:hidden}svg text{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}svg text::selection{background:0 0}.pw-canvas .delete-icon,.pw-canvas .rotate-icon{visibility:hidden}.pw-canvas .text-rect{pointer-events:none}.pw-canvas.pw-focus .delete-icon,.pw-canvas.pw-focus .rotate-icon{display:inherit;cursor:pointer}.img-main{cursor:move}.pw-canvas.pw-focus .test-rect{stroke:#0ff;cursor:pointer}.pw-canvas.pw-focus .text-rect{pointer-events:auto}.canvas-edge{stroke:rgba(125,125,125,.5)}.pw-canvas{box-shadow:#4caf50}.pw-focus .canvas-edge{stroke:#ff0}.canvas-effect{filter:url(#f3)}.pw-focus .canvas-effect{filter:none}.highlight-poly{fill:url(#edgehighlight)}.pw-focus .highlight-poly{visibility:hidden}.pw-img-thumb-wrap{margin:10px;width:80%;margin-left:10%;text-align:center;position:relative}.pw-img-thumb{border:1px solid #d3d3d3}.pw-img-thumb img{position:relative;display:block;width:100%}.pw-file-input{width:0;height:0;overflow:hidden;display:none}.drop-zone .pw-file-label{width:0;height:0}.pw-file{padding:15px 15px 0 15px}.pw-drop-help{color:gray;text-align:center;margin-top:50%;padding:5px}.pw-drop-icon{display:inline-block}.pw-icon-info{background-size:contain;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYwIiB3aWR0aD0iMTYwIiB2ZXJzaW9uPSIxLjAiPiAgICA8ZyBmaWxsPSIjNGI0YjRiIj4gICAgICAgIDxwYXRoIGQ9Im04MCAxNWMtMzUuODggMC02NSAyOS4xMi02NSA2NXMyOS4xMiA2NSA2NSA2NSA2NS0yOS4xMiA2NS02NS0yOS4xMi02NS02NS02NXptMCAxMGMzMC4zNiAwIDU1IDI0LjY0IDU1IDU1cy0yNC42NCA1NS01NSA1NS01NS0yNC42NC01NS01NSAyNC42NC01NSA1NS01NXoiLz4gICAgICAgIDxwYXRoIGQ9Im01Ny4zNzMgMTguMjMxYTkuMzgzNCA5LjExNTMgMCAxIDEgLTE4Ljc2NyAwIDkuMzgzNCA5LjExNTMgMCAxIDEgMTguNzY3IDB6IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjE5ODkgMCAwIDEuMjM0MiAyMS4yMTQgMjguNzUpIi8+ICAgICAgICA8cGF0aCBkPSJtOTAuNjY1IDExMC45NmMtMC4wNjkgMi43MyAxLjIxMSAzLjUgNC4zMjcgMy44Mmw1LjAwOCAwLjF2NS4xMmgtMzkuMDczdi01LjEybDUuNTAzLTAuMWMzLjI5MS0wLjEgNC4wODItMS4zOCA0LjMyNy0zLjgydi0zMC44MTNjMC4wMzUtNC44NzktNi4yOTYtNC4xMTMtMTAuNzU3LTMuOTY4di01LjA3NGwzMC42NjUtMS4xMDUiLz4gICAgPC9nPjwvc3ZnPg==)}.pw-icon{width:32px;height:32px}.pw-drop-help.has-files{margin-top:10px}.pw-file-button{width:100%;box-sizing:border-box;display:block}.pw-delete{position:absolute;z-index:1;background:#6495ed;border:1px solid #547ac4;border-radius:3px;width:20px;height:20px;line-height:18px;top:5px;cursor:pointer;font-size:20px;color:#eee;text-align:center;font-weight:900;right:5px}.pw-delete:hover{background:#6ca0ff;border:1px solid #5c86d7;color:#fff}.pw-delete:active{background:#5887d5;border:1px solid #4568a5;color:#fff}.pw-delete::after{content:\'×\'}.canvas-outline{stroke:#d3d3d3}.pw-canvas.pw-focus .canvas-outline{stroke:#20b2aa;stroke-width:3px}.pw-canvas .canvas-wrap{clip-path:url(#preview)}.pw-canvas.pw-focus .canvas-wrap{clip-path:none}.canvas-bg{fill:#fff}.pw-canvas.pw-invalid-canvas .canvas-edge{stroke:red;stroke-width:3px}.wow-canvas button{border-radius:3px;padding:8px 10px;cursor:pointer;background:#6495ed;border:1px solid #547ac4;font-family:Roboto,sans-serif;font-weight:600;color:#fff}.wow-canvas button{background:#6495ed;border:1px solid #547ac4;color:#fff}.wow-canvas button:hover{background:#6ca0ff;border:1px solid #5c86d7}.wow-canvas button:active{background:#5887d5;border:1px solid #4568a5}.wow-canvas button:disabled{background:#ececec;border:1px solid #d3d3d3;color:gray}.wow-canvas button.pw-btn-danger{background:#db5951;border:1px solid #b13b36}.wow-canvas button.pw-btn-danger:hover{background:#f06259;border:1px solid #d34640}.wow-canvas button.pw-btn-danger:active{background:#c24f48;border:1px solid #9b342f}.pw-drop-max-reached{margin-top:10px;font-size:12px;color:grey}.pw-modal-wrap{position:absolute;top:0;left:0;right:0;bottom:0;z-index:10;display:none}.pw-modal-wrap.pw-modal-wrap-open{display:initial}.pw-modal-window-wrap{background:rgba(255,255,255,.5);top:0;left:0;right:0;bottom:0;position:relative;display:flex;align-items:center;justify-content:center;height:100%}.pw-modal-window{max-width:50%;position:relative;background:#fff;border:1px solid #d3d3d3;box-shadow:2px 2px 20px 0 rgba(0,0,0,.25)}.pw-modal-content{min-width:300px;min-height:100px;padding:50px 50px}.pw-modal-btn-container{border-top:1px solid #d3d3d3;padding:10px}.aligner-item--top{align-self:flex-start}.aligner-item--bottom{align-self:flex-end}.pw-float-right{float:right}@media only screen and (max-width:600px){.pw-delete{border-radius:3px;width:50px;height:50px;line-height:48px;top:5px;cursor:pointer;font-size:40px;color:#eee;text-align:center;font-weight:900;right:5px}.wow-canvas button{border-radius:3px;padding:8px 10px;cursor:pointer;background:#6495ed;border:1px solid #547ac4;font-family:Roboto,sans-serif;font-weight:600;font-size:24px;color:#fff}.wow-canvas-toolbar{flex:0 1 30%}}@keyframes slide{from{margin-left:-20px;opacity:0}to{margin-left:0;opacity:1}}@keyframes slide-back{from{margin-left:0;opacity:1}to{margin-left:-20px;opacity:0}}.pw-help-hide{animation-name:slide-back;animation-duration:.3s;animation-fill-mode:forwards}.pw-help-show{animation-name:slide;animation-duration:.3s}.pw-help{flex:0 1 auto;padding:5px;border-top:1px solid #eee}.pw-help::before{content:\'i\';padding:0 6.5px;margin-right:5px;border-radius:50%;border:1px solid #000}@media only screen and (min-width:1200px){.wow-canvas-toolbar{flex:0 1 300px}}</style> <div class="wow-canvas wow-canvas-fc"> <div class="wow-canvas-top wow-canvas-fc"> <div class=wow-canvas-top-wrapper> <div class="wow-canvas-main wow-canvas-fc"> <div class=wow-canvas-header></div> <div class="wow-canvas-body wow-canvas-fc"></div> </div> <div class="wow-canvas-toolbar wow-canvas-fc"> <div class=wow-canvas-header></div> <div class="wow-canvas-body wow-canvas-fc"></div> </div> </div> </div> <div class=pw-help></div> <div class=wow-canvas-footer> <div class="pw-footer pw-footer-left"></div> <div class="pw-footer pw-footer-mid"></div> <div class="pw-footer pw-footer-right"></div> </div> </div> </div>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(24),r=(n=a)&&n.__esModule?n:{default:n},s=i(1),l=i(23),c=i(16),u=i(14),d=i(7),h=i(5),p=i(2),f=i(0);var g=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.default));return t.toolbarBody=t.qs(".wow-canvas .wow-canvas-toolbar .wow-canvas-body"),t.footer=t.qs(".wow-canvas-footer"),t.footerLeft=t.qs(".pw-footer-left"),t.footerMid=t.qs(".pw-footer-mid"),t.footerRight=t.qs(".pw-footer-right"),t.help=(0,f.toEl)(t.qs(".pw-help")),t.fileDropper=(new l.FileDropZone).appendTo(t.toolbarBody).addHandler("image:remove",function(e){p.store.modal.open({danger:!0,btnText:"Remove",html:"Really remove "+e.detail.name+" from the editor?"}).then(function(){e.detail.remove(),t.composer.clearImage(e.detail.id),t.fileDropper.update(),t.updateControls()})}),t.addHandler("drop",function(e){return t.fileDropper.drop(e)}),t.addHandler("dragover",function(t){return t.preventDefault()}),t.wrap=t.qs(".wow-canvas"),t.mainBody=t.qs(".wow-canvas .wow-canvas-main .wow-canvas-body"),t.slider=(new c.Slider).appendTo(t.footerMid).addHandler("input",function(e){return t.composer.scaleCanvas(e.target.value)}),t.rotater=(new d.Rotater).appendTo(t.footerLeft).addHandler("input",function(e){return t.composer.rotateCanvas(e.target.value)}),t.composer=new u.Composer([[0,0,350,300],[410,100,350,300]],!1).appendTo(t.mainBody).addHandler("canvas:focus",function(e){t.slider.setVal(e.detail.imageScale),t.focusedCanvas=e.detail,t.updateControls()}).addHandler("canvas:blur",function(e){setTimeout(function(){e.detail===t.focusedCanvas&&(t.focusedCanvas=void 0,t.updateControls())},10)}).addHandler("canvas:invalid",function(e){t.help.blip("The Image doesn't cover the canvas!")}).addHandler("canvas:valid",function(e){t.help.blip()}),t.updateControls(),t.modal=(new h.Modal).appendTo(t.wrap),t.fileDropper.modal=t.modal,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"init",value:function(){this.composer.initCanvases()}},{key:"updateControls",value:function(){var t=!!this.focusedCanvas&&this.focusedCanvas.hasImage;this.rotater.setEnabled(t),this.slider.setEnabled(t),this.help.blip(t?"":"Select a canvas with an image to rotate or scale")}}]),e}();e.Editor=g},function(t,e,i){"use strict";(new(i(25).Editor)).appendTo(document.body).init()}]);